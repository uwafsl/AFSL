window.__tnt||(window.__tnt={});
__tnt.client=function(a,b){this.obj={};this.obj.userAgent=navigator.userAgent.toLowerCase();this.obj.browser=a["eb.browser"]={version:(this.obj.userAgent.match(/.+(?:rv|it|ra|ie)[\/: ]([\d.]+)/)||[])[1],safari:/webkit/.test(this.obj.userAgent),opera:/opera/.test(this.obj.userAgent),msie:/msie/.test(this.obj.userAgent)&&!/opera/.test(this.userAgent),mozilla:/mozilla/.test(this.obj.userAgent)&&!/(compatible|webkit)/.test(this.obj.userAgent),silk:/silk/.test(this.obj.userAgent),chrome:/chrome/.test(this.obj.userAgent)};
var c=this.obj,e=/win/.test(this.obj.userAgent),f=/mac/.test(this.obj.userAgent),d;try{d="ontouchstart"in document.documentElement}catch(g){d=!1}c.platform=a["eb.platform"]={win:e,mac:f,touchDevice:d,android:-1<this.obj.userAgent.indexOf("android"),ipad:this.obj.userAgent.match(/ipad/i)?!0:!1,iphone:this.obj.userAgent.match(/iphone/i)?!0:!1,ipod:this.obj.userAgent.match(/ipod/i)?!0:!1,winphone:this.obj.userAgent.match(/Windows Phone/i)?!0:!1,blackberry:this.obj.userAgent.match(/BlackBerry/i)?!0:!1,
webos:this.obj.userAgent.match(/webOS/i)?!0:!1};this.obj.platform.ios=this.obj.platform.ipad||this.obj.platform.ipod||this.obj.platform.iphone;this.obj.touchOnly=this.obj.platform.touchDevice&&(this.obj.platform.android||this.obj.platform.ios||this.obj.platform.winphone||this.obj.platform.blackberry||this.obj.platform.webos||this.obj.platform.silk);this.obj.clickEvent=this.obj.touchOnly?"touchend":"click";this.obj.capabilities={supportsCookies:function(){},supportsFlash:function(){}};return this.obj}(window);
__tnt.user=function(a,b){this.obj={authToken:jQuery.cookie("tncms-authtoken"),screenName:TNCMS.User.getScreenName(),avatar:jQuery.cookie("tncms-avatarurl"),remember:jQuery.cookie("tncms-rememberme"),services:jQuery.cookie("tncms-services")};this.obj.loggedIn=TNCMS.User.isLoggedIn();return this.obj}(window);__tnt.log=function(a){window.console&&console.log(a)};__tnt.urlHash=function(a){return(a=location.href.match(RegExp("#.*[?&]"+a+"=([^&]+)(&|$)")))?a[1]:""};__tnt.isAuthor=!1;
__tnt.trackEventLater=[];__tnt.trackEvent=function(a){"object"===jQuery.type(a)&&__tnt.trackEventLater.push(a)};__tnt.truncateStr=function(a,b,c){a.length>b&&(c=c?c:"",a=a.substring(0,b)+c);return a};__tnt.compareArray=function(a,b){if("undefined"!=typeof a&&"undefined"!=typeof b)return 0<a.filter(function(a){return-1<b.indexOf(a)}).length};
__tnt.elementOnScreen=function(a,b){if(0===$(a).length)return!1;var c=$(a),e=$(window);b=b?b:5;var f=e.scrollTop(),e=f+e.height(),d=c.offset().top-b,c=d+c.height()-b;return e>=d&&f<=c};
__tnt.template=function(a,b,c,e,f,d){var g="",h=!1;"undefined"==typeof c&&(c=!1);"undefined"==typeof d&&(d=!0);"undefined"==typeof limit&&(limit=e.length);"TEMPLATE"==a.prop("nodeName")?(d=$("<div></div>"),a=a.html(),g=d.append(a).children().first().unwrap(),h=!0):$(a).length?($(a).children().length||""==$(a).html().trim()||$(a).html($(a).html().replace(/\x3c!--|--\x3e/g,"")),g=$(a).first().children().first().clone(),d&&(a.html().match(/\x3c!--|--\x3e/g,"")||$(a).html("\x3c!--"+$(a).html()+"--\x3e")),
h=!0):__tnt.log("__tnt.template - no template element found");h&&("object"==typeof e&&$.each(e,function(){var a=g;this.element&&(a=$(g.find(this.element)),this.first&&(a=$(g.find(a).first())));a&&("undefined"!=typeof this.attr&&$.each(this.attr,function(){a.attr(this.attr,this.value)}),"undefined"!=typeof this.html&&a.html(this.html),"undefined"!=typeof this.url&&a.wrap('<a href="'+this.url+'"></a>'))}),"function"==typeof f&&f(g),c?b.prepend(g):b.append(g));return g};
__tnt.youtube=function(a,b){return o={create:[],playing:!1,state:{change:function(a){switch(a.data){case YT.PlayerState.ENDED:__tnt.trackEvent({category:"tnt-video",action:"end",label:"youtube",value:"1"});break;case YT.PlayerState.PLAYING:a.target!=o.playing&&o.state.pause();o.playing=a.target;__tnt.trackEvent({category:"tnt-video",action:"play",label:"youtube",value:"1"});break;case YT.PlayerState.PAUSED:__tnt.trackEvent({category:"tnt-video",action:"pause",label:"youtube",value:"1"})}},pause:function(){o.playing&&
o.playing.pauseVideo()}},players:{register:function(a){if(0===o.create.length){var b=document.createElement("script");b.src="https://www.youtube.com/iframe_api";var f=document.getElementsByTagName("script")[0];f.parentNode.insertBefore(b,f)}o.create.push(a)},init:function(){0<o.create.length&&(__tnt.log("  Players:"),$.each(o.create,function(a,b){__tnt.log("    "+b);new YT.Player(b,{events:{onStateChange:o.state.change}})}))}}}}(window);
function onYouTubeIframeAPIReady(){jQuery(window).load(function(){__tnt.log("Init YT:");__tnt.youtube.players.init()})};
