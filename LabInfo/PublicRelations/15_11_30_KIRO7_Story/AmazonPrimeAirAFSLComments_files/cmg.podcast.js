/*! rangeslider.js - v1.1.0 | (c) 2015 @andreruffert | MIT license | https://github.com/andreruffert/rangeslider.js */
;!function(b){"function"==typeof define&&define.amd?define(["jquery"],b):b("object"==typeof exports?require("jquery"):jQuery)}(function(y){function x(){var b=document.createElement("input");return b.setAttribute("type","range"),"text"!==b.type}function w(e,d){var f=Array.prototype.slice.call(arguments,2);return setTimeout(function(){return e.apply(null,f)},d)}function v(d,c){return c=c||100,function(){if(!d.debouncing){var a=Array.prototype.slice.apply(arguments);d.lastReturnVal=d.apply(window,a),d.debouncing=!0}return clearTimeout(d.debounceTimeout),d.debounceTimeout=setTimeout(function(){d.debouncing=!1},c),d.lastReturnVal}}function u(b){return 0===b.offsetWidth||0===b.offsetHeight||b.open===!1?!0:!1}function t(e){for(var d=[],f=e.parentNode;u(f);){d.push(f),f=f.parentNode}return d}function r(E,D){function C(b){"undefined"!=typeof b.open&&(b.open=b.open?!1:!0)}var B=t(E),A=B.length,z=[],l=E[D];if(A){for(var k=0;A>k;k++){z[k]=B[k].style.cssText,B[k].style.display="block",B[k].style.height="0",B[k].style.overflow="hidden",B[k].style.visibility="hidden",C(B[k])}l=E[D];for(var f=0;A>f;f++){B[f].style.cssText=z[f],C(B[f])}}return l}function q(a,d){if(this.$window=y(window),this.$document=y(document),this.$element=y(a),this.options=y.extend({},m,d),this.polyfill=this.options.polyfill,this.onInit=this.options.onInit,this.onSlide=this.options.onSlide,this.onSlideEnd=this.options.onSlideEnd,this.polyfill&&n){return !1}this.identifier="js-"+p+"-"+o++,this.startEvent=this.options.startEvent.join("."+this.identifier+" ")+"."+this.identifier,this.moveEvent=this.options.moveEvent.join("."+this.identifier+" ")+"."+this.identifier,this.endEvent=this.options.endEvent.join("."+this.identifier+" ")+"."+this.identifier,this.min=parseFloat(this.$element[0].getAttribute("min")||0),this.max=parseFloat(this.$element[0].getAttribute("max")||100),this.value=parseFloat(this.$element[0].value||this.min+(this.max-this.min)/2),this.step=parseFloat(this.$element[0].getAttribute("step")||1),this.toFixed=(this.step+"").replace(".","").length-1,this.$fill=y('<div class="'+this.options.fillClass+'" />'),this.$handle=y('<div class="'+this.options.handleClass+'" />'),this.$range=y('<div class="'+this.options.rangeClass+'" id="'+this.identifier+'" />').insertAfter(this.$element).prepend(this.$fill,this.$handle),this.$element.css({position:"absolute",width:"1px",height:"1px",overflow:"hidden",opacity:"0"}),this.handleDown=y.proxy(this.handleDown,this),this.handleMove=y.proxy(this.handleMove,this),this.handleEnd=y.proxy(this.handleEnd,this),this.init();var c=this;this.$window.on("resize."+this.identifier,v(function(){w(function(){c.update()},300)},20)),this.$document.on(this.startEvent,"#"+this.identifier+":not(."+this.options.disabledClass+")",this.handleDown),this.$element.on("change."+this.identifier,function(f,e){if(!e||e.origin!==c.identifier){var h=f.target.value,g=c.getPositionFromValue(h);c.setPosition(g)}})}var p="rangeslider",o=0,n=x(),m={polyfill:!0,rangeClass:"rangeslider",disabledClass:"rangeslider--disabled",fillClass:"rangeslider__fill",handleClass:"rangeslider__handle",startEvent:["mousedown","touchstart","pointerdown"],moveEvent:["mousemove","touchmove","pointermove"],endEvent:["mouseup","touchend","pointerup"]};q.prototype.init=function(){this.onInit&&"function"==typeof this.onInit&&this.onInit(),this.update()},q.prototype.update=function(){this.handleWidth=r(this.$handle[0],"offsetWidth"),this.rangeWidth=r(this.$range[0],"offsetWidth"),this.maxHandleX=this.rangeWidth-this.handleWidth,this.grabX=this.handleWidth/2,this.position=this.getPositionFromValue(this.value),this.$element[0].disabled?this.$range.addClass(this.options.disabledClass):this.$range.removeClass(this.options.disabledClass),this.setPosition(this.position)},q.prototype.handleDown=function(f){if(f.preventDefault(),this.$document.on(this.moveEvent,this.handleMove),this.$document.on(this.endEvent,this.handleEnd),!((" "+f.target.className+" ").replace(/[\n\t]/g," ").indexOf(this.options.handleClass)>-1)){var e=this.getRelativePosition(f),h=this.$range[0].getBoundingClientRect().left,g=this.getPositionFromNode(this.$handle[0])-h;this.setPosition(e-this.grabX),e>=g&&e<g+this.handleWidth&&(this.grabX=e-g)}},q.prototype.handleMove=function(d){d.preventDefault();var c=this.getRelativePosition(d);this.setPosition(c-this.grabX)},q.prototype.handleEnd=function(b){b.preventDefault(),this.$document.off(this.moveEvent,this.handleMove),this.$document.off(this.endEvent,this.handleEnd),this.$element.trigger("change",{origin:this.identifier}),this.onSlideEnd&&"function"==typeof this.onSlideEnd&&this.onSlideEnd(this.position,this.value)},q.prototype.cap=function(e,d,f){return d>e?d:e>f?f:e},q.prototype.setPosition=function(e){var d,f;d=this.getValueFromPosition(this.cap(e,0,this.maxHandleX)),f=this.getPositionFromValue(d),this.$fill[0].style.width=f+this.grabX+"px",this.$handle[0].style.left=f+"px",this.setValue(d),this.position=f,this.value=d,this.onSlide&&"function"==typeof this.onSlide&&this.onSlide(f,d)},q.prototype.getPositionFromNode=function(d){for(var c=0;null!==d;){c+=d.offsetLeft,d=d.offsetParent}return c},q.prototype.getRelativePosition=function(e){var d=this.$range[0].getBoundingClientRect().left,f=0;return"undefined"!=typeof e.pageX?f=e.pageX:"undefined"!=typeof e.originalEvent.clientX?f=e.originalEvent.clientX:e.originalEvent.touches&&e.originalEvent.touches[0]&&"undefined"!=typeof e.originalEvent.touches[0].clientX?f=e.originalEvent.touches[0].clientX:e.currentPoint&&"undefined"!=typeof e.currentPoint.x&&(f=e.currentPoint.x),f-d},q.prototype.getPositionFromValue=function(e){var d,f;return d=(e-this.min)/(this.max-this.min),f=d*this.maxHandleX},q.prototype.getValueFromPosition=function(e){var d,f;return d=e/(this.maxHandleX||1),f=this.step*Math.round(d*(this.max-this.min)/this.step)+this.min,Number(f.toFixed(this.toFixed))},q.prototype.setValue=function(b){b!==this.value&&this.$element.val(b).trigger("input",{origin:this.identifier})},q.prototype.destroy=function(){this.$document.off("."+this.identifier),this.$window.off("."+this.identifier),this.$element.off("."+this.identifier).removeAttr("style").removeData("plugin_"+p),this.$range&&this.$range.length&&this.$range[0].parentNode.removeChild(this.$range[0])},y.fn[p]=function(a){var d=Array.prototype.slice.call(arguments,1);return this.each(function(){var c=y(this),b=c.data("plugin_"+p);b||c.data("plugin_"+p,b=new q(this,a)),"string"==typeof a&&b[a].apply(b,d)})}});(function(){var b=cmg.query;var a=cmg._;cmg.podcast||(cmg.podcast={});cmg.podcast.$dispatch=b({});cmg.podcast.podcast_players=[];cmg.podcast.podcast_players.loaded=b.Deferred();b.fn.PodcastPlayer=function(){a.each(this,function(c){cmg.podcast.podcast_players.push(new cmg.podcast.PodcastPlayer(b(c)))})};cmg.podcast.PodcastPlayer=function(c){this.initialize$el(c);this.initializeAudio(this.url);this.bindEventListeners();this.podcast_title=c.data("title");this.podcast_type=c.data("type")};cmg.podcast.PodcastPlayer.prototype.initialize$el=function(d){var c=b('<div class="time_indicator"><div class="done_indicator"><div class="dragger"></div></div><div class="time_text">00:00</div></div><div class="controls"><div class="play_button paused"></div><div class="volume_control"><input type="range" name="volume" min="0" max="100"></div></div>');a.extend(this,{$el:d,url:d.data("url")});this.$el.append(c);b("input[type=range]",this.$el).rangeslider({polyfill:false});a.extend(this,{time_indicator_width:b(".time_indicator",this.$el).width(),$done_indicator:b(".done_indicator",this.$el),$done_puller:b(".done_indicator .dragger",this.$el),$time_text:b(".time_text",this.$el),last_time:null,$divider:b(".time_text .divider",this.$el),$volume:b(".volume_control input",this.$el),$play_button:b(".play_button",this.$el)})};cmg.podcast.PodcastPlayer.prototype.initializeAudio=function(c){a.extend(this,{playing:false,stream_loaded:false,audio:new Audio(),stream_format:"audio/mpeg"});a.extend(this.audio,{src:c,preload:"none"});this.audio.volume=0.5;this.can_play=this.audio.canPlayType(this.stream_format)};cmg.podcast.PodcastPlayer.prototype.bindEventListeners=function(){this.audio.addEventListener("canplay",function(){this.stream_loaded=true;this.buttonShow(this.playing?"playing":"paused")}.bind(this));this.$play_button.on("click",function(){if(!this.can_play){this.showError("stream_format_error")}else{if(this.audio.networkState===0||this.audio.networkState===3){this.showError("stream_error")}else{this.pressPlay()}}}.bind(this));this.audio.addEventListener("timeupdate",this.timeUpdate.bind(this));this.$volume.on("input",this.volumeChange.bind(this));cmg.podcast.$dispatch.on("podcast_started",this.podcastStarted.bind(this))};cmg.podcast.PodcastPlayer.prototype.podcastStarted=function(d,c){if(this.playing&&c!==this){this.pause()}};cmg.podcast.PodcastPlayer.prototype.showError=function(c){console.error(c)};cmg.podcast.PodcastPlayer.prototype.timeUpdate=function(){var h=Math.round(this.audio.currentTime);var e=h/this.audio.duration;var f=Math.round(this.audio.duration)-h;var c=this.time_indicator_width*e;var g;var d;function i(j){function l(o){if(o<10){return"0"+o}else{return o}}var k=Math.floor(j/60);var m=Math.round(j%60);return l(k)+":"+l(m)}this.$done_indicator.width(Math.round(c));if(this.last_time!==i(h)){this.last_time=i(h);this.$time_text.text(i(h)+" / "+i(f))}d=this.$time_text.width()+(4.69*2);if(c+d>this.time_indicator_width){g=this.time_indicator_width-d}else{g=c}this.$time_text.css("left",Math.round(g))};cmg.podcast.PodcastPlayer.prototype.volumeChange=function(){var c=this.$volume.val()/100;this.audio.volume=c};cmg.podcast.PodcastPlayer.prototype.pressPlay=function(){if(this.playing){this.pause()}else{this.play()}};cmg.podcast.PodcastPlayer.prototype.play=function(){this.audio.play();b(this).trigger("podcast_play",b(".play_button",this.$el)[0]);this.audio.autobuffer||(this.audio.autobuffer=true);this.playing=true;this.buttonShow("playing");cmg.podcast.$dispatch.trigger("podcast_started",this)};cmg.podcast.PodcastPlayer.prototype.pause=function(){this.audio.pause();b(this).trigger("podcast_pause",b(".play_button",this.$el)[0]);this.playing=false;this.buttonShow("paused")};cmg.podcast.PodcastPlayer.prototype.buttonShow=function(d){var c=a.without(["playing","paused"],d);var e={playing:"Pause podcast",paused:"Play podcast"}[d];this.$play_button.addClass(d).removeClass(c.join(" ")).attr("alt",e).attr("title",e)}})();(function(){cmg.query(function(a){a(".cm_podcastPlayer").PodcastPlayer();cmg.podcast.podcast_players.loaded.resolve(true)})})();cmg.query(function(c){var b=cmg._;var a=s.pageName;cmg.podcast.podcast_players.loaded.done(function(){b.map(cmg.podcast.podcast_players,function(d){var g=d.podcast_title;var e=(g.toLowerCase()+"/").replace(/[\s\.]+/g,"-").replace(/[,!@#$%^&*()+=?<>]/g,"");var f=c(d);f.on("podcast_play",function(i,h){if(!flipper.is_active("DTMmetrics_Enable")){cmg.s_coxnews&&cmg.s_coxnews.utilities&&cmg.s_coxnews.utilities.track_event("1, event47",h,["eVar40","interactive_podcast_wired-site_play-podcast"],["pageName",a+e],["prop13",g],["prop16",s.prop16],["prop42",s.prop42],["prop43",s.prop43],["eVar13",g],["eVar16",s.prop16],["eVar42",s.prop42],["eVar43",s.prop43],"play wired inline podcast player")}else{if(cmg.DDO){cmg.DDO.action("siteEngagement",{site_element_name:"interactive-podcast:wired-site:play-podcast"})}}});f.on("podcast_pause",function(i,h){if(!flipper.is_active("DTMmetrics_Enable")){cmg.s_coxnews&&cmg.s_coxnews.utilities&&cmg.s_coxnews.utilities.track_event("1, event47",h,["eVar40","interactive_podcast_wired-site_pause-podcast"],["pageName",a+e],["prop13",g],["prop16",s.prop16],["prop42",s.prop42],["prop43",s.prop43],["eVar13",g],["eVar16",s.prop16],["eVar42",s.prop42],["eVar43",s.prop43],"pause wired inline podcast player")}else{if(cmg.DDO){cmg.DDO.action("siteEngagement",{site_element_name:"interactive-podcast:wired-site:pause-podcast"})}}})})})});