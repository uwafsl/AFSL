/*! Minified by Grunt - 2015-08-06 */
if(window["console"]===undefined){window.console={log:function(){}}}(function(e,t){function i(t,n){var r,i,o,u=t.nodeName.toLowerCase();return"area"===u?(r=t.parentNode,i=r.name,!t.href||!i||r.nodeName.toLowerCase()!=="map"?!1:(o=e("img[usemap=#"+i+"]")[0],!!o&&s(o))):(/input|select|textarea|button|object/.test(u)?!t.disabled:"a"===u?t.href||n:n)&&s(t)}function s(t){return e.expr.filters.visible(t)&&!e(t).parents().andSelf().filter(function(){return e.css(this,"visibility")==="hidden"}).length}var n=0,r=/^ui-id-\d+$/;e.ui=e.ui||{};if(e.ui.version)return;e.extend(e.ui,{version:"1.9.2",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),e.fn.extend({_focus:e.fn.focus,focus:function(t,n){return typeof t=="number"?this.each(function(){var r=this;setTimeout(function(){e(r).focus(),n&&n.call(r)},t)}):this._focus.apply(this,arguments)},scrollParent:function(){var t;return e.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?t=this.parents().filter(function(){return/(relative|absolute|fixed)/.test(e.css(this,"position"))&&/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0):t=this.parents().filter(function(){return/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!t.length?e(document):t},zIndex:function(n){if(n!==t)return this.css("zIndex",n);if(this.length){var r=e(this[0]),i,s;while(r.length&&r[0]!==document){i=r.css("position");if(i==="absolute"||i==="relative"||i==="fixed"){s=parseInt(r.css("zIndex"),10);if(!isNaN(s)&&s!==0)return s}r=r.parent()}}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++n)})},removeUniqueId:function(){return this.each(function(){r.test(this.id)&&e(this).removeAttr("id")})}}),e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(n){return!!e.data(n,t)}}):function(t,n,r){return!!e.data(t,r[3])},focusable:function(t){return i(t,!isNaN(e.attr(t,"tabindex")))},tabbable:function(t){var n=e.attr(t,"tabindex"),r=isNaN(n);return(r||n>=0)&&i(t,!r)}}),e(function(){var t=document.body,n=t.appendChild(n=document.createElement("div"));n.offsetHeight,e.extend(n.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0}),e.support.minHeight=n.offsetHeight===100,e.support.selectstart="onselectstart"in n,t.removeChild(n).style.display="none"}),e("<a>").outerWidth(1).jquery||e.each(["Width","Height"],function(n,r){function u(t,n,r,s){return e.each(i,function(){n-=parseFloat(e.css(t,"padding"+this))||0,r&&(n-=parseFloat(e.css(t,"border"+this+"Width"))||0),s&&(n-=parseFloat(e.css(t,"margin"+this))||0)}),n}var i=r==="Width"?["Left","Right"]:["Top","Bottom"],s=r.toLowerCase(),o={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+r]=function(n){return n===t?o["inner"+r].call(this):this.each(function(){e(this).css(s,u(this,n)+"px")})},e.fn["outer"+r]=function(t,n){return typeof t!="number"?o["outer"+r].call(this,t):this.each(function(){e(this).css(s,u(this,t,!0,n)+"px")})}}),e("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(e.fn.removeData=function(t){return function(n){return arguments.length?t.call(this,e.camelCase(n)):t.call(this)}}(e.fn.removeData)),function(){var t=/msie ([\w.]+)/.exec(navigator.userAgent.toLowerCase())||[];e.ui.ie=t.length?!0:!1,e.ui.ie6=parseFloat(t[1],10)===6}(),e.fn.extend({disableSelection:function(){return this.bind((e.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(e){e.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),e.extend(e.ui,{plugin:{add:function(t,n,r){var i,s=e.ui[t].prototype;for(i in r)s.plugins[i]=s.plugins[i]||[],s.plugins[i].push([n,r[i]])},call:function(e,t,n){var r,i=e.plugins[t];if(!i||!e.element[0].parentNode||e.element[0].parentNode.nodeType===11)return;for(r=0;r<i.length;r++)e.options[i[r][0]]&&i[r][1].apply(e.element,n)}},contains:e.contains,hasScroll:function(t,n){if(e(t).css("overflow")==="hidden")return!1;var r=n&&n==="left"?"scrollLeft":"scrollTop",i=!1;return t[r]>0?!0:(t[r]=1,i=t[r]>0,t[r]=0,i)},isOverAxis:function(e,t,n){return e>t&&e<t+n},isOver:function(t,n,r,i,s,o){return e.ui.isOverAxis(t,r,s)&&e.ui.isOverAxis(n,i,o)}})})(jQuery);(function(e,t){var n=0,r=Array.prototype.slice,i=e.cleanData;e.cleanData=function(t){for(var n=0,r;(r=t[n])!=null;n++)try{e(r).triggerHandler("remove")}catch(s){}i(t)},e.widget=function(t,n,r){var i,s,o,u,a=t.split(".")[0];t=t.split(".")[1],i=a+"-"+t,r||(r=n,n=e.Widget),e.expr[":"][i.toLowerCase()]=function(t){return!!e.data(t,i)},e[a]=e[a]||{},s=e[a][t],o=e[a][t]=function(e,t){if(!this._createWidget)return new o(e,t);arguments.length&&this._createWidget(e,t)},e.extend(o,s,{version:r.version,_proto:e.extend({},r),_childConstructors:[]}),u=new n,u.options=e.widget.extend({},u.options),e.each(r,function(t,i){e.isFunction(i)&&(r[t]=function(){var e=function(){return n.prototype[t].apply(this,arguments)},r=function(e){return n.prototype[t].apply(this,e)};return function(){var t=this._super,n=this._superApply,s;return this._super=e,this._superApply=r,s=i.apply(this,arguments),this._super=t,this._superApply=n,s}}())}),o.prototype=e.widget.extend(u,{widgetEventPrefix:s?u.widgetEventPrefix:t},r,{constructor:o,namespace:a,widgetName:t,widgetBaseClass:i,widgetFullName:i}),s?(e.each(s._childConstructors,function(t,n){var r=n.prototype;e.widget(r.namespace+"."+r.widgetName,o,n._proto)}),delete s._childConstructors):n._childConstructors.push(o),e.widget.bridge(t,o)},e.widget.extend=function(n){var i=r.call(arguments,1),s=0,o=i.length,u,a;for(;s<o;s++)for(u in i[s])a=i[s][u],i[s].hasOwnProperty(u)&&a!==t&&(e.isPlainObject(a)?n[u]=e.isPlainObject(n[u])?e.widget.extend({},n[u],a):e.widget.extend({},a):n[u]=a);return n},e.widget.bridge=function(n,i){var s=i.prototype.widgetFullName||n;e.fn[n]=function(o){var u=typeof o=="string",a=r.call(arguments,1),f=this;return o=!u&&a.length?e.widget.extend.apply(null,[o].concat(a)):o,u?this.each(function(){var r,i=e.data(this,s);if(!i)return e.error("cannot call methods on "+n+" prior to initialization; "+"attempted to call method '"+o+"'");if(!e.isFunction(i[o])||o.charAt(0)==="_")return e.error("no such method '"+o+"' for "+n+" widget instance");r=i[o].apply(i,a);if(r!==i&&r!==t)return f=r&&r.jquery?f.pushStack(r.get()):r,!1}):this.each(function(){var t=e.data(this,s);t?t.option(o||{})._init():e.data(this,s,new i(o,this))}),f}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,r){r=e(r||this.defaultElement||this)[0],this.element=e(r),this.uuid=n++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this.bindings=e(),this.hoverable=e(),this.focusable=e(),r!==this&&(e.data(r,this.widgetName,this),e.data(r,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===r&&this.destroy()}}),this.document=e(r.style?r.ownerDocument:r.document||r),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled "+"ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(n,r){var i=n,s,o,u;if(arguments.length===0)return e.widget.extend({},this.options);if(typeof n=="string"){i={},s=n.split("."),n=s.shift();if(s.length){o=i[n]=e.widget.extend({},this.options[n]);for(u=0;u<s.length-1;u++)o[s[u]]=o[s[u]]||{},o=o[s[u]];n=s.pop();if(r===t)return o[n]===t?null:o[n];o[n]=r}else{if(r===t)return this.options[n]===t?null:this.options[n];i[n]=r}}return this._setOptions(i),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,e==="disabled"&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!t).attr("aria-disabled",t),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(t,n,r){var i,s=this;typeof t!="boolean"&&(r=n,n=t,t=!1),r?(n=i=e(n),this.bindings=this.bindings.add(n)):(r=n,n=this.element,i=this.widget()),e.each(r,function(r,o){function u(){if(!t&&(s.options.disabled===!0||e(this).hasClass("ui-state-disabled")))return;return(typeof o=="string"?s[o]:o).apply(s,arguments)}typeof o!="string"&&(u.guid=o.guid=o.guid||u.guid||e.guid++);var a=r.match(/^(\w+)\s*(.*)$/),f=a[1]+s.eventNamespace,l=a[2];l?i.delegate(l,f,u):n.bind(f,u)})},_off:function(e,t){t=(t||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.unbind(t).undelegate(t)},_delay:function(e,t){function n(){return(typeof e=="string"?r[e]:e).apply(r,arguments)}var r=this;return setTimeout(n,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,n,r){var i,s,o=this.options[t];r=r||{},n=e.Event(n),n.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),n.target=this.element[0],s=n.originalEvent;if(s)for(i in s)i in n||(n[i]=s[i]);return this.element.trigger(n,r),!(e.isFunction(o)&&o.apply(this.element[0],[n].concat(r))===!1||n.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,n){e.Widget.prototype["_"+t]=function(r,i,s){typeof i=="string"&&(i={effect:i});var o,u=i?i===!0||typeof i=="number"?n:i.effect||n:t;i=i||{},typeof i=="number"&&(i={duration:i}),o=!e.isEmptyObject(i),i.complete=s,i.delay&&r.delay(i.delay),o&&e.effects&&(e.effects.effect[u]||e.uiBackCompat!==!1&&e.effects[u])?r[t](i):u!==t&&r[u]?r[u](i.duration,i.easing,s):r.queue(function(n){e(this)[t](),s&&s.call(r[0]),n()})}}),e.uiBackCompat!==!1&&(e.Widget.prototype._getCreateOptions=function(){return e.metadata&&e.metadata.get(this.element[0])[this.widgetName]})})(jQuery);(function(e,t){function h(e,t,n){return[parseInt(e[0],10)*(l.test(e[0])?t/100:1),parseInt(e[1],10)*(l.test(e[1])?n/100:1)]}function p(t,n){return parseInt(e.css(t,n),10)||0}e.ui=e.ui||{};var n,r=Math.max,i=Math.abs,s=Math.round,o=/left|center|right/,u=/top|center|bottom/,a=/[\+\-]\d+%?/,f=/^\w+/,l=/%$/,c=e.fn.position;e.position={scrollbarWidth:function(){if(n!==t)return n;var r,i,s=e("<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),o=s.children()[0];return e("body").append(s),r=o.offsetWidth,s.css("overflow","scroll"),i=o.offsetWidth,r===i&&(i=s[0].clientWidth),s.remove(),n=r-i},getScrollInfo:function(t){var n=t.isWindow?"":t.element.css("overflow-x"),r=t.isWindow?"":t.element.css("overflow-y"),i=n==="scroll"||n==="auto"&&t.width<t.element[0].scrollWidth,s=r==="scroll"||r==="auto"&&t.height<t.element[0].scrollHeight;return{width:i?e.position.scrollbarWidth():0,height:s?e.position.scrollbarWidth():0}},getWithinInfo:function(t){var n=e(t||window),r=e.isWindow(n[0]);return{element:n,isWindow:r,offset:n.offset()||{left:0,top:0},scrollLeft:n.scrollLeft(),scrollTop:n.scrollTop(),width:r?n.width():n.outerWidth(),height:r?n.height():n.outerHeight()}}},e.fn.position=function(t){if(!t||!t.of)return c.apply(this,arguments);t=e.extend({},t);var n,l,d,v,m,g=e(t.of),y=e.position.getWithinInfo(t.within),b=e.position.getScrollInfo(y),w=g[0],E=(t.collision||"flip").split(" "),S={};return w.nodeType===9?(l=g.width(),d=g.height(),v={top:0,left:0}):e.isWindow(w)?(l=g.width(),d=g.height(),v={top:g.scrollTop(),left:g.scrollLeft()}):w.preventDefault?(t.at="left top",l=d=0,v={top:w.pageY,left:w.pageX}):(l=g.outerWidth(),d=g.outerHeight(),v=g.offset()),m=e.extend({},v),e.each(["my","at"],function(){var e=(t[this]||"").split(" "),n,r;e.length===1&&(e=o.test(e[0])?e.concat(["center"]):u.test(e[0])?["center"].concat(e):["center","center"]),e[0]=o.test(e[0])?e[0]:"center",e[1]=u.test(e[1])?e[1]:"center",n=a.exec(e[0]),r=a.exec(e[1]),S[this]=[n?n[0]:0,r?r[0]:0],t[this]=[f.exec(e[0])[0],f.exec(e[1])[0]]}),E.length===1&&(E[1]=E[0]),t.at[0]==="right"?m.left+=l:t.at[0]==="center"&&(m.left+=l/2),t.at[1]==="bottom"?m.top+=d:t.at[1]==="center"&&(m.top+=d/2),n=h(S.at,l,d),m.left+=n[0],m.top+=n[1],this.each(function(){var o,u,a=e(this),f=a.outerWidth(),c=a.outerHeight(),w=p(this,"marginLeft"),x=p(this,"marginTop"),T=f+w+p(this,"marginRight")+b.width,N=c+x+p(this,"marginBottom")+b.height,C=e.extend({},m),k=h(S.my,a.outerWidth(),a.outerHeight());t.my[0]==="right"?C.left-=f:t.my[0]==="center"&&(C.left-=f/2),t.my[1]==="bottom"?C.top-=c:t.my[1]==="center"&&(C.top-=c/2),C.left+=k[0],C.top+=k[1],e.support.offsetFractions||(C.left=s(C.left),C.top=s(C.top)),o={marginLeft:w,marginTop:x},e.each(["left","top"],function(r,i){e.ui.position[E[r]]&&e.ui.position[E[r]][i](C,{targetWidth:l,targetHeight:d,elemWidth:f,elemHeight:c,collisionPosition:o,collisionWidth:T,collisionHeight:N,offset:[n[0]+k[0],n[1]+k[1]],my:t.my,at:t.at,within:y,elem:a})}),e.fn.bgiframe&&a.bgiframe(),t.using&&(u=function(e){var n=v.left-C.left,s=n+l-f,o=v.top-C.top,u=o+d-c,h={target:{element:g,left:v.left,top:v.top,width:l,height:d},element:{element:a,left:C.left,top:C.top,width:f,height:c},horizontal:s<0?"left":n>0?"right":"center",vertical:u<0?"top":o>0?"bottom":"middle"};l<f&&i(n+s)<l&&(h.horizontal="center"),d<c&&i(o+u)<d&&(h.vertical="middle"),r(i(n),i(s))>r(i(o),i(u))?h.important="horizontal":h.important="vertical",t.using.call(this,e,h)}),a.offset(e.extend(C,{using:u}))})},e.ui.position={fit:{left:function(e,t){var n=t.within,i=n.isWindow?n.scrollLeft:n.offset.left,s=n.width,o=e.left-t.collisionPosition.marginLeft,u=i-o,a=o+t.collisionWidth-s-i,f;t.collisionWidth>s?u>0&&a<=0?(f=e.left+u+t.collisionWidth-s-i,e.left+=u-f):a>0&&u<=0?e.left=i:u>a?e.left=i+s-t.collisionWidth:e.left=i:u>0?e.left+=u:a>0?e.left-=a:e.left=r(e.left-o,e.left)},top:function(e,t){var n=t.within,i=n.isWindow?n.scrollTop:n.offset.top,s=t.within.height,o=e.top-t.collisionPosition.marginTop,u=i-o,a=o+t.collisionHeight-s-i,f;t.collisionHeight>s?u>0&&a<=0?(f=e.top+u+t.collisionHeight-s-i,e.top+=u-f):a>0&&u<=0?e.top=i:u>a?e.top=i+s-t.collisionHeight:e.top=i:u>0?e.top+=u:a>0?e.top-=a:e.top=r(e.top-o,e.top)}},flip:{left:function(e,t){var n=t.within,r=n.offset.left+n.scrollLeft,s=n.width,o=n.isWindow?n.scrollLeft:n.offset.left,u=e.left-t.collisionPosition.marginLeft,a=u-o,f=u+t.collisionWidth-s-o,l=t.my[0]==="left"?-t.elemWidth:t.my[0]==="right"?t.elemWidth:0,c=t.at[0]==="left"?t.targetWidth:t.at[0]==="right"?-t.targetWidth:0,h=-2*t.offset[0],p,d;if(a<0){p=e.left+l+c+h+t.collisionWidth-s-r;if(p<0||p<i(a))e.left+=l+c+h}else if(f>0){d=e.left-t.collisionPosition.marginLeft+l+c+h-o;if(d>0||i(d)<f)e.left+=l+c+h}},top:function(e,t){var n=t.within,r=n.offset.top+n.scrollTop,s=n.height,o=n.isWindow?n.scrollTop:n.offset.top,u=e.top-t.collisionPosition.marginTop,a=u-o,f=u+t.collisionHeight-s-o,l=t.my[1]==="top",c=l?-t.elemHeight:t.my[1]==="bottom"?t.elemHeight:0,h=t.at[1]==="top"?t.targetHeight:t.at[1]==="bottom"?-t.targetHeight:0,p=-2*t.offset[1],d,v;a<0?(v=e.top+c+h+p+t.collisionHeight-s-r,e.top+c+h+p>a&&(v<0||v<i(a))&&(e.top+=c+h+p)):f>0&&(d=e.top-t.collisionPosition.marginTop+c+h+p-o,e.top+c+h+p>f&&(d>0||i(d)<f)&&(e.top+=c+h+p))}},flipfit:{left:function(){e.ui.position.flip.left.apply(this,arguments),e.ui.position.fit.left.apply(this,arguments)},top:function(){e.ui.position.flip.top.apply(this,arguments),e.ui.position.fit.top.apply(this,arguments)}}},function(){var t,n,r,i,s,o=document.getElementsByTagName("body")[0],u=document.createElement("div");t=document.createElement(o?"div":"body"),r={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},o&&e.extend(r,{position:"absolute",left:"-1000px",top:"-1000px"});for(s in r)t.style[s]=r[s];t.appendChild(u),n=o||document.documentElement,n.insertBefore(t,n.firstChild),u.style.cssText="position: absolute; left: 10.7432222px;",i=e(u).offset().left,e.support.offsetFractions=i>10&&i<11,t.innerHTML="",n.removeChild(t)}(),e.uiBackCompat!==!1&&function(e){var n=e.fn.position;e.fn.position=function(r){if(!r||!r.offset)return n.call(this,r);var i=r.offset.split(" "),s=r.at.split(" ");return i.length===1&&(i[1]=i[0]),/^\d/.test(i[0])&&(i[0]="+"+i[0]),/^\d/.test(i[1])&&(i[1]="+"+i[1]),s.length===1&&(/left|center|right/.test(s[0])?s[1]="center":(s[1]=s[0],s[0]="center")),n.call(this,e.extend(r,{at:s[0]+i[0]+" "+s[1]+i[1],offset:t}))}}(jQuery)})(jQuery);(function(e,t){var n="ui-dialog ui-widget ui-widget-content ui-corner-all ",r={buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},i={maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0};e.widget("ui.dialog",{version:"1.9.2",options:{autoOpen:!0,buttons:{},closeOnEscape:!0,closeText:"close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:!1,maxWidth:!1,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(t){var n=e(this).css(t).offset().top;n<0&&e(this).css("top",t.top-n)}},resizable:!0,show:null,stack:!0,title:"",width:300,zIndex:1e3},_create:function(){this.originalTitle=this.element.attr("title"),typeof this.originalTitle!="string"&&(this.originalTitle=""),this.oldPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.options.title=this.options.title||this.originalTitle;var t=this,r=this.options,i=r.title||"&#160;",s,o,u,a,f;s=(this.uiDialog=e("<div>")).addClass(n+r.dialogClass).css({display:"none",outline:0,zIndex:r.zIndex}).attr("tabIndex",-1).keydown(function(n){r.closeOnEscape&&!n.isDefaultPrevented()&&n.keyCode&&n.keyCode===e.ui.keyCode.ESCAPE&&(t.close(n),n.preventDefault())}).mousedown(function(e){t.moveToTop(!1,e)}).appendTo("body"),this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(s),o=(this.uiDialogTitlebar=e("<div>")).addClass("ui-dialog-titlebar  ui-widget-header  ui-corner-all  ui-helper-clearfix").bind("mousedown",function(){s.focus()}).prependTo(s),u=e("<a href='#'></a>").addClass("ui-dialog-titlebar-close  ui-corner-all").attr("role","button").click(function(e){e.preventDefault(),t.close(e)}).appendTo(o),(this.uiDialogTitlebarCloseText=e("<span>")).addClass("ui-icon ui-icon-closethick").text(r.closeText).appendTo(u),a=e("<span>").uniqueId().addClass("ui-dialog-title").html(i).prependTo(o),f=(this.uiDialogButtonPane=e("<div>")).addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),(this.uiButtonSet=e("<div>")).addClass("ui-dialog-buttonset").appendTo(f),s.attr({role:"dialog","aria-labelledby":a.attr("id")}),o.find("*").add(o).disableSelection(),this._hoverable(u),this._focusable(u),r.draggable&&e.fn.draggable&&this._makeDraggable(),r.resizable&&e.fn.resizable&&this._makeResizable(),this._createButtons(r.buttons),this._isOpen=!1,e.fn.bgiframe&&s.bgiframe(),this._on(s,{keydown:function(t){if(!r.modal||t.keyCode!==e.ui.keyCode.TAB)return;var n=e(":tabbable",s),i=n.filter(":first"),o=n.filter(":last");if(t.target===o[0]&&!t.shiftKey)return i.focus(1),!1;if(t.target===i[0]&&t.shiftKey)return o.focus(1),!1}})},_init:function(){this.options.autoOpen&&this.open()},_destroy:function(){var e,t=this.oldPosition;this.overlay&&this.overlay.destroy(),this.uiDialog.hide(),this.element.removeClass("ui-dialog-content ui-widget-content").hide().appendTo("body"),this.uiDialog.remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),e=t.parent.children().eq(t.index),e.length&&e[0]!==this.element[0]?e.before(this.element):t.parent.append(this.element)},widget:function(){return this.uiDialog},close:function(t){var n=this,r,i;if(!this._isOpen)return;if(!1===this._trigger("beforeClose",t))return;return this._isOpen=!1,this.overlay&&this.overlay.destroy(),this.options.hide?this._hide(this.uiDialog,this.options.hide,function(){n._trigger("close",t)}):(this.uiDialog.hide(),this._trigger("close",t)),e.ui.dialog.overlay.resize(),this.options.modal&&(r=0,e(".ui-dialog").each(function(){this!==n.uiDialog[0]&&(i=e(this).css("z-index"),isNaN(i)||(r=Math.max(r,i)))}),e.ui.dialog.maxZ=r),this},isOpen:function(){return this._isOpen},moveToTop:function(t,n){var r=this.options,i;return r.modal&&!t||!r.stack&&!r.modal?this._trigger("focus",n):(r.zIndex>e.ui.dialog.maxZ&&(e.ui.dialog.maxZ=r.zIndex),this.overlay&&(e.ui.dialog.maxZ+=1,e.ui.dialog.overlay.maxZ=e.ui.dialog.maxZ,this.overlay.$el.css("z-index",e.ui.dialog.overlay.maxZ)),i={scrollTop:this.element.scrollTop(),scrollLeft:this.element.scrollLeft()},e.ui.dialog.maxZ+=1,this.uiDialog.css("z-index",e.ui.dialog.maxZ),this.element.attr(i),this._trigger("focus",n),this)},open:function(){if(this._isOpen)return;var t,n=this.options,r=this.uiDialog;return this._size(),this._position(n.position),r.show(n.show),this.overlay=n.modal?new e.ui.dialog.overlay(this):null,this.moveToTop(!0),t=this.element.find(":tabbable"),t.length||(t=this.uiDialogButtonPane.find(":tabbable"),t.length||(t=r)),t.eq(0).focus(),this._isOpen=!0,this._trigger("open"),this},_createButtons:function(t){var n=this,r=!1;this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),typeof t=="object"&&t!==null&&e.each(t,function(){return!(r=!0)}),r?(e.each(t,function(t,r){var i,s;r=e.isFunction(r)?{click:r,text:t}:r,r=e.extend({type:"button"},r),s=r.click,r.click=function(){s.apply(n.element[0],arguments)},i=e("<button></button>",r).appendTo(n.uiButtonSet),e.fn.button&&i.button()}),this.uiDialog.addClass("ui-dialog-buttons"),this.uiDialogButtonPane.appendTo(this.uiDialog)):this.uiDialog.removeClass("ui-dialog-buttons")},_makeDraggable:function(){function r(e){return{position:e.position,offset:e.offset}}var t=this,n=this.options;this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(n,i){e(this).addClass("ui-dialog-dragging"),t._trigger("dragStart",n,r(i))},drag:function(e,n){t._trigger("drag",e,r(n))},stop:function(i,s){n.position=[s.position.left-t.document.scrollLeft(),s.position.top-t.document.scrollTop()],e(this).removeClass("ui-dialog-dragging"),t._trigger("dragStop",i,r(s)),e.ui.dialog.overlay.resize()}})},_makeResizable:function(n){function u(e){return{originalPosition:e.originalPosition,originalSize:e.originalSize,position:e.position,size:e.size}}n=n===t?this.options.resizable:n;var r=this,i=this.options,s=this.uiDialog.css("position"),o=typeof n=="string"?n:"n,e,s,w,se,sw,ne,nw";this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:i.maxWidth,maxHeight:i.maxHeight,minWidth:i.minWidth,minHeight:this._minHeight(),handles:o,start:function(t,n){e(this).addClass("ui-dialog-resizing"),r._trigger("resizeStart",t,u(n))},resize:function(e,t){r._trigger("resize",e,u(t))},stop:function(t,n){e(this).removeClass("ui-dialog-resizing"),i.height=e(this).height(),i.width=e(this).width(),r._trigger("resizeStop",t,u(n)),e.ui.dialog.overlay.resize()}}).css("position",s).find(".ui-resizable-se").addClass("ui-icon ui-icon-grip-diagonal-se")},_minHeight:function(){var e=this.options;return e.height==="auto"?e.minHeight:Math.min(e.minHeight,e.height)},_position:function(t){var n=[],r=[0,0],i;if(t){if(typeof t=="string"||typeof t=="object"&&"0"in t)n=t.split?t.split(" "):[t[0],t[1]],n.length===1&&(n[1]=n[0]),e.each(["left","top"],function(e,t){+n[e]===n[e]&&(r[e]=n[e],n[e]=t)}),t={my:n[0]+(r[0]<0?r[0]:"+"+r[0])+" "+n[1]+(r[1]<0?r[1]:"+"+r[1]),at:n.join(" ")};t=e.extend({},e.ui.dialog.prototype.options.position,t)}else t=e.ui.dialog.prototype.options.position;i=this.uiDialog.is(":visible"),i||this.uiDialog.show(),this.uiDialog.position(t),i||this.uiDialog.hide()},_setOptions:function(t){var n=this,s={},o=!1;e.each(t,function(e,t){n._setOption(e,t),e in r&&(o=!0),e in i&&(s[e]=t)}),o&&this._size(),this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option",s)},_setOption:function(t,r){var i,s,o=this.uiDialog;switch(t){case"buttons":this._createButtons(r);break;case"closeText":this.uiDialogTitlebarCloseText.text(""+r);break;case"dialogClass":o.removeClass(this.options.dialogClass).addClass(n+r);break;case"disabled":r?o.addClass("ui-dialog-disabled"):o.removeClass("ui-dialog-disabled");break;case"draggable":i=o.is(":data(draggable)"),i&&!r&&o.draggable("destroy"),!i&&r&&this._makeDraggable();break;case"position":this._position(r);break;case"resizable":s=o.is(":data(resizable)"),s&&!r&&o.resizable("destroy"),s&&typeof r=="string"&&o.resizable("option","handles",r),!s&&r!==!1&&this._makeResizable(r);break;case"title":e(".ui-dialog-title",this.uiDialogTitlebar).html(""+(r||"&#160;"))}this._super(t,r)},_size:function(){var t,n,r,i=this.options,s=this.uiDialog.is(":visible");this.element.show().css({width:"auto",minHeight:0,height:0}),i.minWidth>i.width&&(i.width=i.minWidth),t=this.uiDialog.css({height:"auto",width:i.width}).outerHeight(),n=Math.max(0,i.minHeight-t),i.height==="auto"?e.support.minHeight?this.element.css({minHeight:n,height:"auto"}):(this.uiDialog.show(),r=this.element.css("height","auto").height(),s||this.uiDialog.hide(),this.element.height(Math.max(r,n))):this.element.height(Math.max(i.height-t,0)),this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())}}),e.extend(e.ui.dialog,{uuid:0,maxZ:0,getTitleId:function(e){var t=e.attr("id");return t||(this.uuid+=1,t=this.uuid),"ui-dialog-title-"+t},overlay:function(t){this.$el=e.ui.dialog.overlay.create(t)}}),e.extend(e.ui.dialog.overlay,{instances:[],oldInstances:[],maxZ:0,events:e.map("focus,mousedown,mouseup,keydown,keypress,click".split(","),function(e){return e+".dialog-overlay"}).join(" "),create:function(t){this.instances.length===0&&(setTimeout(function(){e.ui.dialog.overlay.instances.length&&e(document).bind(e.ui.dialog.overlay.events,function(t){if(e(t.target).zIndex()<e.ui.dialog.overlay.maxZ)return!1})},1),e(window).bind("resize.dialog-overlay",e.ui.dialog.overlay.resize));var n=this.oldInstances.pop()||e("<div>").addClass("ui-widget-overlay");return e(document).bind("keydown.dialog-overlay",function(r){var i=e.ui.dialog.overlay.instances;i.length!==0&&i[i.length-1]===n&&t.options.closeOnEscape&&!r.isDefaultPrevented()&&r.keyCode&&r.keyCode===e.ui.keyCode.ESCAPE&&(t.close(r),r.preventDefault())}),n.appendTo(document.body).css({width:this.width(),height:this.height()}),e.fn.bgiframe&&n.bgiframe(),this.instances.push(n),n},destroy:function(t){var n=e.inArray(t,this.instances),r=0;n!==-1&&this.oldInstances.push(this.instances.splice(n,1)[0]),this.instances.length===0&&e([document,window]).unbind(".dialog-overlay"),t.height(0).width(0).remove(),e.each(this.instances,function(){r=Math.max(r,this.css("z-index"))}),this.maxZ=r},height:function(){var t,n;return e.ui.ie?(t=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight),n=Math.max(document.documentElement.offsetHeight,document.body.offsetHeight),t<n?e(window).height()+"px":t+"px"):e(document).height()+"px"},width:function(){var t,n;return e.ui.ie?(t=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth),n=Math.max(document.documentElement.offsetWidth,document.body.offsetWidth),t<n?e(window).width()+"px":t+"px"):e(document).width()+"px"},resize:function(){var t=e([]);e.each(e.ui.dialog.overlay.instances,function(){t=t.add(this)}),t.css({width:0,height:0}).css({width:e.ui.dialog.overlay.width(),height:e.ui.dialog.overlay.height()})}}),e.extend(e.ui.dialog.overlay.prototype,{destroy:function(){e.ui.dialog.overlay.destroy(this.$el)}})})(jQuery);(function($,undefined){function Datepicker(){this.debug=!1,this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},$.extend(this._defaults,this.regional[""]),this.dpDiv=bindHover($('<div id="'+this._mainDivId+'" class="ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>'))}function bindHover(e){var t="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return e.delegate(t,"mouseout",function(){$(this).removeClass("ui-state-hover"),this.className.indexOf("ui-datepicker-prev")!=-1&&$(this).removeClass("ui-datepicker-prev-hover"),this.className.indexOf("ui-datepicker-next")!=-1&&$(this).removeClass("ui-datepicker-next-hover")}).delegate(t,"mouseover",function(){$.datepicker._isDisabledDatepicker(instActive.inline?e.parent()[0]:instActive.input[0])||($(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),$(this).addClass("ui-state-hover"),this.className.indexOf("ui-datepicker-prev")!=-1&&$(this).addClass("ui-datepicker-prev-hover"),this.className.indexOf("ui-datepicker-next")!=-1&&$(this).addClass("ui-datepicker-next-hover"))})}function extendRemove(e,t){$.extend(e,t);for(var n in t)if(t[n]==null||t[n]==undefined)e[n]=t[n];return e}$.extend($.ui,{datepicker:{version:"1.9.2"}});var PROP_NAME="datepicker",dpuuid=(new Date).getTime(),instActive;$.extend(Datepicker.prototype,{markerClassName:"hasDatepicker",maxRows:4,log:function(){this.debug&&console.log.apply("",arguments)},_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(e){return extendRemove(this._defaults,e||{}),this
},_attachDatepicker:function(target,settings){var inlineSettings=null;for(var attrName in this._defaults){var attrValue=target.getAttribute("date:"+attrName);if(attrValue){inlineSettings=inlineSettings||{};try{inlineSettings[attrName]=eval(attrValue)}catch(err){inlineSettings[attrName]=attrValue}}}var nodeName=target.nodeName.toLowerCase(),inline=nodeName=="div"||nodeName=="span";target.id||(this.uuid+=1,target.id="dp"+this.uuid);var inst=this._newInst($(target),inline);inst.settings=$.extend({},settings||{},inlineSettings||{}),nodeName=="input"?this._connectDatepicker(target,inst):inline&&this._inlineDatepicker(target,inst)},_newInst:function(e,t){var n=e[0].id.replace(/([^A-Za-z0-9_-])/g,"\\\\$1");return{id:n,input:e,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:t,dpDiv:t?bindHover($('<div class="'+this._inlineClass+' ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>')):this.dpDiv}},_connectDatepicker:function(e,t){var n=$(e);t.append=$([]),t.trigger=$([]);if(n.hasClass(this.markerClassName))return;this._attachments(n,t),n.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp).bind("setData.datepicker",function(e,n,r){t.settings[n]=r}).bind("getData.datepicker",function(e,n){return this._get(t,n)}),this._autoSize(t),$.data(e,PROP_NAME,t),t.settings.disabled&&this._disableDatepicker(e)},_attachments:function(e,t){var n=this._get(t,"appendText"),r=this._get(t,"isRTL");t.append&&t.append.remove(),n&&(t.append=$('<span class="'+this._appendClass+'">'+n+"</span>"),e[r?"before":"after"](t.append)),e.unbind("focus",this._showDatepicker),t.trigger&&t.trigger.remove();var i=this._get(t,"showOn");(i=="focus"||i=="both")&&e.focus(this._showDatepicker);if(i=="button"||i=="both"){var s=this._get(t,"buttonText"),o=this._get(t,"buttonImage");t.trigger=$(this._get(t,"buttonImageOnly")?$("<img/>").addClass(this._triggerClass).attr({src:o,alt:s,title:s}):$('<button type="button"></button>').addClass(this._triggerClass).html(o==""?s:$("<img/>").attr({src:o,alt:s,title:s}))),e[r?"before":"after"](t.trigger),t.trigger.click(function(){return $.datepicker._datepickerShowing&&$.datepicker._lastInput==e[0]?$.datepicker._hideDatepicker():$.datepicker._datepickerShowing&&$.datepicker._lastInput!=e[0]?($.datepicker._hideDatepicker(),$.datepicker._showDatepicker(e[0])):$.datepicker._showDatepicker(e[0]),!1})}},_autoSize:function(e){if(this._get(e,"autoSize")&&!e.inline){var t=new Date(2009,11,20),n=this._get(e,"dateFormat");if(n.match(/[DM]/)){var r=function(e){var t=0,n=0;for(var r=0;r<e.length;r++)e[r].length>t&&(t=e[r].length,n=r);return n};t.setMonth(r(this._get(e,n.match(/MM/)?"monthNames":"monthNamesShort"))),t.setDate(r(this._get(e,n.match(/DD/)?"dayNames":"dayNamesShort"))+20-t.getDay())}e.input.attr("size",this._formatDate(e,t).length)}},_inlineDatepicker:function(e,t){var n=$(e);if(n.hasClass(this.markerClassName))return;n.addClass(this.markerClassName).append(t.dpDiv).bind("setData.datepicker",function(e,n,r){t.settings[n]=r}).bind("getData.datepicker",function(e,n){return this._get(t,n)}),$.data(e,PROP_NAME,t),this._setDate(t,this._getDefaultDate(t),!0),this._updateDatepicker(t),this._updateAlternate(t),t.settings.disabled&&this._disableDatepicker(e),t.dpDiv.css("display","block")},_dialogDatepicker:function(e,t,n,r,i){var s=this._dialogInst;if(!s){this.uuid+=1;var o="dp"+this.uuid;this._dialogInput=$('<input type="text" id="'+o+'" style="position: absolute; top: -100px; width: 0px;"/>'),this._dialogInput.keydown(this._doKeyDown),$("body").append(this._dialogInput),s=this._dialogInst=this._newInst(this._dialogInput,!1),s.settings={},$.data(this._dialogInput[0],PROP_NAME,s)}extendRemove(s.settings,r||{}),t=t&&t.constructor==Date?this._formatDate(s,t):t,this._dialogInput.val(t),this._pos=i?i.length?i:[i.pageX,i.pageY]:null;if(!this._pos){var u=document.documentElement.clientWidth,a=document.documentElement.clientHeight,f=document.documentElement.scrollLeft||document.body.scrollLeft,l=document.documentElement.scrollTop||document.body.scrollTop;this._pos=[u/2-100+f,a/2-150+l]}return this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),s.settings.onSelect=n,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),$.blockUI&&$.blockUI(this.dpDiv),$.data(this._dialogInput[0],PROP_NAME,s),this},_destroyDatepicker:function(e){var t=$(e),n=$.data(e,PROP_NAME);if(!t.hasClass(this.markerClassName))return;var r=e.nodeName.toLowerCase();$.removeData(e,PROP_NAME),r=="input"?(n.append.remove(),n.trigger.remove(),t.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):(r=="div"||r=="span")&&t.removeClass(this.markerClassName).empty()},_enableDatepicker:function(e){var t=$(e),n=$.data(e,PROP_NAME);if(!t.hasClass(this.markerClassName))return;var r=e.nodeName.toLowerCase();if(r=="input")e.disabled=!1,n.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""});else if(r=="div"||r=="span"){var i=t.children("."+this._inlineClass);i.children().removeClass("ui-state-disabled"),i.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)}this._disabledInputs=$.map(this._disabledInputs,function(t){return t==e?null:t})},_disableDatepicker:function(e){var t=$(e),n=$.data(e,PROP_NAME);if(!t.hasClass(this.markerClassName))return;var r=e.nodeName.toLowerCase();if(r=="input")e.disabled=!0,n.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"});else if(r=="div"||r=="span"){var i=t.children("."+this._inlineClass);i.children().addClass("ui-state-disabled"),i.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)}this._disabledInputs=$.map(this._disabledInputs,function(t){return t==e?null:t}),this._disabledInputs[this._disabledInputs.length]=e},_isDisabledDatepicker:function(e){if(!e)return!1;for(var t=0;t<this._disabledInputs.length;t++)if(this._disabledInputs[t]==e)return!0;return!1},_getInst:function(e){try{return $.data(e,PROP_NAME)}catch(t){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(e,t,n){var r=this._getInst(e);if(arguments.length==2&&typeof t=="string")return t=="defaults"?$.extend({},$.datepicker._defaults):r?t=="all"?$.extend({},r.settings):this._get(r,t):null;var i=t||{};typeof t=="string"&&(i={},i[t]=n);if(r){this._curInst==r&&this._hideDatepicker();var s=this._getDateDatepicker(e,!0),o=this._getMinMaxDate(r,"min"),u=this._getMinMaxDate(r,"max");extendRemove(r.settings,i),o!==null&&i.dateFormat!==undefined&&i.minDate===undefined&&(r.settings.minDate=this._formatDate(r,o)),u!==null&&i.dateFormat!==undefined&&i.maxDate===undefined&&(r.settings.maxDate=this._formatDate(r,u)),this._attachments($(e),r),this._autoSize(r),this._setDate(r,s),this._updateAlternate(r),this._updateDatepicker(r)}},_changeDatepicker:function(e,t,n){this._optionDatepicker(e,t,n)},_refreshDatepicker:function(e){var t=this._getInst(e);t&&this._updateDatepicker(t)},_setDateDatepicker:function(e,t){var n=this._getInst(e);n&&(this._setDate(n,t),this._updateDatepicker(n),this._updateAlternate(n))},_getDateDatepicker:function(e,t){var n=this._getInst(e);return n&&!n.inline&&this._setDateFromField(n,t),n?this._getDate(n):null},_doKeyDown:function(e){var t=$.datepicker._getInst(e.target),n=!0,r=t.dpDiv.is(".ui-datepicker-rtl");t._keyEvent=!0;if($.datepicker._datepickerShowing)switch(e.keyCode){case 9:$.datepicker._hideDatepicker(),n=!1;break;case 13:var i=$("td."+$.datepicker._dayOverClass+":not(."+$.datepicker._currentClass+")",t.dpDiv);i[0]&&$.datepicker._selectDay(e.target,t.selectedMonth,t.selectedYear,i[0]);var s=$.datepicker._get(t,"onSelect");if(s){var o=$.datepicker._formatDate(t);s.apply(t.input?t.input[0]:null,[o,t])}else $.datepicker._hideDatepicker();return!1;case 27:$.datepicker._hideDatepicker();break;case 33:$.datepicker._adjustDate(e.target,e.ctrlKey?-$.datepicker._get(t,"stepBigMonths"):-$.datepicker._get(t,"stepMonths"),"M");break;case 34:$.datepicker._adjustDate(e.target,e.ctrlKey?+$.datepicker._get(t,"stepBigMonths"):+$.datepicker._get(t,"stepMonths"),"M");break;case 35:(e.ctrlKey||e.metaKey)&&$.datepicker._clearDate(e.target),n=e.ctrlKey||e.metaKey;break;case 36:(e.ctrlKey||e.metaKey)&&$.datepicker._gotoToday(e.target),n=e.ctrlKey||e.metaKey;break;case 37:(e.ctrlKey||e.metaKey)&&$.datepicker._adjustDate(e.target,r?1:-1,"D"),n=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&$.datepicker._adjustDate(e.target,e.ctrlKey?-$.datepicker._get(t,"stepBigMonths"):-$.datepicker._get(t,"stepMonths"),"M");break;case 38:(e.ctrlKey||e.metaKey)&&$.datepicker._adjustDate(e.target,-7,"D"),n=e.ctrlKey||e.metaKey;break;case 39:(e.ctrlKey||e.metaKey)&&$.datepicker._adjustDate(e.target,r?-1:1,"D"),n=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&$.datepicker._adjustDate(e.target,e.ctrlKey?+$.datepicker._get(t,"stepBigMonths"):+$.datepicker._get(t,"stepMonths"),"M");break;case 40:(e.ctrlKey||e.metaKey)&&$.datepicker._adjustDate(e.target,7,"D"),n=e.ctrlKey||e.metaKey;break;default:n=!1}else e.keyCode==36&&e.ctrlKey?$.datepicker._showDatepicker(this):n=!1;n&&(e.preventDefault(),e.stopPropagation())},_doKeyPress:function(e){var t=$.datepicker._getInst(e.target);if($.datepicker._get(t,"constrainInput")){var n=$.datepicker._possibleChars($.datepicker._get(t,"dateFormat")),r=String.fromCharCode(e.charCode==undefined?e.keyCode:e.charCode);return e.ctrlKey||e.metaKey||r<" "||!n||n.indexOf(r)>-1}},_doKeyUp:function(e){var t=$.datepicker._getInst(e.target);if(t.input.val()!=t.lastVal)try{var n=$.datepicker.parseDate($.datepicker._get(t,"dateFormat"),t.input?t.input.val():null,$.datepicker._getFormatConfig(t));n&&($.datepicker._setDateFromField(t),$.datepicker._updateAlternate(t),$.datepicker._updateDatepicker(t))}catch(r){$.datepicker.log(r)}return!0},_showDatepicker:function(e){e=e.target||e,e.nodeName.toLowerCase()!="input"&&(e=$("input",e.parentNode)[0]);if($.datepicker._isDisabledDatepicker(e)||$.datepicker._lastInput==e)return;var t=$.datepicker._getInst(e);$.datepicker._curInst&&$.datepicker._curInst!=t&&($.datepicker._curInst.dpDiv.stop(!0,!0),t&&$.datepicker._datepickerShowing&&$.datepicker._hideDatepicker($.datepicker._curInst.input[0]));var n=$.datepicker._get(t,"beforeShow"),r=n?n.apply(e,[e,t]):{};if(r===!1)return;extendRemove(t.settings,r),t.lastVal=null,$.datepicker._lastInput=e,$.datepicker._setDateFromField(t),$.datepicker._inDialog&&(e.value=""),$.datepicker._pos||($.datepicker._pos=$.datepicker._findPos(e),$.datepicker._pos[1]+=e.offsetHeight);var i=!1;$(e).parents().each(function(){return i|=$(this).css("position")=="fixed",!i});var s={left:$.datepicker._pos[0],top:$.datepicker._pos[1]};$.datepicker._pos=null,t.dpDiv.empty(),t.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),$.datepicker._updateDatepicker(t),s=$.datepicker._checkOffset(t,s,i),t.dpDiv.css({position:$.datepicker._inDialog&&$.blockUI?"static":i?"fixed":"absolute",display:"none",left:s.left+"px",top:s.top+"px"});if(!t.inline){var o=$.datepicker._get(t,"showAnim"),u=$.datepicker._get(t,"duration"),a=function(){var e=t.dpDiv.find("iframe.ui-datepicker-cover");if(!!e.length){var n=$.datepicker._getBorders(t.dpDiv);e.css({left:-n[0],top:-n[1],width:t.dpDiv.outerWidth(),height:t.dpDiv.outerHeight()})}};t.dpDiv.zIndex($(e).zIndex()+1),$.datepicker._datepickerShowing=!0,$.effects&&($.effects.effect[o]||$.effects[o])?t.dpDiv.show(o,$.datepicker._get(t,"showOptions"),u,a):t.dpDiv[o||"show"](o?u:null,a),(!o||!u)&&a(),t.input.is(":visible")&&!t.input.is(":disabled")&&t.input.focus(),$.datepicker._curInst=t}},_updateDatepicker:function(e){this.maxRows=4;var t=$.datepicker._getBorders(e.dpDiv);instActive=e,e.dpDiv.empty().append(this._generateHTML(e)),this._attachHandlers(e);var n=e.dpDiv.find("iframe.ui-datepicker-cover");!n.length||n.css({left:-t[0],top:-t[1],width:e.dpDiv.outerWidth(),height:e.dpDiv.outerHeight()}),e.dpDiv.find("."+this._dayOverClass+" a").mouseover();var r=this._getNumberOfMonths(e),i=r[1],s=17;e.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),i>1&&e.dpDiv.addClass("ui-datepicker-multi-"+i).css("width",s*i+"em"),e.dpDiv[(r[0]!=1||r[1]!=1?"add":"remove")+"Class"]("ui-datepicker-multi"),e.dpDiv[(this._get(e,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),e==$.datepicker._curInst&&$.datepicker._datepickerShowing&&e.input&&e.input.is(":visible")&&!e.input.is(":disabled")&&e.input[0]!=document.activeElement&&e.input.focus();if(e.yearshtml){var o=e.yearshtml;setTimeout(function(){o===e.yearshtml&&e.yearshtml&&e.dpDiv.find("select.ui-datepicker-year:first").replaceWith(e.yearshtml),o=e.yearshtml=null},0)}},_getBorders:function(e){var t=function(e){return{thin:1,medium:2,thick:3}[e]||e};return[parseFloat(t(e.css("border-left-width"))),parseFloat(t(e.css("border-top-width")))]},_checkOffset:function(e,t,n){var r=e.dpDiv.outerWidth(),i=e.dpDiv.outerHeight(),s=e.input?e.input.outerWidth():0,o=e.input?e.input.outerHeight():0,u=document.documentElement.clientWidth+(n?0:$(document).scrollLeft()),a=document.documentElement.clientHeight+(n?0:$(document).scrollTop());return t.left-=this._get(e,"isRTL")?r-s:0,t.left-=n&&t.left==e.input.offset().left?$(document).scrollLeft():0,t.top-=n&&t.top==e.input.offset().top+o?$(document).scrollTop():0,t.left-=Math.min(t.left,t.left+r>u&&u>r?Math.abs(t.left+r-u):0),t.top-=Math.min(t.top,t.top+i>a&&a>i?Math.abs(i+o):0),t},_findPos:function(e){var t=this._getInst(e),n=this._get(t,"isRTL");while(e&&(e.type=="hidden"||e.nodeType!=1||$.expr.filters.hidden(e)))e=e[n?"previousSibling":"nextSibling"];var r=$(e).offset();return[r.left,r.top]},_hideDatepicker:function(e){var t=this._curInst;if(!t||e&&t!=$.data(e,PROP_NAME))return;if(this._datepickerShowing){var n=this._get(t,"showAnim"),r=this._get(t,"duration"),i=function(){$.datepicker._tidyDialog(t)};$.effects&&($.effects.effect[n]||$.effects[n])?t.dpDiv.hide(n,$.datepicker._get(t,"showOptions"),r,i):t.dpDiv[n=="slideDown"?"slideUp":n=="fadeIn"?"fadeOut":"hide"](n?r:null,i),n||i(),this._datepickerShowing=!1;var s=this._get(t,"onClose");s&&s.apply(t.input?t.input[0]:null,[t.input?t.input.val():"",t]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),$.blockUI&&($.unblockUI(),$("body").append(this.dpDiv))),this._inDialog=!1}},_tidyDialog:function(e){e.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(e){if(!$.datepicker._curInst)return;var t=$(e.target),n=$.datepicker._getInst(t[0]);(t[0].id!=$.datepicker._mainDivId&&t.parents("#"+$.datepicker._mainDivId).length==0&&!t.hasClass($.datepicker.markerClassName)&&!t.closest("."+$.datepicker._triggerClass).length&&$.datepicker._datepickerShowing&&(!$.datepicker._inDialog||!$.blockUI)||t.hasClass($.datepicker.markerClassName)&&$.datepicker._curInst!=n)&&$.datepicker._hideDatepicker()},_adjustDate:function(e,t,n){var r=$(e),i=this._getInst(r[0]);if(this._isDisabledDatepicker(r[0]))return;this._adjustInstDate(i,t+(n=="M"?this._get(i,"showCurrentAtPos"):0),n),this._updateDatepicker(i)},_gotoToday:function(e){var t=$(e),n=this._getInst(t[0]);if(this._get(n,"gotoCurrent")&&n.currentDay)n.selectedDay=n.currentDay,n.drawMonth=n.selectedMonth=n.currentMonth,n.drawYear=n.selectedYear=n.currentYear;else{var r=new Date;n.selectedDay=r.getDate(),n.drawMonth=n.selectedMonth=r.getMonth(),n.drawYear=n.selectedYear=r.getFullYear()}this._notifyChange(n),this._adjustDate(t)},_selectMonthYear:function(e,t,n){var r=$(e),i=this._getInst(r[0]);i["selected"+(n=="M"?"Month":"Year")]=i["draw"+(n=="M"?"Month":"Year")]=parseInt(t.options[t.selectedIndex].value,10),this._notifyChange(i),this._adjustDate(r)},_selectDay:function(e,t,n,r){var i=$(e);if($(r).hasClass(this._unselectableClass)||this._isDisabledDatepicker(i[0]))return;var s=this._getInst(i[0]);s.selectedDay=s.currentDay=$("a",r).html(),s.selectedMonth=s.currentMonth=t,s.selectedYear=s.currentYear=n,this._selectDate(e,this._formatDate(s,s.currentDay,s.currentMonth,s.currentYear))},_clearDate:function(e){var t=$(e),n=this._getInst(t[0]);this._selectDate(t,"")},_selectDate:function(e,t){var n=$(e),r=this._getInst(n[0]);t=t!=null?t:this._formatDate(r),r.input&&r.input.val(t),this._updateAlternate(r);var i=this._get(r,"onSelect");i?i.apply(r.input?r.input[0]:null,[t,r]):r.input&&r.input.trigger("change"),r.inline?this._updateDatepicker(r):(this._hideDatepicker(),this._lastInput=r.input[0],typeof r.input[0]!="object"&&r.input.focus(),this._lastInput=null)},_updateAlternate:function(e){var t=this._get(e,"altField");if(t){var n=this._get(e,"altFormat")||this._get(e,"dateFormat"),r=this._getDate(e),i=this.formatDate(n,r,this._getFormatConfig(e));$(t).each(function(){$(this).val(i)})}},noWeekends:function(e){var t=e.getDay();return[t>0&&t<6,""]},iso8601Week:function(e){var t=new Date(e.getTime());t.setDate(t.getDate()+4-(t.getDay()||7));var n=t.getTime();return t.setMonth(0),t.setDate(1),Math.floor(Math.round((n-t)/864e5)/7)+1},parseDate:function(e,t,n){if(e==null||t==null)throw"Invalid arguments";t=typeof t=="object"?t.toString():t+"";if(t=="")return null;var r=(n?n.shortYearCutoff:null)||this._defaults.shortYearCutoff;r=typeof r!="string"?r:(new Date).getFullYear()%100+parseInt(r,10);var i=(n?n.dayNamesShort:null)||this._defaults.dayNamesShort,s=(n?n.dayNames:null)||this._defaults.dayNames,o=(n?n.monthNamesShort:null)||this._defaults.monthNamesShort,u=(n?n.monthNames:null)||this._defaults.monthNames,a=-1,f=-1,l=-1,c=-1,h=!1,p=function(t){var n=y+1<e.length&&e.charAt(y+1)==t;return n&&y++,n},d=function(e){var n=p(e),r=e=="@"?14:e=="!"?20:e=="y"&&n?4:e=="o"?3:2,i=new RegExp("^\\d{1,"+r+"}"),s=t.substring(g).match(i);if(!s)throw"Missing number at position "+g;return g+=s[0].length,parseInt(s[0],10)},v=function(e,n,r){var i=$.map(p(e)?r:n,function(e,t){return[[t,e]]}).sort(function(e,t){return-(e[1].length-t[1].length)}),s=-1;$.each(i,function(e,n){var r=n[1];if(t.substr(g,r.length).toLowerCase()==r.toLowerCase())return s=n[0],g+=r.length,!1});if(s!=-1)return s+1;throw"Unknown name at position "+g},m=function(){if(t.charAt(g)!=e.charAt(y))throw"Unexpected literal at position "+g;g++},g=0;for(var y=0;y<e.length;y++)if(h)e.charAt(y)=="'"&&!p("'")?h=!1:m();else switch(e.charAt(y)){case"d":l=d("d");break;case"D":v("D",i,s);break;case"o":c=d("o");break;case"m":f=d("m");break;case"M":f=v("M",o,u);break;case"y":a=d("y");break;case"@":var b=new Date(d("@"));a=b.getFullYear(),f=b.getMonth()+1,l=b.getDate();break;case"!":var b=new Date((d("!")-this._ticksTo1970)/1e4);a=b.getFullYear(),f=b.getMonth()+1,l=b.getDate();break;case"'":p("'")?m():h=!0;break;default:m()}if(g<t.length){var w=t.substr(g);if(!/^\s+/.test(w))throw"Extra/unparsed characters found in date: "+w}a==-1?a=(new Date).getFullYear():a<100&&(a+=(new Date).getFullYear()-(new Date).getFullYear()%100+(a<=r?0:-100));if(c>-1){f=1,l=c;do{var E=this._getDaysInMonth(a,f-1);if(l<=E)break;f++,l-=E}while(!0)}var b=this._daylightSavingAdjust(new Date(a,f-1,l));if(b.getFullYear()!=a||b.getMonth()+1!=f||b.getDate()!=l)throw"Invalid date";return b},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*24*60*60*1e7,formatDate:function(e,t,n){if(!t)return"";var r=(n?n.dayNamesShort:null)||this._defaults.dayNamesShort,i=(n?n.dayNames:null)||this._defaults.dayNames,s=(n?n.monthNamesShort:null)||this._defaults.monthNamesShort,o=(n?n.monthNames:null)||this._defaults.monthNames,u=function(t){var n=h+1<e.length&&e.charAt(h+1)==t;return n&&h++,n},a=function(e,t,n){var r=""+t;if(u(e))while(r.length<n)r="0"+r;return r},f=function(e,t,n,r){return u(e)?r[t]:n[t]},l="",c=!1;if(t)for(var h=0;h<e.length;h++)if(c)e.charAt(h)=="'"&&!u("'")?c=!1:l+=e.charAt(h);else switch(e.charAt(h)){case"d":l+=a("d",t.getDate(),2);break;case"D":l+=f("D",t.getDay(),r,i);break;case"o":l+=a("o",Math.round((new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime()-new Date(t.getFullYear(),0,0).getTime())/864e5),3);break;case"m":l+=a("m",t.getMonth()+1,2);break;case"M":l+=f("M",t.getMonth(),s,o);break;case"y":l+=u("y")?t.getFullYear():(t.getYear()%100<10?"0":"")+t.getYear()%100;break;case"@":l+=t.getTime();break;case"!":l+=t.getTime()*1e4+this._ticksTo1970;break;case"'":u("'")?l+="'":c=!0;break;default:l+=e.charAt(h)}return l},_possibleChars:function(e){var t="",n=!1,r=function(t){var n=i+1<e.length&&e.charAt(i+1)==t;return n&&i++,n};for(var i=0;i<e.length;i++)if(n)e.charAt(i)=="'"&&!r("'")?n=!1:t+=e.charAt(i);else switch(e.charAt(i)){case"d":case"m":case"y":case"@":t+="0123456789";break;case"D":case"M":return null;case"'":r("'")?t+="'":n=!0;break;default:t+=e.charAt(i)}return t},_get:function(e,t){return e.settings[t]!==undefined?e.settings[t]:this._defaults[t]},_setDateFromField:function(e,t){if(e.input.val()==e.lastVal)return;var n=this._get(e,"dateFormat"),r=e.lastVal=e.input?e.input.val():null,i,s;i=s=this._getDefaultDate(e);var o=this._getFormatConfig(e);try{i=this.parseDate(n,r,o)||s}catch(u){this.log(u),r=t?"":r}e.selectedDay=i.getDate(),e.drawMonth=e.selectedMonth=i.getMonth(),e.drawYear=e.selectedYear=i.getFullYear(),e.currentDay=r?i.getDate():0,e.currentMonth=r?i.getMonth():0,e.currentYear=r?i.getFullYear():0,this._adjustInstDate(e)},_getDefaultDate:function(e){return this._restrictMinMax(e,this._determineDate(e,this._get(e,"defaultDate"),new Date))},_determineDate:function(e,t,n){var r=function(e){var t=new Date;return t.setDate(t.getDate()+e),t},i=function(t){try{return $.datepicker.parseDate($.datepicker._get(e,"dateFormat"),t,$.datepicker._getFormatConfig(e))}catch(n){}var r=(t.toLowerCase().match(/^c/)?$.datepicker._getDate(e):null)||new Date,i=r.getFullYear(),s=r.getMonth(),o=r.getDate(),u=/([+-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,a=u.exec(t);while(a){switch(a[2]||"d"){case"d":case"D":o+=parseInt(a[1],10);break;case"w":case"W":o+=parseInt(a[1],10)*7;break;case"m":case"M":s+=parseInt(a[1],10),o=Math.min(o,$.datepicker._getDaysInMonth(i,s));break;case"y":case"Y":i+=parseInt(a[1],10),o=Math.min(o,$.datepicker._getDaysInMonth(i,s))}a=u.exec(t)}return new Date(i,s,o)},s=t==null||t===""?n:typeof t=="string"?i(t):typeof t=="number"?isNaN(t)?n:r(t):new Date(t.getTime());return s=s&&s.toString()=="Invalid Date"?n:s,s&&(s.setHours(0),s.setMinutes(0),s.setSeconds(0),s.setMilliseconds(0)),this._daylightSavingAdjust(s)},_daylightSavingAdjust:function(e){return e?(e.setHours(e.getHours()>12?e.getHours()+2:0),e):null},_setDate:function(e,t,n){var r=!t,i=e.selectedMonth,s=e.selectedYear,o=this._restrictMinMax(e,this._determineDate(e,t,new Date));e.selectedDay=e.currentDay=o.getDate(),e.drawMonth=e.selectedMonth=e.currentMonth=o.getMonth(),e.drawYear=e.selectedYear=e.currentYear=o.getFullYear(),(i!=e.selectedMonth||s!=e.selectedYear)&&!n&&this._notifyChange(e),this._adjustInstDate(e),e.input&&e.input.val(r?"":this._formatDate(e))},_getDate:function(e){var t=!e.currentYear||e.input&&e.input.val()==""?null:this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return t},_attachHandlers:function(e){var t=this._get(e,"stepMonths"),n="#"+e.id.replace(/\\\\/g,"\\");e.dpDiv.find("[data-handler]").map(function(){var e={prev:function(){window["DP_jQuery_"+dpuuid].datepicker._adjustDate(n,-t,"M")},next:function(){window["DP_jQuery_"+dpuuid].datepicker._adjustDate(n,+t,"M")},hide:function(){window["DP_jQuery_"+dpuuid].datepicker._hideDatepicker()},today:function(){window["DP_jQuery_"+dpuuid].datepicker._gotoToday(n)},selectDay:function(){return window["DP_jQuery_"+dpuuid].datepicker._selectDay(n,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return window["DP_jQuery_"+dpuuid].datepicker._selectMonthYear(n,this,"M"),!1},selectYear:function(){return window["DP_jQuery_"+dpuuid].datepicker._selectMonthYear(n,this,"Y"),!1}};$(this).bind(this.getAttribute("data-event"),e[this.getAttribute("data-handler")])})},_generateHTML:function(e){var t=new Date;t=this._daylightSavingAdjust(new Date(t.getFullYear(),t.getMonth(),t.getDate()));var n=this._get(e,"isRTL"),r=this._get(e,"showButtonPanel"),i=this._get(e,"hideIfNoPrevNext"),s=this._get(e,"navigationAsDateFormat"),o=this._getNumberOfMonths(e),u=this._get(e,"showCurrentAtPos"),a=this._get(e,"stepMonths"),f=o[0]!=1||o[1]!=1,l=this._daylightSavingAdjust(e.currentDay?new Date(e.currentYear,e.currentMonth,e.currentDay):new Date(9999,9,9)),c=this._getMinMaxDate(e,"min"),h=this._getMinMaxDate(e,"max"),p=e.drawMonth-u,d=e.drawYear;p<0&&(p+=12,d--);if(h){var v=this._daylightSavingAdjust(new Date(h.getFullYear(),h.getMonth()-o[0]*o[1]+1,h.getDate()));v=c&&v<c?c:v;while(this._daylightSavingAdjust(new Date(d,p,1))>v)p--,p<0&&(p=11,d--)}e.drawMonth=p,e.drawYear=d;var m=this._get(e,"prevText");m=s?this.formatDate(m,this._daylightSavingAdjust(new Date(d,p-a,1)),this._getFormatConfig(e)):m;var g=this._canAdjustMonth(e,-1,d,p)?'<a class="ui-datepicker-prev ui-corner-all" data-handler="prev" data-event="click" title="'+m+'"><span class="ui-icon ui-icon-circle-triangle-'+(n?"e":"w")+'">'+m+"</span></a>":i?"":'<a class="ui-datepicker-prev ui-corner-all ui-state-disabled" title="'+m+'"><span class="ui-icon ui-icon-circle-triangle-'+(n?"e":"w")+'">'+m+"</span></a>",y=this._get(e,"nextText");y=s?this.formatDate(y,this._daylightSavingAdjust(new Date(d,p+a,1)),this._getFormatConfig(e)):y;var b=this._canAdjustMonth(e,1,d,p)?'<a class="ui-datepicker-next ui-corner-all" data-handler="next" data-event="click" title="'+y+'"><span class="ui-icon ui-icon-circle-triangle-'+(n?"w":"e")+'">'+y+"</span></a>":i?"":'<a class="ui-datepicker-next ui-corner-all ui-state-disabled" title="'+y+'"><span class="ui-icon ui-icon-circle-triangle-'+(n?"w":"e")+'">'+y+"</span></a>",w=this._get(e,"currentText"),E=this._get(e,"gotoCurrent")&&e.currentDay?l:t;w=s?this.formatDate(w,E,this._getFormatConfig(e)):w;var S=e.inline?"":'<button type="button" class="ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all" data-handler="hide" data-event="click">'+this._get(e,"closeText")+"</button>",x=r?'<div class="ui-datepicker-buttonpane ui-widget-content">'+(n?S:"")+(this._isInRange(e,E)?'<button type="button" class="ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all" data-handler="today" data-event="click">'+w+"</button>":"")+(n?"":S)+"</div>":"",T=parseInt(this._get(e,"firstDay"),10);T=isNaN(T)?0:T;var N=this._get(e,"showWeek"),C=this._get(e,"dayNames"),k=this._get(e,"dayNamesShort"),L=this._get(e,"dayNamesMin"),A=this._get(e,"monthNames"),O=this._get(e,"monthNamesShort"),M=this._get(e,"beforeShowDay"),_=this._get(e,"showOtherMonths"),D=this._get(e,"selectOtherMonths"),P=this._get(e,"calculateWeek")||this.iso8601Week,H=this._getDefaultDate(e),B="";for(var j=0;j<o[0];j++){var F="";this.maxRows=4;for(var I=0;I<o[1];I++){var q=this._daylightSavingAdjust(new Date(d,p,e.selectedDay)),R=" ui-corner-all",U="";if(f){U+='<div class="ui-datepicker-group';if(o[1]>1)switch(I){case 0:U+=" ui-datepicker-group-first",R=" ui-corner-"+(n?"right":"left");break;case o[1]-1:U+=" ui-datepicker-group-last",R=" ui-corner-"+(n?"left":"right");break;default:U+=" ui-datepicker-group-middle",R=""}U+='">'}U+='<div class="ui-datepicker-header ui-widget-header ui-helper-clearfix'+R+'">'+(/all|left/.test(R)&&j==0?n?b:g:"")+(/all|right/.test(R)&&j==0?n?g:b:"")+this._generateMonthYearHeader(e,p,d,c,h,j>0||I>0,A,O)+'</div><table class="ui-datepicker-calendar"><thead>'+"<tr>";var z=N?'<th class="ui-datepicker-week-col">'+this._get(e,"weekHeader")+"</th>":"";for(var W=0;W<7;W++){var X=(W+T)%7;z+="<th"+((W+T+6)%7>=5?' class="ui-datepicker-week-end"':"")+">"+'<span title="'+C[X]+'">'+L[X]+"</span></th>"}U+=z+"</tr></thead><tbody>";var V=this._getDaysInMonth(d,p);d==e.selectedYear&&p==e.selectedMonth&&(e.selectedDay=Math.min(e.selectedDay,V));var J=(this._getFirstDayOfMonth(d,p)-T+7)%7,K=Math.ceil((J+V)/7),Q=f?this.maxRows>K?this.maxRows:K:K;this.maxRows=Q;var G=this._daylightSavingAdjust(new Date(d,p,1-J));for(var Y=0;Y<Q;Y++){U+="<tr>";var Z=N?'<td class="ui-datepicker-week-col">'+this._get(e,"calculateWeek")(G)+"</td>":"";for(var W=0;W<7;W++){var et=M?M.apply(e.input?e.input[0]:null,[G]):[!0,""],tt=G.getMonth()!=p,nt=tt&&!D||!et[0]||c&&G<c||h&&G>h;Z+='<td class="'+((W+T+6)%7>=5?" ui-datepicker-week-end":"")+(tt?" ui-datepicker-other-month":"")+(G.getTime()==q.getTime()&&p==e.selectedMonth&&e._keyEvent||H.getTime()==G.getTime()&&H.getTime()==q.getTime()?" "+this._dayOverClass:"")+(nt?" "+this._unselectableClass+" ui-state-disabled":"")+(tt&&!_?"":" "+et[1]+(G.getTime()==l.getTime()?" "+this._currentClass:"")+(G.getTime()==t.getTime()?" ui-datepicker-today":""))+'"'+((!tt||_)&&et[2]?' title="'+et[2]+'"':"")+(nt?"":' data-handler="selectDay" data-event="click" data-month="'+G.getMonth()+'" data-year="'+G.getFullYear()+'"')+">"+(tt&&!_?"&#xa0;":nt?'<span class="ui-state-default">'+G.getDate()+"</span>":'<a class="ui-state-default'+(G.getTime()==t.getTime()?" ui-state-highlight":"")+(G.getTime()==l.getTime()?" ui-state-active":"")+(tt?" ui-priority-secondary":"")+'" href="#">'+G.getDate()+"</a>")+"</td>",G.setDate(G.getDate()+1),G=this._daylightSavingAdjust(G)}U+=Z+"</tr>"}p++,p>11&&(p=0,d++),U+="</tbody></table>"+(f?"</div>"+(o[0]>0&&I==o[1]-1?'<div class="ui-datepicker-row-break"></div>':""):""),F+=U}B+=F}return B+=x+($.ui.ie6&&!e.inline?'<iframe src="javascript:false;" class="ui-datepicker-cover" frameborder="0"></iframe>':""),e._keyEvent=!1,B},_generateMonthYearHeader:function(e,t,n,r,i,s,o,u){var a=this._get(e,"changeMonth"),f=this._get(e,"changeYear"),l=this._get(e,"showMonthAfterYear"),c='<div class="ui-datepicker-title">',h="";if(s||!a)h+='<span class="ui-datepicker-month">'+o[t]+"</span>";else{var p=r&&r.getFullYear()==n,d=i&&i.getFullYear()==n;h+='<select class="ui-datepicker-month" data-handler="selectMonth" data-event="change">';for(var v=0;v<12;v++)(!p||v>=r.getMonth())&&(!d||v<=i.getMonth())&&(h+='<option value="'+v+'"'+(v==t?' selected="selected"':"")+">"+u[v]+"</option>");h+="</select>"}l||(c+=h+(s||!a||!f?"&#xa0;":""));if(!e.yearshtml){e.yearshtml="";if(s||!f)c+='<span class="ui-datepicker-year">'+n+"</span>";else{var m=this._get(e,"yearRange").split(":"),g=(new Date).getFullYear(),y=function(e){var t=e.match(/c[+-].*/)?n+parseInt(e.substring(1),10):e.match(/[+-].*/)?g+parseInt(e,10):parseInt(e,10);return isNaN(t)?g:t},b=y(m[0]),w=Math.max(b,y(m[1]||""));b=r?Math.max(b,r.getFullYear()):b,w=i?Math.min(w,i.getFullYear()):w,e.yearshtml+='<select class="ui-datepicker-year" data-handler="selectYear" data-event="change">';for(;b<=w;b++)e.yearshtml+='<option value="'+b+'"'+(b==n?' selected="selected"':"")+">"+b+"</option>";e.yearshtml+="</select>",c+=e.yearshtml,e.yearshtml=null}}return c+=this._get(e,"yearSuffix"),l&&(c+=(s||!a||!f?"&#xa0;":"")+h),c+="</div>",c},_adjustInstDate:function(e,t,n){var r=e.drawYear+(n=="Y"?t:0),i=e.drawMonth+(n=="M"?t:0),s=Math.min(e.selectedDay,this._getDaysInMonth(r,i))+(n=="D"?t:0),o=this._restrictMinMax(e,this._daylightSavingAdjust(new Date(r,i,s)));e.selectedDay=o.getDate(),e.drawMonth=e.selectedMonth=o.getMonth(),e.drawYear=e.selectedYear=o.getFullYear(),(n=="M"||n=="Y")&&this._notifyChange(e)},_restrictMinMax:function(e,t){var n=this._getMinMaxDate(e,"min"),r=this._getMinMaxDate(e,"max"),i=n&&t<n?n:t;return i=r&&i>r?r:i,i},_notifyChange:function(e){var t=this._get(e,"onChangeMonthYear");t&&t.apply(e.input?e.input[0]:null,[e.selectedYear,e.selectedMonth+1,e])},_getNumberOfMonths:function(e){var t=this._get(e,"numberOfMonths");return t==null?[1,1]:typeof t=="number"?[1,t]:t},_getMinMaxDate:function(e,t){return this._determineDate(e,this._get(e,t+"Date"),null)
},_getDaysInMonth:function(e,t){return 32-this._daylightSavingAdjust(new Date(e,t,32)).getDate()},_getFirstDayOfMonth:function(e,t){return new Date(e,t,1).getDay()},_canAdjustMonth:function(e,t,n,r){var i=this._getNumberOfMonths(e),s=this._daylightSavingAdjust(new Date(n,r+(t<0?t:i[0]*i[1]),1));return t<0&&s.setDate(this._getDaysInMonth(s.getFullYear(),s.getMonth())),this._isInRange(e,s)},_isInRange:function(e,t){var n=this._getMinMaxDate(e,"min"),r=this._getMinMaxDate(e,"max");return(!n||t.getTime()>=n.getTime())&&(!r||t.getTime()<=r.getTime())},_getFormatConfig:function(e){var t=this._get(e,"shortYearCutoff");return t=typeof t!="string"?t:(new Date).getFullYear()%100+parseInt(t,10),{shortYearCutoff:t,dayNamesShort:this._get(e,"dayNamesShort"),dayNames:this._get(e,"dayNames"),monthNamesShort:this._get(e,"monthNamesShort"),monthNames:this._get(e,"monthNames")}},_formatDate:function(e,t,n,r){t||(e.currentDay=e.selectedDay,e.currentMonth=e.selectedMonth,e.currentYear=e.selectedYear);var i=t?typeof t=="object"?t:this._daylightSavingAdjust(new Date(r,n,t)):this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return this.formatDate(this._get(e,"dateFormat"),i,this._getFormatConfig(e))}}),$.fn.datepicker=function(e){if(!this.length)return this;$.datepicker.initialized||($(document).mousedown($.datepicker._checkExternalClick).find(document.body).append($.datepicker.dpDiv),$.datepicker.initialized=!0);var t=Array.prototype.slice.call(arguments,1);return typeof e!="string"||e!="isDisabled"&&e!="getDate"&&e!="widget"?e=="option"&&arguments.length==2&&typeof arguments[1]=="string"?$.datepicker["_"+e+"Datepicker"].apply($.datepicker,[this[0]].concat(t)):this.each(function(){typeof e=="string"?$.datepicker["_"+e+"Datepicker"].apply($.datepicker,[this].concat(t)):$.datepicker._attachDatepicker(this,e)}):$.datepicker["_"+e+"Datepicker"].apply($.datepicker,[this[0]].concat(t))},$.datepicker=new Datepicker,$.datepicker.initialized=!1,$.datepicker.uuid=(new Date).getTime(),$.datepicker.version="1.9.2",window["DP_jQuery_"+dpuuid]=$})(jQuery);(function(e){e.fn.hoverIntent=function(t,n,r){var i={interval:100,sensitivity:7,timeout:0};if(typeof t==="object"){i=e.extend(i,t)}else if(e.isFunction(n)){i=e.extend(i,{over:t,out:n,selector:r})}else{i=e.extend(i,{over:t,out:t,selector:n})}var s,o,u,a;var f=function(e){s=e.pageX;o=e.pageY};var l=function(t,n){n.hoverIntent_t=clearTimeout(n.hoverIntent_t);if(Math.abs(u-s)+Math.abs(a-o)<i.sensitivity){e(n).off("mousemove.hoverIntent",f);n.hoverIntent_s=1;return i.over.apply(n,[t])}else{u=s;a=o;n.hoverIntent_t=setTimeout(function(){l(t,n)},i.interval)}};var c=function(e,t){t.hoverIntent_t=clearTimeout(t.hoverIntent_t);t.hoverIntent_s=0;return i.out.apply(t,[e])};var h=function(t){var n=jQuery.extend({},t);var r=this;if(r.hoverIntent_t){r.hoverIntent_t=clearTimeout(r.hoverIntent_t)}if(t.type=="mouseenter"){u=n.pageX;a=n.pageY;e(r).on("mousemove.hoverIntent",f);if(r.hoverIntent_s!=1){r.hoverIntent_t=setTimeout(function(){l(n,r)},i.interval)}}else{e(r).off("mousemove.hoverIntent",f);if(r.hoverIntent_s==1){r.hoverIntent_t=setTimeout(function(){c(n,r)},i.timeout)}}};return this.on({"mouseenter.hoverIntent":h,"mouseleave.hoverIntent":h},i.selector)}})(jQuery);if(typeof deconcept=="undefined"){var deconcept=new Object}if(typeof deconcept.util=="undefined"){deconcept.util=new Object}if(typeof deconcept.SWFObjectUtil=="undefined"){deconcept.SWFObjectUtil=new Object}deconcept.SWFObject=function(_1,id,w,h,_5,c,_7,_8,_9,_a){if(!document.getElementById){return}this.DETECT_KEY=_a?_a:"detectflash";this.skipDetect=deconcept.util.getRequestParameter(this.DETECT_KEY);this.params=new Object;this.variables=new Object;this.attributes=new Array;if(_1){this.setAttribute("swf",_1)}if(id){this.setAttribute("id",id)}if(w){this.setAttribute("width",w)}if(h){this.setAttribute("height",h)}if(_5){this.setAttribute("version",new deconcept.PlayerVersion(_5.toString().split(".")))}this.installedVer=deconcept.SWFObjectUtil.getPlayerVersion();if(!window.opera&&document.all&&this.installedVer.major>7){deconcept.SWFObject.doPrepUnload=true}if(c){this.addParam("bgcolor",c)}var q=_7?_7:"high";this.addParam("quality",q);this.setAttribute("useExpressInstall",false);this.setAttribute("doExpressInstall",false);var _c=_8?_8:window.location;this.setAttribute("xiRedirectUrl",_c);this.setAttribute("redirectUrl","");if(_9){this.setAttribute("redirectUrl",_9)}};deconcept.SWFObject.prototype={useExpressInstall:function(_d){this.xiSWFPath=!_d?"expressinstall.swf":_d;this.setAttribute("useExpressInstall",true)},setAttribute:function(_e,_f){this.attributes[_e]=_f},getAttribute:function(_10){return this.attributes[_10]},addParam:function(_11,_12){this.params[_11]=_12},getParams:function(){return this.params},addVariable:function(_13,_14){this.variables[_13]=_14},getVariable:function(_15){return this.variables[_15]},getVariables:function(){return this.variables},getVariablePairs:function(){var _16=new Array;var key;var _18=this.getVariables();for(key in _18){_16[_16.length]=key+"="+_18[key]}return _16},getSWFHTML:function(){var _19="";if(navigator.plugins&&navigator.mimeTypes&&navigator.mimeTypes.length){if(this.getAttribute("doExpressInstall")){this.addVariable("MMplayerType","PlugIn");this.setAttribute("swf",this.xiSWFPath)}_19='<embed type="application/x-shockwave-flash" src="'+this.getAttribute("swf")+'" width="'+this.getAttribute("width")+'" height="'+this.getAttribute("height")+'" style="'+this.getAttribute("style")+'"';_19+=' id="'+this.getAttribute("id")+'" name="'+this.getAttribute("id")+'" ';var _1a=this.getParams();for(var key in _1a){_19+=[key]+'="'+_1a[key]+'" '}var _1c=this.getVariablePairs().join("&");if(_1c.length>0){_19+='flashvars="'+_1c+'"'}_19+="/>"}else{if(this.getAttribute("doExpressInstall")){this.addVariable("MMplayerType","ActiveX");this.setAttribute("swf",this.xiSWFPath)}_19='<object id="'+this.getAttribute("id")+'" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="'+this.getAttribute("width")+'" height="'+this.getAttribute("height")+'" style="'+this.getAttribute("style")+'">';_19+='<param name="movie" value="'+this.getAttribute("swf")+'" />';var _1d=this.getParams();for(var key in _1d){_19+='<param name="'+key+'" value="'+_1d[key]+'" />'}var _1f=this.getVariablePairs().join("&");if(_1f.length>0){_19+='<param name="flashvars" value="'+_1f+'" />'}_19+="</object>"}return _19},write:function(_20){if(this.getAttribute("useExpressInstall")){var _21=new deconcept.PlayerVersion([6,0,65]);if(this.installedVer.versionIsValid(_21)&&!this.installedVer.versionIsValid(this.getAttribute("version"))){this.setAttribute("doExpressInstall",true);this.addVariable("MMredirectURL",escape(this.getAttribute("xiRedirectUrl")));document.title=document.title.slice(0,47)+" - Flash Player Installation";this.addVariable("MMdoctitle",document.title)}}if(this.skipDetect||this.getAttribute("doExpressInstall")||this.installedVer.versionIsValid(this.getAttribute("version"))){var n=typeof _20=="string"?document.getElementById(_20):_20;n.innerHTML=this.getSWFHTML();return true}else{if(this.getAttribute("redirectUrl")!=""){document.location.replace(this.getAttribute("redirectUrl"))}}return false}};deconcept.SWFObjectUtil.getPlayerVersion=function(){var _23=new deconcept.PlayerVersion([0,0,0]);if(navigator.plugins&&navigator.mimeTypes.length){var x=navigator.plugins["Shockwave Flash"];if(x&&x.description){_23=new deconcept.PlayerVersion(x.description.replace(/([a-zA-Z]|\s)+/,"").replace(/(\s+r|\s+b[0-9]+)/,".").split("."))}}else{if(navigator.userAgent&&navigator.userAgent.indexOf("Windows CE")>=0){var axo=1;var _26=3;while(axo){try{_26++;axo=new ActiveXObject("ShockwaveFlash.ShockwaveFlash."+_26);_23=new deconcept.PlayerVersion([_26,0,0])}catch(e){axo=null}}}else{try{var axo=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.7")}catch(e){try{var axo=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.6");_23=new deconcept.PlayerVersion([6,0,21]);axo.AllowScriptAccess="always"}catch(e){if(_23.major==6){return _23}}try{axo=new ActiveXObject("ShockwaveFlash.ShockwaveFlash")}catch(e){}}if(axo!=null){_23=new deconcept.PlayerVersion(axo.GetVariable("$version").split(" ")[1].split(","))}}}return _23};deconcept.PlayerVersion=function(_29){this.major=_29[0]!=null?parseInt(_29[0]):0;this.minor=_29[1]!=null?parseInt(_29[1]):0;this.rev=_29[2]!=null?parseInt(_29[2]):0};deconcept.PlayerVersion.prototype.versionIsValid=function(fv){if(this.major<fv.major){return false}if(this.major>fv.major){return true}if(this.minor<fv.minor){return false}if(this.minor>fv.minor){return true}if(this.rev<fv.rev){return false}return true};deconcept.util={getRequestParameter:function(_2b){var q=document.location.search||document.location.hash;if(_2b==null){return q}if(q){var _2d=q.substring(1).split("&");for(var i=0;i<_2d.length;i++){if(_2d[i].substring(0,_2d[i].indexOf("="))==_2b){return _2d[i].substring(_2d[i].indexOf("=")+1)}}}return""}};deconcept.SWFObjectUtil.cleanupSWFs=function(){var _2f=document.getElementsByTagName("OBJECT");for(var i=_2f.length-1;i>=0;i--){_2f[i].style.display="none";for(var x in _2f[i]){if(typeof _2f[i][x]=="function"){_2f[i][x]=function(){}}}}};if(deconcept.SWFObject.doPrepUnload){if(!deconcept.unloadSet){deconcept.SWFObjectUtil.prepUnload=function(){__flash_unloadHandler=function(){};__flash_savedUnloadHandler=function(){};window.attachEvent("onunload",deconcept.SWFObjectUtil.cleanupSWFs)};window.attachEvent("onbeforeunload",deconcept.SWFObjectUtil.prepUnload);deconcept.unloadSet=true}}if(!document.getElementById&&document.all){document.getElementById=function(id){return document.all[id]}}var getQueryParamValue=deconcept.util.getRequestParameter;var FlashObject=deconcept.SWFObject;var SWFObject=deconcept.SWFObject;jQuery.cookie=function(a,b,c){if(arguments.length>1&&(b===null||typeof b!=="object")){c=jQuery.extend({},c);if(b===null)c.expires=-1;if(typeof c.expires==="number"){var d=c.expires,t=c.expires=new Date;t.setDate(t.getDate()+d)}return document.cookie=[encodeURIComponent(a),"=",c.raw?String(b):encodeURIComponent(String(b)),c.expires?"; expires="+c.expires.toUTCString():"",c.path?"; path="+c.path:"",c.domain?"; domain="+c.domain:"",c.secure?"; secure":""].join("")}c=b||{};var e,decode=c.raw?function(s){return s}:decodeURIComponent;return(e=new RegExp("(?:^|; )"+encodeURIComponent(a)+"=([^;]*)").exec(document.cookie))?decode(e[1]):null};jQuery.base64=function($){var _PADCHAR="=",_ALPHA="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",_VERSION="1.0";function _getbyte64(s,i){var idx=_ALPHA.indexOf(s.charAt(i));if(idx===-1){throw"Cannot decode base64"}return idx}function _decode(s){var pads=0,i,b10,imax=s.length,x=[];s=String(s);if(imax===0){return s}if(imax%4!==0){throw"Cannot decode base64"}if(s.charAt(imax-1)===_PADCHAR){pads=1;if(s.charAt(imax-2)===_PADCHAR){pads=2}imax-=4}for(i=0;i<imax;i+=4){b10=_getbyte64(s,i)<<18|_getbyte64(s,i+1)<<12|_getbyte64(s,i+2)<<6|_getbyte64(s,i+3);x.push(String.fromCharCode(b10>>16,b10>>8&255,b10&255))}switch(pads){case 1:b10=_getbyte64(s,i)<<18|_getbyte64(s,i+1)<<12|_getbyte64(s,i+2)<<6;x.push(String.fromCharCode(b10>>16,b10>>8&255));break;case 2:b10=_getbyte64(s,i)<<18|_getbyte64(s,i+1)<<12;x.push(String.fromCharCode(b10>>16));break}return x.join("")}function _getbyte(s,i){var x=s.charCodeAt(i);if(x>255){throw"INVALID_CHARACTER_ERR: DOM Exception 5"}return x}function _encode(s){if(arguments.length!==1){throw"SyntaxError: exactly one argument required"}s=String(s);var i,b10,x=[],imax=s.length-s.length%3;if(s.length===0){return s}for(i=0;i<imax;i+=3){b10=_getbyte(s,i)<<16|_getbyte(s,i+1)<<8|_getbyte(s,i+2);x.push(_ALPHA.charAt(b10>>18));x.push(_ALPHA.charAt(b10>>12&63));x.push(_ALPHA.charAt(b10>>6&63));x.push(_ALPHA.charAt(b10&63))}switch(s.length-imax){case 1:b10=_getbyte(s,i)<<16;x.push(_ALPHA.charAt(b10>>18)+_ALPHA.charAt(b10>>12&63)+_PADCHAR+_PADCHAR);break;case 2:b10=_getbyte(s,i)<<16|_getbyte(s,i+1)<<8;x.push(_ALPHA.charAt(b10>>18)+_ALPHA.charAt(b10>>12&63)+_ALPHA.charAt(b10>>6&63)+_PADCHAR);break}return x.join("")}return{decode:_decode,encode:_encode,VERSION:_VERSION}}(jQuery);if(!this.JSON){JSON=function(){function f(n){return n<10?"0"+n:n}Date.prototype.toJSON=function(){return this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z"};var m={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};function stringify(b,d){var a,i,k,l,r=/["\\\x00-\x1f\x7f-\x9f]/g,v;switch(typeof b){case"string":return r.test(b)?'"'+b.replace(r,function(a){var c=m[a];if(c){return c}c=a.charCodeAt();return"\\u00"+Math.floor(c/16).toString(16)+(c%16).toString(16)})+'"':'"'+b+'"';case"number":return isFinite(b)?String(b):"null";case"boolean":case"null":return String(b);case"object":if(!b){return"null"}if(typeof b.toJSON==="function"){return stringify(b.toJSON())}a=[];if(typeof b.length==="number"&&!b.propertyIsEnumerable("length")){l=b.length;for(i=0;i<l;i+=1){a.push(stringify(b[i],d)||"null")}return"["+a.join(",")+"]"}if(d){l=d.length;for(i=0;i<l;i+=1){k=d[i];if(typeof k==="string"){v=stringify(b[k],d);if(v){a.push(stringify(k)+":"+v)}}}}else{for(k in b){if(typeof k==="string"){v=stringify(b[k],d);if(v){a.push(stringify(k)+":"+v)}}}}return"{"+a.join(",")+"}"}}return{stringify:stringify,parse:function(a,b){var j;function walk(k,v){var i,n;if(v&&typeof v==="object"){for(i in v){if(Object.prototype.hasOwnProperty.apply(v,[i])){n=walk(i,v[i]);if(n!==undefined){v[i]=n}}}}return b(k,v)}if(/^[\],:{}\s]*$/.test(a.replace(/\\./g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+a+")");return typeof b==="function"?walk("",j):j}throw new SyntaxError("parseJSON")}}}()}{var urlEscape={encode:function(string){return escape(this._utf8_encode(string))},decode:function(string){return this._utf8_decode(unescape(string))},_utf8_encode:function(string){string=string.replace(/\r\n/g,"\n");var utftext="";for(var n=0;n<string.length;n++){var c=string.charCodeAt(n);if(c<128){utftext+=String.fromCharCode(c)}else if(c>127&&c<2048){utftext+=String.fromCharCode(c>>6|192);utftext+=String.fromCharCode(c&63|128)}else{utftext+=String.fromCharCode(c>>12|224);utftext+=String.fromCharCode(c>>6&63|128);utftext+=String.fromCharCode(c&63|128)}}return utftext},_utf8_decode:function(utftext){var string="";var i=0;var c=c1=c2=0;while(i<utftext.length){c=utftext.charCodeAt(i);if(c<128){string+=String.fromCharCode(c);i++}else if(c>191&&c<224){c2=utftext.charCodeAt(i+1);string+=String.fromCharCode((c&31)<<6|c2&63);i+=2}else{c2=utftext.charCodeAt(i+1);c3=utftext.charCodeAt(i+2);string+=String.fromCharCode((c&15)<<12|(c2&63)<<6|c3&63);i+=3}}return string}}}!function(g){g.extend({tablesorter:new function(){function c(){var a=1<arguments.length?Array.prototype.slice.call(arguments):arguments[0];"undefined"!==typeof console&&"undefined"!==typeof console.log?console.log(a):alert(a)}function r(a,b){c(a+" ("+((new Date).getTime()-b.getTime())+"ms)")}function k(a){for(var b in a)return!1;return!0}function p(a,b,d){if(!b)return"";var h=a.config,e=h.textExtraction,n="",n="simple"===e?h.supportsTextContent?b.textContent:g(b).text():"function"===typeof e?e(b,a,d):"object"===typeof e&&e.hasOwnProperty(d)?e[d](b,a,d):h.supportsTextContent?b.textContent:g(b).text();return g.trim(n)}function s(a){var b=a.config,d=b.$tbodies=b.$table.children("tbody:not(."+b.cssInfoBlock+")"),h,e,n,l,x,g,m,v="";if(0===d.length)return b.debug?c("*Empty table!* Not building a parser cache"):"";b.debug&&(m=new Date,c("Detecting parsers for each column"));d=d[0].rows;if(d[0])for(h=[],e=d[0].cells.length,n=0;n<e;n++){l=b.$headers.filter(":not([colspan])");l=l.add(b.$headers.filter('[colspan="1"]')).filter('[data-column="'+n+'"]:last');x=b.headers[n];g=f.getParserById(f.getData(l,x,"sorter"));b.empties[n]=f.getData(l,x,"empty")||b.emptyTo||(b.emptyToBottom?"bottom":"top");b.strings[n]=f.getData(l,x,"string")||b.stringTo||"max";if(!g)a:{l=a;x=d;g=-1;for(var k=n,u=void 0,A=f.parsers.length,q=!1,s="",u=!0;""===s&&u;)g++,x[g]?(q=x[g].cells[k],s=p(l,q,k),l.config.debug&&c("Checking if value was empty on row "+g+", column: "+k+': "'+s+'"')):u=!1;for(;0<=--A;)if((u=f.parsers[A])&&"text"!==u.id&&u.is&&u.is(s,l,q)){g=u;break a}g=f.getParserById("text")}b.debug&&(v+="column:"+n+"; parser:"+g.id+"; string:"+b.strings[n]+"; empty: "+b.empties[n]+"\n");h.push(g)}b.debug&&(c(v),r("Completed detecting parsers",m));b.parsers=h}function w(a){var b=a.tBodies,d=a.config,h,e,n=d.parsers,l,x,y,m,v,k,u,A=[];d.cache={};if(!n)return d.debug?c("*Empty table!* Not building a cache"):"";d.debug&&(u=new Date);d.showProcessing&&f.isProcessing(a,!0);for(m=0;m<b.length;m++)if(d.cache[m]={row:[],normalized:[]},!g(b[m]).hasClass(d.cssInfoBlock)){h=b[m]&&b[m].rows.length||0;e=b[m].rows[0]&&b[m].rows[0].cells.length||0;for(x=0;x<h;++x)if(v=g(b[m].rows[x]),k=[],v.hasClass(d.cssChildRow))d.cache[m].row[d.cache[m].row.length-1]=d.cache[m].row[d.cache[m].row.length-1].add(v);else{d.cache[m].row.push(v);for(y=0;y<e;++y)l=p(a,v[0].cells[y],y),l=n[y].format(l,a,v[0].cells[y],y),k.push(l),"numeric"===(n[y].type||"").toLowerCase()&&(A[y]=Math.max(Math.abs(l)||0,A[y]||0));k.push(d.cache[m].normalized.length);d.cache[m].normalized.push(k)}d.cache[m].colMax=A}d.showProcessing&&f.isProcessing(a);d.debug&&r("Building cache for "+h+" rows",u)}function z(a,b){var d=a.config,h=d.widgetOptions,e=a.tBodies,n=[],l=d.cache,c,y,m,v,p,u,A,q,s,t,w;if(!k(l)){d.debug&&(w=new Date);for(q=0;q<e.length;q++)if(c=g(e[q]),c.length&&!c.hasClass(d.cssInfoBlock)){p=f.processTbody(a,c,!0);c=l[q].row;y=l[q].normalized;v=(m=y.length)?y[0].length-1:0;for(u=0;u<m;u++)if(t=y[u][v],n.push(c[t]),!d.appender||d.pager&&!(d.pager.removeRows&&h.pager_removeRows||d.pager.ajax))for(s=c[t].length,A=0;A<s;A++)p.append(c[t][A]);f.processTbody(a,p,!1)}d.appender&&d.appender(a,n);d.debug&&r("Rebuilt table",w);b||d.appender||f.applyWidget(a);g(a).trigger("sortEnd",a);g(a).trigger("updateComplete",a)}}function D(a){var b=[],d={},h=0,e=g(a).find("thead:eq(0), tfoot").children("tr"),n,l,c,f,m,k,r,p,t,q;for(n=0;n<e.length;n++)for(m=e[n].cells,l=0;l<m.length;l++){f=m[l];k=f.parentNode.rowIndex;r=k+"-"+f.cellIndex;p=f.rowSpan||1;t=f.colSpan||1;"undefined"===typeof b[k]&&(b[k]=[]);for(c=0;c<b[k].length+1;c++)if("undefined"===typeof b[k][c]){q=c;break}d[r]=q;h=Math.max(q,h);g(f).attr({"data-column":q});for(c=k;c<k+p;c++)for("undefined"===typeof b[c]&&(b[c]=[]),r=b[c],f=q;f<q+t;f++)r[f]="x"}a.config.columns=h+1;return d}function C(a){return/^d/i.test(a)||1===a}function E(a){var b=D(a),d,h,e,n,l,x,k,m=a.config;m.headerList=[];m.headerContent=[];m.debug&&(k=new Date);n=m.cssIcon?'<i class="'+(m.cssIcon===f.css.icon?f.css.icon:m.cssIcon+" "+f.css.icon)+'"></i>':"";m.$headers=g(a).find(m.selectorHeaders).each(function(a){h=g(this);d=m.headers[a];m.headerContent[a]=g(this).html();l=m.headerTemplate.replace(/\{content\}/g,g(this).html()).replace(/\{icon\}/g,n);m.onRenderTemplate&&(e=m.onRenderTemplate.apply(h,[a,l]))&&"string"===typeof e&&(l=e);g(this).html('<div class="tablesorter-header-inner">'+l+"</div>");m.onRenderHeader&&m.onRenderHeader.apply(h,[a]);this.column=b[this.parentNode.rowIndex+"-"+this.cellIndex];this.order=C(f.getData(h,d,"sortInitialOrder")||m.sortInitialOrder)?[1,0,2]:[0,1,2];this.count=-1;this.lockedOrder=!1;x=f.getData(h,d,"lockedOrder")||!1;"undefined"!==typeof x&&!1!==x&&(this.order=this.lockedOrder=C(x)?[1,1,1]:[0,0,0]);h.addClass(f.css.header+" "+m.cssHeader);m.headerList[a]=this;h.parent().addClass(f.css.headerRow+" "+m.cssHeaderRow);m.tabIndex&&h.attr("tabindex",0)});F(a);m.debug&&(r("Built headers:",k),c(m.$headers))}function B(a,b,d){var h=a.config;h.$table.find(h.selectorRemove).remove();s(a);w(a);G(h.$table,b,d)}function F(a){var b,d=a.config;d.$headers.each(function(a,e){b="false"===f.getData(e,d.headers[a],"sorter");e.sortDisabled=b;g(e)[b?"addClass":"removeClass"]("sorter-false")})}function H(a){var b,d,h,e=a.config,n=e.sortList,l=[f.css.sortAsc+" "+e.cssAsc,f.css.sortDesc+" "+e.cssDesc],c=g(a).find("tfoot tr").children().removeClass(l.join(" "));e.$headers.removeClass(l.join(" "));h=n.length;for(b=0;b<h;b++)if(2!==n[b][1]&&(a=e.$headers.not(".sorter-false").filter('[data-column="'+n[b][0]+'"]'+(1===h?":last":"")),a.length))for(d=0;d<a.length;d++)a[d].sortDisabled||(a.eq(d).addClass(l[n[b][1]]),c.length&&c.filter('[data-column="'+n[b][0]+'"]').eq(d).addClass(l[n[b][1]]))}function L(a){if(a.config.widthFixed&&0===g(a).find("colgroup").length){var b=g("<colgroup>"),d=g(a).width();g(a.tBodies[0]).find("tr:first").children("td:visible").each(function(){b.append(g("<col>").css("width",parseInt(g(this).width()/d*1e3,10)/10+"%"))});g(a).prepend(b)}}function M(a,b){var d,h,e,n=a.config,c=b||n.sortList;n.sortList=[];g.each(c,function(a,b){d=[parseInt(b[0],10),parseInt(b[1],10)];if(e=n.$headers[d[0]])n.sortList.push(d),h=g.inArray(d[1],e.order),e.count=0<=h?h:d[1]%(n.sortReset?3:2)})}function N(a,b){return a&&a[b]?a[b].type||"":""}function O(a,b,d){var h,e,n,c=a.config,x=!d[c.sortMultiSortKey],k=g(a);k.trigger("sortStart",a);b.count=d[c.sortResetKey]?2:(b.count+1)%(c.sortReset?3:2);c.sortRestart&&(e=b,c.$headers.each(function(){this===e||!x&&g(this).is("."+f.css.sortDesc+",."+f.css.sortAsc)||(this.count=-1)}));e=b.column;if(x){c.sortList=[];if(null!==c.sortForce)for(h=c.sortForce,d=0;d<h.length;d++)h[d][0]!==e&&c.sortList.push(h[d]);h=b.order[b.count];if(2>h&&(c.sortList.push([e,h]),1<b.colSpan))for(d=1;d<b.colSpan;d++)c.sortList.push([e+d,h])}else if(c.sortAppend&&1<c.sortList.length&&f.isValueInArray(c.sortAppend[0][0],c.sortList)&&c.sortList.pop(),f.isValueInArray(e,c.sortList))for(d=0;d<c.sortList.length;d++)n=c.sortList[d],h=c.$headers[n[0]],n[0]===e&&(n[1]=h.order[b.count],2===n[1]&&(c.sortList.splice(d,1),h.count=-1));else if(h=b.order[b.count],2>h&&(c.sortList.push([e,h]),1<b.colSpan))for(d=1;d<b.colSpan;d++)c.sortList.push([e+d,h]);if(null!==c.sortAppend)for(h=c.sortAppend,d=0;d<h.length;d++)h[d][0]!==e&&c.sortList.push(h[d]);k.trigger("sortBegin",a);setTimeout(function(){H(a);I(a);z(a)},1)}function I(a){var b,d,c,e,n,l,g,p,m,v,t,u,s=0,q=a.config,w=q.textSorter||"",z=q.sortList,B=z.length,C=a.tBodies.length;if(!q.serverSideSorting&&!k(q.cache)){q.debug&&(m=new Date);for(d=0;d<C;d++)n=q.cache[d].colMax,p=(l=q.cache[d].normalized)&&l[0]?l[0].length-1:0,l.sort(function(d,l){for(b=0;b<B;b++){e=z[b][0];g=z[b][1];s=0===g;if(q.sortStable&&d[e]===l[e]&&1===B)break;(c=/n/i.test(N(q.parsers,e)))&&q.strings[e]?(c="boolean"===typeof q.string[q.strings[e]]?(s?1:-1)*(q.string[q.strings[e]]?-1:1):q.strings[e]?q.string[q.strings[e]]||0:0,v=q.numberSorter?q.numberSorter(t[e],u[e],s,n[e],a):f["sortNumeric"+(s?"Asc":"Desc")](d[e],l[e],c,n[e],e,a)):(t=s?d:l,u=s?l:d,v="function"===typeof w?w(t[e],u[e],s,e,a):"object"===typeof w&&w.hasOwnProperty(e)?w[e](t[e],u[e],s,e,a):f["sortNatural"+(s?"Asc":"Desc")](d[e],l[e],e,a,q));if(v)return v}return d[p]-l[p]});q.debug&&r("Sorting on "+z.toString()+" and dir "+g+" time",m)}}function J(a,b){var d=a[0].config;d.pager&&!d.pager.ajax&&a.trigger("updateComplete");"function"===typeof b&&b(a[0])}function G(a,b,d){!1===b||a[0].isProcessing?J(a,d):a.trigger("sorton",[a[0].config.sortList,function(){J(a,d)}])}function K(a){var b=a.config,d=b.$table,c,e;b.$headers.find(b.selectorSort).add(b.$headers.filter(b.selectorSort)).unbind("mousedown.tablesorter mouseup.tablesorter sort.tablesorter keypress.tablesorter").bind("mousedown.tablesorter mouseup.tablesorter sort.tablesorter keypress.tablesorter",function(d,c){if(!(1!==(d.which||d.button)&&!/sort|keypress/.test(d.type)||"keypress"===d.type&&13!==d.which||"mouseup"===d.type&&!0!==c&&250<(new Date).getTime()-e)){if("mousedown"===d.type)return e=(new Date).getTime(),"INPUT"===d.target.tagName?"":!b.cancelSelection;b.delayInit&&k(b.cache)&&w(a);var h=(/TH|TD/.test(this.tagName)?g(this):g(this).parents("th, td").filter(":first"))[0];h.sortDisabled||O(a,h,d)}});b.cancelSelection&&b.$headers.attr("unselectable","on").bind("selectstart",!1).css({"user-select":"none",MozUserSelect:"none"});d.unbind("sortReset update updateRows updateCell updateAll addRows sorton appendCache applyWidgetId applyWidgets refreshWidgets destroy mouseup mouseleave ".split(" ").join(".tablesorter ")).bind("sortReset.tablesorter",function(d){d.stopPropagation();b.sortList=[];H(a);I(a);z(a)}).bind("updateAll.tablesorter",function(b,d,c){b.stopPropagation();f.refreshWidgets(a,!0,!0);f.restoreHeaders(a);E(a);K(a);B(a,d,c)}).bind("update.tablesorter updateRows.tablesorter",function(b,d,c){b.stopPropagation();F(a);B(a,d,c)}).bind("updateCell.tablesorter",function(c,e,h,f){c.stopPropagation();d.find(b.selectorRemove).remove();var m,k,r;m=d.find("tbody");c=m.index(g(e).parents("tbody").filter(":first"));var s=g(e).parents("tr").filter(":first");e=g(e)[0];m.length&&0<=c&&(k=m.eq(c).find("tr").index(s),r=e.cellIndex,m=b.cache[c].normalized[k].length-1,b.cache[c].row[a.config.cache[c].normalized[k][m]]=s,b.cache[c].normalized[k][r]=b.parsers[r].format(p(a,e,r),a,e,r),G(d,h,f))}).bind("addRows.tablesorter",function(e,f,g,r){e.stopPropagation();if(k(b.cache))F(a),B(a,g,r);else{var m=f.filter("tr").length,v=[],w=f[0].cells.length,u=d.find("tbody").index(f.parents("tbody").filter(":first"));b.parsers||s(a);for(e=0;e<m;e++){for(c=0;c<w;c++)v[c]=b.parsers[c].format(p(a,f[e].cells[c],c),a,f[e].cells[c],c);v.push(b.cache[u].row.length);b.cache[u].row.push([f[e]]);b.cache[u].normalized.push(v);v=[]}G(d,g,r)}}).bind("sorton.tablesorter",function(b,c,e,h){var f=a.config;b.stopPropagation();d.trigger("sortStart",this);M(a,c);H(a);f.delayInit&&k(f.cache)&&w(a);d.trigger("sortBegin",this);I(a);z(a,h);"function"===typeof e&&e(a)}).bind("appendCache.tablesorter",function(b,d,c){b.stopPropagation();z(a,c);"function"===typeof d&&d(a)}).bind("applyWidgetId.tablesorter",function(d,c){d.stopPropagation();f.getWidgetById(c).format(a,b,b.widgetOptions)}).bind("applyWidgets.tablesorter",function(b,d){b.stopPropagation();f.applyWidget(a,d)}).bind("refreshWidgets.tablesorter",function(b,d,c){b.stopPropagation();f.refreshWidgets(a,d,c)}).bind("destroy.tablesorter",function(b,d,c){b.stopPropagation();f.destroy(a,d,c)})}var f=this;f.version="2.14.4";f.parsers=[];f.widgets=[];f.defaults={theme:"default",widthFixed:!1,showProcessing:!1,headerTemplate:"{content}",onRenderTemplate:null,onRenderHeader:null,cancelSelection:!0,tabIndex:!0,dateFormat:"mmddyyyy",sortMultiSortKey:"shiftKey",sortResetKey:"ctrlKey",usNumberFormat:!0,delayInit:!1,serverSideSorting:!1,headers:{},ignoreCase:!0,sortForce:null,sortList:[],sortAppend:null,sortStable:!1,sortInitialOrder:"asc",sortLocaleCompare:!1,sortReset:!1,sortRestart:!1,emptyTo:"bottom",stringTo:"max",textExtraction:"simple",textSorter:null,numberSorter:null,widgets:[],widgetOptions:{zebra:["even","odd"]},initWidgets:!0,initialized:null,tableClass:"",cssAsc:"",cssDesc:"",cssHeader:"",cssHeaderRow:"",cssProcessing:"",cssChildRow:"tablesorter-childRow",cssIcon:"tablesorter-icon",cssInfoBlock:"tablesorter-infoOnly",selectorHeaders:"> thead th, > thead td",selectorSort:"th, td",selectorRemove:".remove-me",debug:!1,headerList:[],empties:{},strings:{},parsers:[]};f.css={table:"tablesorter",childRow:"tablesorter-childRow",header:"tablesorter-header",headerRow:"tablesorter-headerRow",icon:"tablesorter-icon",info:"tablesorter-infoOnly",processing:"tablesorter-processing",sortAsc:"tablesorter-headerAsc",sortDesc:"tablesorter-headerDesc"};f.log=c;f.benchmark=r;f.construct=function(a){return this.each(function(){var b=g.extend(!0,{},f.defaults,a);!this.hasInitialized&&f.buildTable&&"TABLE"!==this.tagName&&f.buildTable(this,b);f.setup(this,b)})};f.setup=function(a,b){if(!a||!a.tHead||0===a.tBodies.length||!0===a.hasInitialized)return b.debug?c("stopping initialization! No table, thead, tbody or tablesorter has already been initialized"):"";var d="",h=g(a),e=g.metadata;a.hasInitialized=!1;a.isProcessing=!0;a.config=b;g.data(a,"tablesorter",b);b.debug&&g.data(a,"startoveralltimer",new Date);b.supportsTextContent="x"===g("<span>x</span>")[0].textContent;b.supportsDataObject=function(a){a[0]=parseInt(a[0],10);return 1<a[0]||1===a[0]&&4<=parseInt(a[1],10)}(g.fn.jquery.split("."));b.string={max:1,min:-1,"max+":1,"max-":-1,zero:0,none:0,"null":0,top:!0,bottom:!1};/tablesorter\-/.test(h.attr("class"))||(d=""!==b.theme?" tablesorter-"+b.theme:"");b.$table=h.addClass(f.css.table+" "+b.tableClass+d);b.$tbodies=h.children("tbody:not(."+b.cssInfoBlock+")");b.widgetInit={};E(a);L(a);s(a);b.delayInit||w(a);K(a);b.supportsDataObject&&"undefined"!==typeof h.data().sortlist?b.sortList=h.data().sortlist:e&&h.metadata()&&h.metadata().sortlist&&(b.sortList=h.metadata().sortlist);f.applyWidget(a,!0);0<b.sortList.length?h.trigger("sorton",[b.sortList,{},!b.initWidgets]):b.initWidgets&&f.applyWidget(a);b.showProcessing&&h.unbind("sortBegin.tablesorter sortEnd.tablesorter").bind("sortBegin.tablesorter sortEnd.tablesorter",function(b){f.isProcessing(a,"sortBegin"===b.type)});a.hasInitialized=!0;a.isProcessing=!1;b.debug&&f.benchmark("Overall initialization time",g.data(a,"startoveralltimer"));h.trigger("tablesorter-initialized",a);"function"===typeof b.initialized&&b.initialized(a)};f.isProcessing=function(a,b,d){a=g(a);var c=a[0].config;a=d||a.find("."+f.css.header);b?(0<c.sortList.length&&(a=a.filter(function(){return this.sortDisabled?!1:f.isValueInArray(parseFloat(g(this).attr("data-column")),c.sortList)})),a.addClass(f.css.processing+" "+c.cssProcessing)):a.removeClass(f.css.processing+" "+c.cssProcessing)};f.processTbody=function(a,b,d){if(d)return a.isProcessing=!0,b.before('<span class="tablesorter-savemyplace"/>'),d=g.fn.detach?b.detach():b.remove();d=g(a).find("span.tablesorter-savemyplace");b.insertAfter(d);d.remove();a.isProcessing=!1};f.clearTableBody=function(a){g(a)[0].config.$tbodies.empty()};f.restoreHeaders=function(a){var b=a.config;b.$table.find(b.selectorHeaders).each(function(a){g(this).find(".tablesorter-header-inner").length&&g(this).html(b.headerContent[a])})};f.destroy=function(a,b,d){a=g(a)[0];if(a.hasInitialized){f.refreshWidgets(a,!0,!0);var c=g(a),e=a.config,n=c.find("thead:first"),l=n.find("tr."+f.css.headerRow).removeClass(f.css.headerRow+" "+e.cssHeaderRow),k=c.find("tfoot:first > tr").children("th, td");n.find("tr").not(l).remove();c.removeData("tablesorter").unbind("sortReset update updateAll updateRows updateCell addRows sorton appendCache applyWidgetId applyWidgets refreshWidgets destroy mouseup mouseleave keypress sortBegin sortEnd ".split(" ").join(".tablesorter "));e.$headers.add(k).removeClass([f.css.header,e.cssHeader,e.cssAsc,e.cssDesc,f.css.sortAsc,f.css.sortDesc].join(" ")).removeAttr("data-column");l.find(e.selectorSort).unbind("mousedown.tablesorter mouseup.tablesorter keypress.tablesorter");f.restoreHeaders(a);!1!==b&&c.removeClass(f.css.table+" "+e.tableClass+" tablesorter-"+e.theme);a.hasInitialized=!1;"function"===typeof d&&d(a)}};f.regex={chunk:/(^([+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?)?$|^0x[0-9a-f]+$|\d+)/gi,hex:/^0x[0-9a-f]+$/i};f.sortNatural=function(a,b){if(a===b)return 0;var d,c,e,g,l,k;c=f.regex;if(c.hex.test(b)){d=parseInt(a.match(c.hex),16);e=parseInt(b.match(c.hex),16);if(d<e)return-1;if(d>e)return 1}d=a.replace(c.chunk,"\\0$1\\0").replace(/\\0$/,"").replace(/^\\0/,"").split("\\0");c=b.replace(c.chunk,"\\0$1\\0").replace(/\\0$/,"").replace(/^\\0/,"").split("\\0");k=Math.max(d.length,c.length);for(l=0;l<k;l++){e=isNaN(d[l])?d[l]||0:parseFloat(d[l])||0;g=isNaN(c[l])?c[l]||0:parseFloat(c[l])||0;if(isNaN(e)!==isNaN(g))return isNaN(e)?1:-1;typeof e!==typeof g&&(e+="",g+="");if(e<g)return-1;if(e>g)return 1}return 0};f.sortNaturalAsc=function(a,b,d,c,e){if(a===b)return 0;d=e.string[e.empties[d]||e.emptyTo];return""===a&&0!==d?"boolean"===typeof d?d?-1:1:-d||-1:""===b&&0!==d?"boolean"===typeof d?d?1:-1:d||1:f.sortNatural(a,b)};f.sortNaturalDesc=function(a,b,d,c,e){if(a===b)return 0;
d=e.string[e.empties[d]||e.emptyTo];return""===a&&0!==d?"boolean"===typeof d?d?-1:1:d||1:""===b&&0!==d?"boolean"===typeof d?d?1:-1:-d||-1:f.sortNatural(b,a)};f.sortText=function(a,b){return a>b?1:a<b?-1:0};f.getTextValue=function(a,b,d){if(d){var c=a?a.length:0,e=d+b;for(d=0;d<c;d++)e+=a.charCodeAt(d);return b*e}return 0};f.sortNumericAsc=function(a,b,d,c,e,g){if(a===b)return 0;g=g.config;e=g.string[g.empties[e]||g.emptyTo];if(""===a&&0!==e)return"boolean"===typeof e?e?-1:1:-e||-1;if(""===b&&0!==e)return"boolean"===typeof e?e?1:-1:e||1;isNaN(a)&&(a=f.getTextValue(a,d,c));isNaN(b)&&(b=f.getTextValue(b,d,c));return a-b};f.sortNumericDesc=function(a,b,d,c,e,g){if(a===b)return 0;g=g.config;e=g.string[g.empties[e]||g.emptyTo];if(""===a&&0!==e)return"boolean"===typeof e?e?-1:1:e||1;if(""===b&&0!==e)return"boolean"===typeof e?e?1:-1:-e||-1;isNaN(a)&&(a=f.getTextValue(a,d,c));isNaN(b)&&(b=f.getTextValue(b,d,c));return b-a};f.sortNumeric=function(a,b){return a-b};f.characterEquivalents={a:"",A:"",c:"",C:"",e:"",E:"",i:"",I:"",o:"",O:"",ss:"",SS:"",u:"",U:""};f.replaceAccents=function(a){var b,d="[",c=f.characterEquivalents;if(!f.characterRegex){f.characterRegexArray={};for(b in c)"string"===typeof b&&(d+=c[b],f.characterRegexArray[b]=RegExp("["+c[b]+"]","g"));f.characterRegex=RegExp(d+"]")}if(f.characterRegex.test(a))for(b in c)"string"===typeof b&&(a=a.replace(f.characterRegexArray[b],b));return a};f.isValueInArray=function(a,b){var d,c=b.length;for(d=0;d<c;d++)if(b[d][0]===a)return!0;return!1};f.addParser=function(a){var b,d=f.parsers.length,c=!0;for(b=0;b<d;b++)f.parsers[b].id.toLowerCase()===a.id.toLowerCase()&&(c=!1);c&&f.parsers.push(a)};f.getParserById=function(a){var b,d=f.parsers.length;for(b=0;b<d;b++)if(f.parsers[b].id.toLowerCase()===a.toString().toLowerCase())return f.parsers[b];return!1};f.addWidget=function(a){f.widgets.push(a)};f.getWidgetById=function(a){var b,d,c=f.widgets.length;for(b=0;b<c;b++)if((d=f.widgets[b])&&d.hasOwnProperty("id")&&d.id.toLowerCase()===a.toLowerCase())return d};f.applyWidget=function(a,b){a=g(a)[0];var d=a.config,c=d.widgetOptions,e=[],k,l,p;d.debug&&(k=new Date);d.widgets.length&&(d.widgets=g.grep(d.widgets,function(a,b){return g.inArray(a,d.widgets)===b}),g.each(d.widgets||[],function(a,b){(p=f.getWidgetById(b))&&p.id&&(p.priority||(p.priority=10),e[a]=p)}),e.sort(function(a,b){return a.priority<b.priority?-1:a.priority===b.priority?0:1}),g.each(e,function(e,f){if(f){if(b||!d.widgetInit[f.id])f.hasOwnProperty("options")&&(c=a.config.widgetOptions=g.extend(!0,{},f.options,c)),f.hasOwnProperty("init")&&f.init(a,f,d,c),d.widgetInit[f.id]=!0;!b&&f.hasOwnProperty("format")&&f.format(a,d,c,!1)}}));d.debug&&(l=d.widgets.length,r("Completed "+(!0===b?"initializing ":"applying ")+l+" widget"+(1!==l?"s":""),k))};f.refreshWidgets=function(a,b,d){a=g(a)[0];var h,e=a.config,k=e.widgets,l=f.widgets,r=l.length;for(h=0;h<r;h++)l[h]&&l[h].id&&(b||0>g.inArray(l[h].id,k))&&(e.debug&&c("Refeshing widgets: Removing "+l[h].id),l[h].hasOwnProperty("remove")&&e.widgetInit[l[h].id]&&(l[h].remove(a,e,e.widgetOptions),e.widgetInit[l[h].id]=!1));!0!==d&&f.applyWidget(a,b)};f.getData=function(a,b,d){var c="";a=g(a);var e,f;if(!a.length)return"";e=g.metadata?a.metadata():!1;f=" "+(a.attr("class")||"");"undefined"!==typeof a.data(d)||"undefined"!==typeof a.data(d.toLowerCase())?c+=a.data(d)||a.data(d.toLowerCase()):e&&"undefined"!==typeof e[d]?c+=e[d]:b&&"undefined"!==typeof b[d]?c+=b[d]:" "!==f&&f.match(" "+d+"-")&&(c=f.match(RegExp("\\s"+d+"-([\\w-]+)"))[1]||"");return g.trim(c)};f.formatFloat=function(a,b){if("string"!==typeof a||""===a)return a;var c;a=(b&&b.config?!1!==b.config.usNumberFormat:"undefined"!==typeof b?b:1)?a.replace(/,/g,""):a.replace(/[\s|\.]/g,"").replace(/,/g,".");/^\s*\([.\d]+\)/.test(a)&&(a=a.replace(/^\s*\(([.\d]+)\)/,"-$1"));c=parseFloat(a);return isNaN(c)?g.trim(a):c};f.isDigit=function(a){return isNaN(a)?/^[\-+(]?\d+[)]?$/.test(a.toString().replace(/[,.'"\s]/g,"")):!0}}});var p=g.tablesorter;g.fn.extend({tablesorter:p.construct});p.addParser({id:"text",is:function(){return!0},format:function(c,r){var k=r.config;c&&(c=g.trim(k.ignoreCase?c.toLocaleLowerCase():c),c=k.sortLocaleCompare?p.replaceAccents(c):c);return c},type:"text"});p.addParser({id:"digit",is:function(c){return p.isDigit(c)},format:function(c,r){var k=p.formatFloat((c||"").replace(/[^\w,. \-()]/g,""),r);return c&&"number"===typeof k?k:c?g.trim(c&&r.config.ignoreCase?c.toLocaleLowerCase():c):c},type:"numeric"});p.addParser({id:"currency",is:function(c){return/^\(?\d+[\u00a3$\u20ac\u00a4\u00a5\u00a2?.]|[\u00a3$\u20ac\u00a4\u00a5\u00a2?.]\d+\)?$/.test((c||"").replace(/[,. ]/g,""))},format:function(c,r){var k=p.formatFloat((c||"").replace(/[^\w,. \-()]/g,""),r);return c&&"number"===typeof k?k:c?g.trim(c&&r.config.ignoreCase?c.toLocaleLowerCase():c):c},type:"numeric"});p.addParser({id:"ipAddress",is:function(c){return/^\d{1,3}[\.]\d{1,3}[\.]\d{1,3}[\.]\d{1,3}$/.test(c)},format:function(c,g){var k,t=c?c.split("."):"",s="",w=t.length;for(k=0;k<w;k++)s+=("00"+t[k]).slice(-3);return c?p.formatFloat(s,g):c},type:"numeric"});p.addParser({id:"url",is:function(c){return/^(https?|ftp|file):\/\//.test(c)},format:function(c){return c?g.trim(c.replace(/(https?|ftp|file):\/\//,"")):c},type:"text"});p.addParser({id:"isoDate",is:function(c){return/^\d{4}[\/\-]\d{1,2}[\/\-]\d{1,2}/.test(c)},format:function(c,g){return c?p.formatFloat(""!==c?new Date(c.replace(/-/g,"/")).getTime()||"":"",g):c},type:"numeric"});p.addParser({id:"percent",is:function(c){return/(\d\s*?%|%\s*?\d)/.test(c)&&15>c.length},format:function(c,g){return c?p.formatFloat(c.replace(/%/g,""),g):c},type:"numeric"});p.addParser({id:"usLongDate",is:function(c){return/^[A-Z]{3,10}\.?\s+\d{1,2},?\s+(\d{4})(\s+\d{1,2}:\d{2}(:\d{2})?(\s+[AP]M)?)?$/i.test(c)||/^\d{1,2}\s+[A-Z]{3,10}\s+\d{4}/i.test(c)},format:function(c,g){return c?p.formatFloat(new Date(c.replace(/(\S)([AP]M)$/i,"$1 $2")).getTime()||"",g):c},type:"numeric"});p.addParser({id:"shortDate",is:function(c){return/(^\d{1,2}[\/\s]\d{1,2}[\/\s]\d{4})|(^\d{4}[\/\s]\d{1,2}[\/\s]\d{1,2})/.test((c||"").replace(/\s+/g," ").replace(/[\-.,]/g,"/"))},format:function(c,g,k,t){if(c){k=g.config;var s=k.headerList[t];t=s.dateFormat||p.getData(s,k.headers[t],"dateFormat")||k.dateFormat;c=c.replace(/\s+/g," ").replace(/[\-.,]/g,"/");"mmddyyyy"===t?c=c.replace(/(\d{1,2})[\/\s](\d{1,2})[\/\s](\d{4})/,"$3/$1/$2"):"ddmmyyyy"===t?c=c.replace(/(\d{1,2})[\/\s](\d{1,2})[\/\s](\d{4})/,"$3/$2/$1"):"yyyymmdd"===t&&(c=c.replace(/(\d{4})[\/\s](\d{1,2})[\/\s](\d{1,2})/,"$1/$2/$3"))}return c?p.formatFloat(new Date(c).getTime()||"",g):c},type:"numeric"});p.addParser({id:"time",is:function(c){return/^(([0-2]?\d:[0-5]\d)|([0-1]?\d:[0-5]\d\s?([AP]M)))$/i.test(c)},format:function(c,g){return c?p.formatFloat(new Date("2000/01/01 "+c.replace(/(\S)([AP]M)$/i,"$1 $2")).getTime()||"",g):c},type:"numeric"});p.addParser({id:"metadata",is:function(){return!1},format:function(c,p,k){c=p.config;c=c.parserMetadataName?c.parserMetadataName:"sortValue";return g(k).metadata()[c]},type:"numeric"});p.addWidget({id:"zebra",priority:90,format:function(c,r,k){var t,s,w,z,D,C,E=RegExp(r.cssChildRow,"i"),B=r.$tbodies;r.debug&&(D=new Date);for(c=0;c<B.length;c++)t=B.eq(c),C=t.children("tr").length,1<C&&(w=0,t=t.children("tr:visible").not(r.selectorRemove),t.each(function(){s=g(this);E.test(this.className)||w++;z=0===w%2;s.removeClass(k.zebra[z?1:0]).addClass(k.zebra[z?0:1])}));r.debug&&p.benchmark("Applying Zebra widget",D)},remove:function(c,p,k){var t;p=p.$tbodies;var s=(k.zebra||["even","odd"]).join(" ");for(k=0;k<p.length;k++)t=g.tablesorter.processTbody(c,p.eq(k),!0),t.children().removeClass(s),g.tablesorter.processTbody(c,t,!1)}})}(jQuery);(function($){var methods=function(){var c={bcClass:"sf-breadcrumb",menuClass:"sf-js-enabled",anchorClass:"sf-with-ul",menuArrowClass:"sf-arrows"},ios=/iPhone|iPad|iPod/i.test(navigator.userAgent),wp7=function(){var style=document.documentElement.style;return"behavior"in style&&"fill"in style&&/iemobile/i.test(navigator.userAgent)}(),fixIos=function(){if(ios){$(window).load(function(){$("body").children().on("click",$.noop)})}}(),toggleMenuClasses=function($menu,o){var classes=c.menuClass;if(o.cssArrows){classes+=" "+c.menuArrowClass}$menu.toggleClass(classes)},setPathToCurrent=function($menu,o){return $menu.find("li."+o.pathClass).slice(0,o.pathLevels).addClass(o.hoverClass+" "+c.bcClass).filter(function(){return $(this).children("ul").hide().show().length}).removeClass(o.pathClass)},toggleAnchorClass=function($li){$li.children("a").toggleClass(c.anchorClass)},toggleTouchAction=function($menu){var touchAction=$menu.css("ms-touch-action");touchAction=touchAction==="pan-y"?"auto":"pan-y";$menu.css("ms-touch-action",touchAction)},applyHandlers=function($menu,o){var targets="li:has(ul)";if($.fn.hoverIntent&&!o.disableHI){$menu.hoverIntent(over,out,targets)}else{$menu.on("mouseenter.superfish",targets,over).on("mouseleave.superfish",targets,out)}var touchevent="MSPointerDown.superfish";if(!ios){touchevent+=" touchend.superfish"}if(wp7){touchevent+=" mousedown.superfish"}$menu.on("focusin.superfish","li",over).on("focusout.superfish","li",out).on(touchevent,"a",touchHandler)},touchHandler=function(e){var $this=$(this),$ul=$this.siblings("ul");if($ul.length>0&&$ul.is(":hidden")){$this.one("click.superfish",false);if(e.type==="MSPointerDown"){$this.trigger("focus")}else{$.proxy(over,$this.parent("li"))()}}},over=function(){var $this=$(this),o=getOptions($this);clearTimeout(o.sfTimer);$this.siblings().superfish("hide").end().superfish("show")},out=function(){var $this=$(this),o=getOptions($this);if(ios){$.proxy(close,$this,o)()}else{clearTimeout(o.sfTimer);o.sfTimer=setTimeout($.proxy(close,$this,o),o.delay)}},close=function(o){o.retainPath=$.inArray(this[0],o.$path)>-1;this.superfish("hide");if(!this.parents("."+o.hoverClass).length){o.onIdle.call(getMenu(this));if(o.$path.length){$.proxy(over,o.$path)()}}},getMenu=function($el){return $el.closest("."+c.menuClass)},getOptions=function($el){return getMenu($el).data("sf-options")};return{hide:function(instant){if(this.length){var $this=this,o=getOptions($this);if(!o){return this}var not=o.retainPath===true?o.$path:"",$ul=$this.find("li."+o.hoverClass).add(this).not(not).removeClass(o.hoverClass).children("ul"),speed=o.speedOut;if(instant){$ul.show();speed=0}o.retainPath=false;o.onBeforeHide.call($ul);$ul.stop(true,true).animate(o.animationOut,speed,function(){var $this=$(this);o.onHide.call($this)})}return this},show:function(){var o=getOptions(this);if(!o){return this}var $this=this.addClass(o.hoverClass),$ul=$this.children("ul");o.onBeforeShow.call($ul);$ul.stop(true,true).animate(o.animation,o.speed,function(){o.onShow.call($ul)});return this},destroy:function(){return this.each(function(){var $this=$(this),o=$this.data("sf-options"),$liHasUl=$this.find("li:has(ul)");if(!o){return false}clearTimeout(o.sfTimer);toggleMenuClasses($this,o);toggleAnchorClass($liHasUl);toggleTouchAction($this);$this.off(".superfish").off(".hoverIntent");$liHasUl.children("ul").attr("style",function(i,style){return style.replace(/display[^;]+;?/g,"")});o.$path.removeClass(o.hoverClass+" "+c.bcClass).addClass(o.pathClass);$this.find("."+o.hoverClass).removeClass(o.hoverClass);o.onDestroy.call($this);$this.removeData("sf-options")})},init:function(op){return this.each(function(){var $this=$(this);if($this.data("sf-options")){return false}var o=$.extend({},$.fn.superfish.defaults,op),$liHasUl=$this.find("li:has(ul)");o.$path=setPathToCurrent($this,o);$this.data("sf-options",o);toggleMenuClasses($this,o);toggleAnchorClass($liHasUl);toggleTouchAction($this);applyHandlers($this,o);$liHasUl.not("."+c.bcClass).superfish("hide",true);o.onInit.call(this)})}}}();$.fn.superfish=function(method,args){if(methods[method]){return methods[method].apply(this,Array.prototype.slice.call(arguments,1))}else if(typeof method==="object"||!method){return methods.init.apply(this,arguments)}else{return $.error("Method "+method+" does not exist on jQuery.fn.superfish")}};$.fn.superfish.defaults={hoverClass:"sfHover",pathClass:"overrideThisToUse",pathLevels:1,delay:800,animation:{opacity:"show"},animationOut:{opacity:"hide"},speed:"normal",speedOut:"fast",cssArrows:true,disableHI:false,onInit:$.noop,onBeforeShow:$.noop,onShow:$.noop,onBeforeHide:$.noop,onHide:$.noop,onIdle:$.noop,onDestroy:$.noop};$.fn.extend({hideSuperfishUl:methods.hide,showSuperfishUl:methods.show})})(jQuery);(function(e){var t=function(){var t={bcClass:"sf-breadcrumb",menuClass:"sf-js-enabled",anchorClass:"sf-with-ul",menuArrowClass:"sf-arrows"},n=function(){e(window).load(function(){e("body").children().on("click.superclick",function(){var t=e(".sf-js-enabled");t.superclick("reset")})})}(),r=function(e,n){var r=t.menuClass;if(n.cssArrows){r+=" "+t.menuArrowClass}e.toggleClass(r)},i=function(n,r){return n.find("li."+r.pathClass).slice(0,r.pathLevels).addClass(r.activeClass+" "+t.bcClass).filter(function(){return e(this).children("ul").hide().show().length}).removeClass(r.pathClass)},s=function(e){e.children("a").toggleClass(t.anchorClass)},o=function(e){var t=e.css("ms-touch-action");t=t==="pan-y"?"auto":"pan-y";e.css("ms-touch-action",t)},u=function(t){var n=e(this),r=n.siblings("ul"),i;if(r.length){i=r.is(":hidden")?a:f;e.proxy(i,n.parent("li"))();return false}},a=function(){var t=e(this),n=h(t);t.siblings().superclick("hide").end().superclick("show")},f=function(){var t=e(this),n=h(t);e.proxy(l,t,n)()},l=function(t){t.retainPath=e.inArray(this[0],t.$path)>-1;this.superclick("hide");if(!this.parents("."+t.activeClass).length){t.onIdle.call(c(this));if(t.$path.length){e.proxy(a,t.$path)()}}},c=function(e){return e.closest("."+t.menuClass)},h=function(e){return c(e).data("sf-options")};return{hide:function(t){if(this.length){var n=this,r=h(n);if(!r){return this}var i=r.retainPath===true?r.$path:"",s=n.find("li."+r.activeClass).add(this).not(i).removeClass(r.activeClass).children("ul"),o=r.speedOut;if(t){s.show();o=0}r.retainPath=false;r.onBeforeHide.call(s);s.stop(true,true).animate(r.animationOut,o,function(){var t=e(this);r.onHide.call(t)})}return this},show:function(){var e=h(this);if(!e){return this}var t=this.addClass(e.activeClass),n=t.children("ul");e.onBeforeShow.call(n);n.stop(true,true).animate(e.animation,e.speed,function(){e.onShow.call(n)});return this},destroy:function(){return this.each(function(){var n=e(this),i=n.data("sf-options"),u=n.find("li:has(ul)");if(!i){return false}r(n,i);s(u);o(n);n.off(".superclick");u.children("ul").attr("style",function(e,t){return t.replace(/display[^;]+;?/g,"")});i.$path.removeClass(i.activeClass+" "+t.bcClass).addClass(i.pathClass);n.find("."+i.activeClass).removeClass(i.activeClass);i.onDestroy.call(n);n.removeData("sf-options")})},reset:function(){return this.each(function(){var t=e(this),n=h(t),r=e(t.find("."+n.activeClass).toArray().reverse());r.children("a").trigger("click")})},init:function(n){return this.each(function(){var a=e(this);if(a.data("sf-options")){return false}var f=e.extend({},e.fn.superclick.defaults,n),l=a.find("li:has(ul)");f.$path=i(a,f);a.data("sf-options",f);r(a,f);s(l);o(a);a.on("click.superclick","a",u);l.not("."+t.bcClass).superclick("hide",true);f.onInit.call(this)})}}}();e.fn.superclick=function(n,r){if(t[n]){return t[n].apply(this,Array.prototype.slice.call(arguments,1))}else if(typeof n==="object"||!n){return t.init.apply(this,arguments)}else{return e.error("Method "+n+" does not exist on jQuery.fn.superclick")}};e.fn.superclick.defaults={activeClass:"sfHover",pathClass:"overrideThisToUse",pathLevels:1,animation:{opacity:"show"},animationOut:{opacity:"hide"},speed:"normal",speedOut:"fast",cssArrows:true,onInit:e.noop,onBeforeShow:e.noop,onShow:e.noop,onBeforeHide:e.noop,onHide:e.noop,onIdle:e.noop,onDestroy:e.noop}})(jQuery);jQuery(document).ready(function(){if(/iphone|ipod|ipad.*os/gi.test(navigator.appVersion)){bizJiOS=true;window.onpageshow=function(evt){if(evt.persisted){document.body.style.display="none";location.reload()}}}else{bizJiOS=false}jQuery("ul.sf-menu").superfish({autoArrows:false,cssArrows:false,hoverClass:"selected",pathClass:"active",speed:0,speedOut:0,disableHI:bizJiOS});var sClick=jQuery("ul.sfHover").superclick({autoArrows:false,cssArrows:false,speed:0,speedOut:0});jQuery(".sfHover li a.dropdown-toggle").on("click",function(e){sClick.superfish;e.preventDefault()});bizJ.init();jQuery(".executable[rel]").each(function(){var $this=jQuery(this);var rel=$this.attr("rel");try{bizJ[rel].init($this)}catch(e){bizJ.log("problem init rel:"+rel+" : "+e)}});jQuery.ajaxSetup({timeout:1e4});jQuery("#dd-mktg-go").click(function(){var gotopage=jQuery("#dd-mktg-choice").val();window.location=gotopage});jQuery("div.chooseCityContent").hover(function(){jQuery(this).parent().find(".active").addClass("subhover")},function(){jQuery(this).parent().find(".active").removeClass("subhover")});jQuery(".toggle1").click(function(){jQuery(this).next().slideToggle();return false});jQuery(".toggle2").click(function(){jQuery(this).parent().slideToggle();return false});jQuery("a.show").click(function(){jQuery(this).switchClass("show","hide","fast");return false});jQuery("a.new").click(function(){jQuery(this).parents().find("a").removeClass("hide")});jQuery(".follow-btn-delete").hover(function(){jQuery(this).text("Unfollow").css("backgroundColor","red")},function(){jQuery(this).text("Following").css("backgroundColor","green")});var typingTimeout;function startTypingTimer(subid,journal_id,journal_desc_name,zip_code,email){jQuery("#registration-subscriber_id-success").hide();jQuery("#registration-subscriber_id-error").hide();if(typingTimeout!=undefined)clearTimeout(typingTimeout);typingTimeout=setTimeout(function(){jQuery.post("ajax/ajax.json?_method=VALIDATESUBID",{sub_id:subid,journal_id:journal_id,zip_code:zip_code,email:email,tier:jQuery("#product_tier").val()},function(data){if(!data.is_valid){if(data.response=="invalidsubid"){jQuery("#registration-subscriber_id-error").html("We could not locate this subscriber ID. Please check your label and make sure the correct account number was entered.")}else if(data.response=="outofmarket"){if(tier!=2){jQuery("#registration-subscriber_id-error").html("Please add the subscription account number for your "+journal_desc_name+" subscription in order to receive a discount on your ticket purchase.")}else{jQuery("#registration-subscriber_id-error").html("Please add the subscription account number for your "+journal_desc_name+" subscription in order to complete your ticket purchase.")}}else if(data.response=="invalidzip"){jQuery("#registration-subscriber_id-error").html("Your registration zip code does not match the subscription zip code.")}else if(data.response=="alreadylinked"){jQuery("#registration-subscriber_id-error").html("This account is currently linked to "+data.linkedemail+" Please access your subscription by logging in with that email address or contact us for additional assistance.")}jQuery("#registration-subscriber_id-error").show()}else{jQuery("#submitBtn").show();jQuery("#registration-subscriber_id-success").show()}})},500)}jQuery("#registration-primary_attendee-email").live("keyup",function(w){var sub_id=jQuery("#registration-subscriber_id").val();var journal_id=jQuery("#journal_id").val();var journal_desc_name=jQuery("#journal_desc_name").val();var zip_code=jQuery("#registration-primary_attendee-zip").val();var email=jQuery(w.target).val();if(email!=""&&sub_id!=""&&zip_code!=""&&zip_code.length>4){startTypingTimer(sub_id,journal_id,journal_desc_name,zip_code,email)}else{jQuery("#registration-subscriber_id-error").hide();jQuery("#registration-subscriber_id-success").hide()}});jQuery("#registration-primary_attendee-zip").live("keyup",function(z){var sub_id=jQuery("#registration-subscriber_id").val();var journal_id=jQuery("#journal_id").val();var journal_desc_name=jQuery("#journal_desc_name").val();var zip_code=jQuery(z.target).val();var email=jQuery("#registration-primary_attendee-email").val();if(email!=""&&sub_id!=""&&zip_code!=""&&zip_code.length>4){startTypingTimer(sub_id,journal_id,journal_desc_name,zip_code,email)}else{jQuery("#registration-subscriber_id-error").hide();jQuery("#registration-subscriber_id-success").hide()}});jQuery("#registration-subscriber_id").live("keyup",function(e){var sub_id=jQuery(e.target).val();var journal_id=jQuery("#journal_id").val();var journal_desc_name=jQuery("#journal_desc_name").val();var zip_code=jQuery("#registration-primary_attendee-zip").val();var email=jQuery("#registration-primary_attendee-email").val();if(email!=""&&sub_id!=""&&zip_code!=""){startTypingTimer(sub_id,journal_id,journal_desc_name,zip_code,email)}else{jQuery("#registration-subscriber_id-error").hide();jQuery("#registration-subscriber_id-success").hide()}});jQuery(".btn-panel-markets").click(function(){jQuery(this).parent().find(".panel-markets").slideToggle("fast");jQuery(this).toggleClass("active");return false});jQuery(".show_event_message").click(function(){jQuery("#"+jQuery(this).attr("tbody")).show("slow")});jQuery(".cancel_event_message").click(function(){jQuery("#"+jQuery(this).attr("tbody")).hide("slow")});jQuery(".send_event_message").click(function(){if(jQuery("#"+jQuery(this).attr("event_message")).val()==""){alert("Please enter a message.")}else{var attendee_name=jQuery(this).attr("attendee_name");jQuery("#"+jQuery(this).attr("tbody")).html('<tr><td colspan="2"><p style="font-size:12px;color:#1E79E9;">Your message has been sent to '+attendee_name+"</p></td></tr>")}});jQuery("a.accounthelppreview").hover(function(){jQuery("#accounthelppreview").fadeIn("fast")},function(){jQuery("#accounthelppreview").fadeOut("fast")});jQuery(".membersOnly dl").height(jQuery(".latestNews").height()-(jQuery(".membersOnly .cta").height()+139));jQuery(".mp-main .tabItems li:not(.current)").live("mouseover mouseout",function(event){if(event.type=="mouseover"){jQuery(this).addClass("opacity100")}else{jQuery(this).removeClass("opacity100")}});jQuery(".mp-main .tabItems li").click(function(){jQuery(".mp-main .tabItems li").removeClass("current");jQuery(".mp-main .tabItems li").removeClass("opacity100");jQuery(this).addClass("current");jQuery("#mp-main-h2").text(jQuery(this).attr("title"))});if(jQuery("#microsoft-ad").length){jQuery("#microsoft-ad").dialog({width:670,height:525,modal:true,open:function(){setTimeout("jQuery('#microsoft-ad').dialog('close')",2e4);jQuery(".ui-widget-overlay").click(function(){jQuery("#microsoft-ad").dialog("close")})},close:function(){jQuery("#microsoft-ad").remove()}})}jQuery(".follow-icon").hover(function(){jQuery(this).find(".follow-outer").attr("style","display:block")},function(){jQuery(this).find(".follow-outer").attr("style","display:none")});jQuery("span.follow-btn-outer > .follow-btn.remove").live("mouseover mouseout",function(event){if(event.type=="mouseover"){jQuery(this).html("Stop following");jQuery(this).css("backgroundColor","red")}else{jQuery(this).html("Following");jQuery(this).css("backgroundColor","green")}});jQuery("span.follow-btn-outer > .follow-btn.follow").live("mouseover mouseout",function(event){jQuery(this).html("Follow this company");jQuery(this).css("backgroundColor","green")});jQuery(".industry-follow-icon").hover(function(){jQuery(this).find(".industry-follow-outer").attr("style","display:block")},function(){jQuery(this).find(".industry-follow-outer").attr("style","display:none")});jQuery("span.industry-follow-btn-outer > .industry-follow-btn.remove").live("mouseover mouseout",function(event){if(event.type=="mouseover"){jQuery(this).html("Stop following");jQuery(this).css("backgroundColor","red")}else{jQuery(this).html("Following");jQuery(this).css("backgroundColor","green")}});jQuery("span.industry-follow-btn-outer > .industry-follow-btn.follow").live("mouseover mouseout",function(event){jQuery(this).html("Follow this industry");jQuery(this).css("backgroundColor","green")});var tabs=jQuery("ul.tabs");tabs.each(function(i){var tab=jQuery(this).find("> li > a");tab.click(function(e){var contentLocation=jQuery(this).attr("href");if(contentLocation.charAt(0)=="#"){e.preventDefault();tab.removeClass("active");jQuery(this).addClass("active");jQuery(contentLocation).show().addClass("active").siblings().hide().removeClass("active")}})});jQuery(".capital-one--ad iframe").addClass("transparent");var tfcModal={videoPlayer:null,init:function(){jQuery(".tfc__modal").dialog({autoOpen:false,width:640,minHeight:520,modal:true,position:{my:"center",at:"center",of:window},open:function(){jQuery(".ui-widget-overlay").bind("click",function(){jQuery(".tfc__modal").dialog("close")})},close:function(){tfcModal.videoPlayer.destroy();tfcVote.init()}});jQuery(".open-modal").click(function(e){e.preventDefault();var company_name=jQuery(this).find(".company-name").html();var description=jQuery(this).find(".description").html();var embed_code=jQuery(this).find(".embed-code").html();var profile_link=jQuery(this).find(".profile-link").html();var company_id=jQuery(this).parent().parent().parent().attr("data");var vote_share=jQuery("#"+company_id+" .vote_share_area").html();tfcModal.videoPlayer=OO.Player.create("ooyalaplayer",embed_code,{adSetCode:"6af9746f734c4f7cad43737ad1f6206e",autoplay:true});tfcModal.videoPlayer.play();jQuery(".tfc__modal").attr("data",company_id);jQuery(".company_title").html(company_name);jQuery(".nominee__description p.company-description").html(description);jQuery(".nominee__external-link a").attr("href",profile_link);jQuery(".tfc__modal .vote_share_area").html(vote_share);tfcVote.init();jQuery(".tfc__modal").dialog("open")})}};var tfcVote={init:function(){jQuery(".vote__content a").on("click",function(e){e.preventDefault();var company_div=jQuery(this).parent().parent().parent().attr("data");var num_votes_str=jQuery("#"+company_div+" .nominee__votes").html();jQuery.ajax({url:"seattle/techflashcup/vote/"+company_div,type:"POST"});num_votes_arr=num_votes_str.split("<small>");num_votes=parseInt(num_votes_arr[0],10);num_votes=num_votes+1;jQuery("#"+company_div+" .nominee__votes.votable").html(num_votes+"<small>votes</small>");jQuery("#"+company_div+" .toggle").toggle();jQuery(".tfc__modal .toggle").toggle()})}};tfcModal.init();tfcVote.init()});var Gpt=function(){this.breakpoint=[[736,200],[0,0]];this.hierarchy=null;this.market=null;this.network="/4635/bzj.";this.slots={};this.positions={};this.test=false;this.controls={slot:"",targeting:{key:"",value:""}};this.debug=false;this.verbose=false;if(typeof googletag!="undefined")this.init()};Gpt.prototype={constructor:Gpt,init:function(){if(this.verbose)console.log("gpt.init");this.initListeners();this.initPageTargeting();this.initPageCategoryExclusions();this.initServices();this.define();$(window).trigger("bizj.gpt.ready")},initServices:function(){if(this.verbose)console.log("gpt.initServices");googletag.cmd.push(function(){googletag.pubads().collapseEmptyDivs(false);googletag.pubads().enableSingleRequest();googletag.pubads().enableAsyncRendering();googletag.enableServices()})},initListeners:function(){if(this.verbose)console.log("gpt.initListeners");var self=this;googletag.cmd.push(function(){googletag.pubads().addEventListener("slotRenderEnded",function(e){if(typeof self.slots==="object"){if(Object.keys(self.slots).length){for(var key in self.slots){if(self.slots[key]==e.slot){if(e.isEmpty){if(key.search(/logo/)!=-1){var $sponsoredBy=$("#logo").parents(".sponsored-by");if(!$sponsoredBy.length>0){$sponsoredBy=$("#logo").parents(".module_right")}if($sponsoredBy.length){$sponsoredBy.css({display:"none"})}}}if(key.search(/skin/)!=-1){$("#"+key).find("iframe").css({width:"100%"})}}}}}})})},initPageTargeting:function(){if(this.verbose)console.log("gpt.initPageTargeting");var json=$('meta[property="gpt:params"]').prop("content"),targeting=null,controls=this.controls;if(json){targeting=JSON.parse(json);if(typeof targeting==="object"){if(Object.keys(targeting).length){googletag.cmd.push(function(){for(var key in targeting){if(targeting[key]!==undefined){googletag.pubads().setTargeting(key,[targeting[key]])}}});if(this.test){googletag.cmd.push(function(){googletag.pubads().setTargeting(controls.targeting.key,[controls.targeting.value])})}}}}},initPageCategoryExclusions:function(){var json=$('meta[property="gpt:category:exclusions"]').prop("content"),exclusions=null;if(json){exclusions=JSON.parse(json);if(exclusions.length){googletag.cmd.push(function(){for(var i=0;i<exclusions.length;i++){if(exclusions[i]!==undefined){googletag.pubads().setCategoryExclusion(exclusions[i])}}})}}},getHierarchy:function(){if(!this.hierarchy){this.hierarchy=$('meta[property="gpt:hierarchy"]').prop("content")}return this.hierarchy?"/"+this.hierarchy+"/":"/"},getId:function($slot,data){if(this.verbose)console.log("gpt.getId");var self=this,id=null,$positions=$('[data-position="'+data.position+'"]');if($positions.length){$positions.each(function(index){if($slot.context===$(this).context){if(self.positions[data.position]){self.positions[data.position]+=1}else{self.positions[data.position]=1}id=data.position+"_"+self.positions[data.position]}})}else{id=data.position}return id},getMarket:function(){if(!this.market){this.market=$('meta[name="market"]').prop("content")}return this.market},getNetwork:function(position,hierarchy){if(this.verbose)console.log("gpt.getNetwork");return this.network+this.getMarket()+"/"},getSizeMapping:function(mapping){if(this.verbose)console.log("gpt.getSizeMapping");var breakpoint=this.breakpoint,sizeMapping=googletag.sizeMapping();if(mapping){if(mapping.indexOf(0))sizeMapping.addSize(breakpoint[0],mapping[0]);if(mapping.indexOf(1))sizeMapping.addSize(breakpoint[1],mapping[1])}return sizeMapping.build()},clear:function($slots){if(this.verbose)console.log("gpt.clear");if($slots.length){$slots.each(function(){var $slot=$(this);if($slot.data("gpt")!==undefined){googletag.cmd.push(function(){googletag.pubads().clear([$slot.data("gpt")])})}})}},define:function($slots,defer){if(this.verbose)console.log("gpt.define");var self=this;$slots=$slots!==undefined?$slots:$(".gpt").filter(":visible");defer=defer!==undefined?defer:true;if($slots.length){$slots.each(function(){var $slot=$(this),data=$slot.data();if(!data.gpt){if(data.deferred&&!defer){$slot.removeAttr("data-deferred").removeData("deferred");delete data.deferred}if(self.verbose)console.log(data);if(self.verbose)console.log(defer);if(!data.deferred){data.id=self.getId($slot,data);data.network=self.getNetwork()+data.position+self.getHierarchy()+self.positions[data.position];$slot.attr("id",data.id);if(self.test){data.network+=self.controls.slot}googletag.cmd.push(function(){if(data.position=="oop"){self.slots[data.id]=googletag.defineOutOfPageSlot(data.network,data.id).setTargeting("pos",[data.position]).addService(googletag.pubads())}else{self.slots[data.id]=googletag.defineSlot(data.network,data.sizes,data.id).setTargeting("pos",[data.position]).addService(googletag.pubads())}if(typeof data.params==="object"){if(Object.keys(data.params).length){for(var key in data.params){if(data.params[key]!==undefined){self.slots[data.id].setTargeting(key,[data.params[key]])}}}}$slot.data("gpt",self.slots[data.id])});googletag.cmd.push(function(){self.display($slot)})}}})}},display:function($slots){if(this.verbose)console.log("gpt.display");if($slots.length){$slots.each(function(){var $slot=$(this);if($slot!==undefined){googletag.cmd.push(function(){googletag.display($slot.prop("id"))})}})}},refresh:function($slots){if(this.verbose)console.log("gpt.refresh");var self=this;if($slots.length){$slots.each(function(){var $slot=$(this);if($slot.data("gpt")!==undefined){googletag.cmd.push(function(){googletag.pubads().refresh([$slot.data("gpt")])})}else{self.define($slot)}})}}};var bizJ={market:null,init:function(){var bclass=this.browserClass();try{jQuery("body").addClass(bclass)}catch(e){bizJ.log(e)}this.buttonHover();this.processLogout();window.bizJReady=true;
if(typeof window.gpt=="undefined"){window.gpt=new Gpt}},buttonHover:function(){jQuery("button").hover(function(){jQuery(this).addClass("hover")},function(){jQuery(this).removeClass("hover")})},browserClass:function(){var $browser=jQuery.browser;if($browser.mozilla){if($browser.version<1.8){return"ff1"}else if($browser.version>1.8){return"ff2"}else{return"ff3"}}else if($browser.webkit){return"webkit"}else if($browser.opera){return"opera"}else{return"otherbrowser"}},createContainer:function(){if(!jQuery("body").hasClass("ie6")){jQuery(".mainContent .container, .ancContent .container").not(".container .container").each(function(i,el){jQuery(this).wrap('<div class="shadowBoxFoot"></div>').wrap("<div class='shadowBox'></div>")})}},processLogout:function(){jQuery("ul.dropdown-menu li.dropdown-item--logout a").on("click",function(e){bizJ.localStorage.removeItem("bizj.user");return true})}};bizJ.ct={init:function(el){jQuery(el).click(function(){var cttxt=jQuery(el).attr("ct");var props=jQuery(el).attr("opt");if(typeof props!="undefined"){var opt=jQuery.parseJSON(props);bizJ.clickTrack(cttxt,opt)}else{bizJ.clickTrack(cttxt)}})}};bizJ.clickTrack=function(cttxt,options){if(typeof cttest!="undefined"){cttxt=cttest+" "+cttxt}if(window.location.search.indexOf("clicktrackdebug=1")!=-1){if(typeof options=="object"){alert('Clicked: "'+cttxt+'" with options '+JSON.stringify(options))}else if(typeof options!="undefined"){alert('Clicked: "'+cttxt+'" with options '+options)}else{alert('Clicked: "'+cttxt+'" with no options ')}return false}if(typeof _satellite==="object"){_satellite.setVar("linkOptions",options);_satellite.setVar("linkName",cttxt);_satellite.track("clicktrack")}else{console.log("_satellite not found for script clicktrack")}return true};bizJ.localStorage={getItem:function(key){if(typeof localStorage!=="object")return;localStorage.getItem(key)},setItem:function(key,value){if(typeof localStorage!=="object")return;localStorage.setItem(key,value)},removeItem:function(key){if(typeof localStorage!=="object")return;localStorage.removeItem(key)}};bizJ.accordBox={init:function(el){var $accord=el.find(".accordion");if($accord.hasClass("all-closed")){jQuery("div.tab",$accord).prepend('<span class="ui-icon ui-icon-triangle-1-e"></span>');jQuery("div.content",$accord).hide()}else{jQuery("div.tab:eq(0)",$accord).prepend('<span class="ui-icon ui-icon-triangle-1-s"></span>').addClass("current");jQuery("div.tab:gt(0)",$accord).prepend('<span class="ui-icon ui-icon-triangle-1-e"></span>');jQuery("div.content:eq(0)",$accord).addClass("current");jQuery("div.content:gt(0)",$accord).hide()}jQuery("div.tab",$accord).click(function(){if(jQuery(this).hasClass("current")){jQuery(this).find("span.ui-icon").removeClass("ui-icon-triangle-1-s").addClass("ui-icon-triangle-1-e");jQuery(this).removeClass("current");jQuery("div.content.current",$accord).removeClass("current").slideUp()}else{jQuery("div.tab.current span.ui-icon",$accord).removeClass("ui-icon-triangle-1-s").addClass("ui-icon-triangle-1-e");jQuery("div.tab.current",$accord).removeClass("current");jQuery(this).find("span.ui-icon").removeClass("ui-icon-triangle-1-e").addClass("ui-icon-triangle-1-s");jQuery(this).addClass("current");jQuery("div.content.current",$accord).removeClass("current").slideUp();jQuery(this).next(".content").addClass("current").slideDown()}return false})}};bizJ.getMoreOoto={init:function(){jQuery("#more-galleries-button").click(function(){bizJ.ooto.init();var s="OPT: See More OOTO Galleries";bizJ.clickTrack(s);return false})}};bizJ.ooto={offset:0,init:function(){if(typeof smugmug_albums=="undefined"){return}var content="";this.offset=(page_no-1)*rows_per_page*galleries_per_row;var counter=this.offset;for(row_counter=0;row_counter<rows_per_page;row_counter++){if(smugmug_albums[counter]==undefined){break}for(gallery_counter=0;gallery_counter<galleries_per_row;gallery_counter++){if(smugmug_albums[counter]!=undefined){var id=smugmug_albums[counter].id;var key=smugmug_albums[counter].key;content+="<li>";content+='<span class="active" id="album_'+id+'" key="'+key+'">';content+='<a href="#" class="smgmg_img"></a>';content+='<a href="#" class="title"></a>';content+='<p class="img_count"></p>';content+="</span>";content+="</li>";counter++}}}jQuery(content).appendTo("#ooto > ul");bizJ.getSmugmugAlbumInfo("#ooto");jQuery("#more-galleries-button").attr("rel","getMoreOoto");this.offset=counter;if(counter>=smugmug_albums.length){jQuery("#more-galleries-button").css("display","none")}}};bizJ.getSmugmugAlbumInfo=function(el){jQuery("#ooto span.active").each(function(index){var id=jQuery(this).attr("id");var key=jQuery(this).attr("key");var url=service+"method=smugmug.albums.getInfo&Callback=?";var curr=this;jQuery(this).removeAttr("class");id=id.replace(/album_/,"");jQuery.getJSON(url,{AlbumID:id,AlbumKey:key,APIKey:api,NickName:nickname},function(albumInfo){if(albumInfo.stat=="fail"){jQuery(curr).parent().remove()}else{var title=albumInfo.Album.Title;var img_cnt=albumInfo.Album.ImageCount;var imageUrl="";jQuery("#album_"+id+" .title").html(title);jQuery("#album_"+id+" .img_count").html(img_cnt+"&nbsp;Photos");if(albumInfo.Album.Highlight){imageId=albumInfo.Album.Highlight.id;imageKey=albumInfo.Album.Highlight.Key;bizJ.getSmugmugImage(service,key,id,imageKey,imageId,"ThumbURL")}else{bizJ.getSmugmugImageFromAlbum(service,key,id,"ThumbURL")}}})})};bizJ.getSmugmugImageFromAlbum=function(service,albumKey,albumId,display){var url=service+"method=smugmug.images.get&Callback=?";var content;jQuery.getJSON(url,{AlbumID:albumId,AlbumKey:albumKey,APIKey:api,NickName:nickname},function(album){var imageId=album.Album.Images[0].id;var imageKey=album.Album.Images[0].Key;bizJ.getSmugmugImage(service,albumKey,albumId,imageKey,imageId,display)});return content};bizJ.getSmugmugImage=function(service,albumKey,albumId,imageKey,imageId,display){var url=service+"method=smugmug.images.getURLs&Callback=?";jQuery.getJSON(url,{ImageID:imageId,ImageKey:imageKey,APIKey:api,NickName:nickname},function(highlight){var img=new Image(width);img.onerror=function(){var html_to_move="<li>"+jQuery("#ooto ul:last li:last").html()+"</li>";jQuery("#album_"+albumId).parent().parent().append(html_to_move);jQuery("#album_"+albumId).parent().remove();jQuery("#ooto ul:last li:last").remove();jQuery("#ooto ul:empty").remove()};img.onload=function(){jQuery("#album_"+albumId+" .smgmg_img").html(this);var title=jQuery("#album_"+albumId+" a.title").html();var subbed_title=title.replace(/\s/g,"-");subbed_title+=".html";var subbed_url=slideshow_url.replace(/%25KEY-ID%25/,albumKey+"-"+albumId);subbed_url=subbed_url.replace(/%25SLUG%25/,subbed_title);jQuery("#album_"+albumId+" a").each(function(index){jQuery(this).attr("href",subbed_url)})};img.src=highlight.Image[display]})};bizJ.imageHolder={init:function(){jQuery("#imageHolder li").each(function(){var url=service+"method=smugmug.images.getInfo&Callback=?";var key_id=jQuery(this).attr("id");var n=key_id.indexOf("-");var key=key_id.substr(0,n);var id=key_id.substr(n+1);var request=document.URL;request=request.split("/");var count=request.length;var album_key_id=request[count-2];n=album_key_id.indexOf("-");var album_key=album_key_id.substr(0,n);var album_id=album_key_id.substr(n+1);jQuery.getJSON(url,{ImageID:id,ImageKey:key,APIKey:api,NickName:nickname},function(highlight){var img_url=highlight.Image.MediumURL;var buy='&nbsp;<a class="ct buy-image" ct="OPT: ooto buy link" target="_new" id="buy-smugmug-image-link" href="http://'+nickname+".smugmug.com/buy/"+album_id+"_"+album_key+"/"+id+"_"+key+'">Buy This Image</a>';var caption=highlight.Image.Caption;jQuery("#"+key_id).attr("rel",img_url);jQuery("#"+key_id+" div img").attr("src",img_url);jQuery("#"+key_id).append('<div class="galleryCaption"><p>'+caption+"</p></div>");jQuery("#"+key_id+" div.smugmug-buy").append(buy)})})}};bizJ.marketSelectWidget={init:function(el){el.change(function(){var location=window.location;url=location.protocol+"//"+location.host+"/"+el.val();window.location.href=url;return false})}};bizJ.stateSelectWidget={init:function(el){el.change(function(){var location=window.location;var url=location.protocol+"//"+location.host+location.pathname;if(location.search==""){url=url+"?state="+el.val()}else{var search=location.search.replace(/state=(\w*)&?/,"");if(search.charAt(search.length-1)=="&"){url=url+search+"state="+el.val()}else{url=url+search+"&state="+el.val()}url=url.replace(/pl=(\d*)&?/,"")}window.location.href=url;return false})}};bizJ.breakingNews={init:function(el){var breakingNews=jQuery('.executable[rel="breakingNews"]');var signUp=breakingNews.find('form button[name="breaking_email-signup"],form input[name="breaking_email-signup"]');breakingNews.find(".close--action").click(function(){breakingNews.slideUp("fast",function(){jQuery(this).remove()})});breakingNews.find(".breaking-news__sign-up").click(function(){jQuery(this).hide();breakingNews.find("form").show();return false});signUp.click(function(){var warning=jQuery(breakingNews).find(".warning_error100").first();var success=jQuery(breakingNews).find(".bs-alert.success").first();jQuery(warning).hide();var cttxt=jQuery(breakingNews).attr("ct");if(cttxt!=undefined){bizJ.clickTrack(cttxt)}if(!bizJ.validate.emailAddress(jQuery(breakingNews).find('form input[name="email"]').val())){jQuery(breakingNews).find("h3").hide();jQuery(warning).show().html("Please enter a valid Email Address.").addClass("bs-alert error");jQuery(breakingNews).find('form input[name="email"]').val("").focus();return false}jQuery.post("email/index.json?_method=LIGHTREGISTRATION",jQuery(breakingNews).find("form").serialize(),function(data){if(typeof data.message!="undefined"&&data.message.length>0&&data.error!=1){if(jQuery(breakingNews).find("h3").is(":hidden")){jQuery(breakingNews).find("h3").toggle()}jQuery(success).show().html("Thanks for signing up").addClass("jsonSuccess");jQuery(success).delay(3e3).fadeOut(500);jQuery(breakingNews).find("#hideable").hide();return false}else if(typeof data.message!="undefined"&&data.message.length>0){jQuery(breakingNews).find("h3").toggle();jQuery(success).show().html(data.message).addClass("jsonSuccess");return false}},"json");return false})}};bizJ.industryMore={init:function(el){el.click(function(){try{var target;if(el.hasClass("local")){target="local"}if(el.hasClass("national")){target="national"}if(el.hasClass("premiumexpand")){target="premium"}var count=jQuery("#industry-"+target+"-list > li").length;var industryCode=el.attr("ref");jQuery.post("ajax/ajax.json?_method=MOREINDUSTRIES",{count:count,industryCode:industryCode,type:target,market:bizJ.getMarket()},function(data){jQuery("#industry-"+target+"-list").append(data.more)})}catch(e){bizJ.log(e)}return false})}};bizJ.mySavedNewsMore={init:function(el){el.click(function(){try{var count=jQuery("#saved-articles > ul.favs > li").length;jQuery.post("ajax/ajax.json?_method=MORESAVEDMYNEWS",{count:count,market:bizJ.getMarket()},function(data){jQuery("#savedarticlesul").append(data.more);if(data.count<20){jQuery("#seemoresavednews").hide()}})}catch(e){bizJ.log(e)}return false})}};bizJ.addFavoriteIndustry={init:function(el){el.change(function(){if(el.val()!=""){jQuery.post("accountajax/index.json?_method=ADDFAVORITEINDUSTRY","&id="+el.val(),function(data){if(data.success==1){jQuery("#favoritedindustries").append('<li id="favindli-'+data.id+'">'+data.name+'<a href="#" class="executable" rel="removeFavoriteIndustry" id="favind-'+data.id+'">Remove</a></li>');jQuery("#industrySelect :selected").remove();if(jQuery("#industrySelect option").size()==1){jQuery("#industrySelect").hide()}bizJ.removeFavoriteIndustry.init(jQuery("#favind-"+data.id));jQuery("#industries-in .mynews-oobe").hide()}else if(data.error==1){alert("There was a problem adding this industry favorite.")}},"json")}return false})}};bizJ.removeFavoriteIndustry={init:function(el){el.click(function(){var inddata=jQuery(el).attr("id").split("-",2);var id=inddata[1];jQuery.post("accountajax/index.json?_method=REMOVEFAVORITEINDUSTRY","&id="+id,function(data){if(data.success==1){jQuery("#industrySelect").append('<option value="'+data.id+'">'+data.name+"</option>");jQuery("#industrySelect").show();el.closest("li").remove()}else if(data.error==1){alert("There was a problem removing this industry favorite.")}},"json");return false})}};bizJ.articleFollowIndustry={init:function(el){var ind_data=jQuery(el).attr("id").split("-",3);var industryid=ind_data[1],op="";jQuery(el).click(function(){if(jQuery(this).hasClass("follow")){op="ADDFAVORITEINDUSTRY"}else if(jQuery(this).hasClass("remove")){op="REMOVEFAVORITEINDUSTRY"}jQuery.post("accountajax/index.json?_method="+op,"&id="+industryid,function(data){if(data.error==1){jQuery(".industryMessage").html("<span style='color:#FF0000'>"+data.message+"</span>").show()}else if(!data.id){return}else if(jQuery(el).hasClass("follow")){jQuery(".industryMessage").html("").hide();jQuery("a.follow").each(function(){if(jQuery(this).attr("id")==jQuery(el).attr("id")){jQuery(this).removeClass("follow").addClass("remove");if(jQuery(this).children().length>0){jQuery(this).find("img").attr("src",jQuery(this).find("img").attr("src").replace(/follow/,"remove"))}if(!jQuery(this).hasClass("industryPageButton")){jQuery("span.industry-follow-btn-outer > .industry-follow-btn.remove").html("Follow");jQuery("span.industry-follow-btn-outer > .industry-follow-btn.remove").css("backgroundColor","green");jQuery(this).text("Following");jQuery(this).removeClass("industry-follow-add").addClass("industry-follow-delete");jQuery(this).parents("span.industry-follow-icon").find("a#industryFollowImg_false").attr("id","industryFollowImg_true")}}})}else if(jQuery(el).hasClass("remove")){jQuery(".industryMessage").html("").hide();jQuery("a.remove").each(function(){if(jQuery(this).attr("id")==jQuery(el).attr("id")){jQuery(this).removeClass("remove").addClass("follow");if(jQuery(this).children().length>0){jQuery(this).find("img").attr("src",jQuery(this).find("img").attr("src").replace(/remove/,"follow"))}if(!jQuery(this).hasClass("industryPageButton")){jQuery(this).text("Follow this industry");jQuery(this).removeClass("industry-follow-delete").addClass("industry-follow-add");jQuery("span.industry-follow-btn-outer > .industry-follow-btn.follow").css("backgroundColor","green");jQuery(this).parents("span.industry-follow-icon").find("a#industryFollowImg_true").attr("id","industryFollowImg_false")}}})}});return false})}};bizJ.industryToggle={init:function(el){el.click(function(){try{var target;if(el.hasClass("local")){target="local"}if(el.hasClass("national")){target="national"}if(el.hasClass("premiumexpand")){target="premium"}jQuery("#industry-"+target+"-list li.more").show();el.remove();jQuery("#industry-"+target+"-list-more").show()}catch(e){bizJ.log(e)}return false})}};bizJ.topicToggle={init:function(el){el.click(function(){try{var target;if(el.hasClass("wb")){target="wb"}if(el.hasClass("news")){target="news"}jQuery("#topic-"+target+"-list li.more").show();el.remove()}catch(e){bizJ.log(e)}return false})}};bizJ.collapseList={init:function(el){var btn=el.find(".seeMore");var ul=el.find("ul:first");if(!btn){return false}btn.click(function(){try{ul.children("li.more").show();btn.remove()}catch(e){bizJ.log(e)}return false})}};bizJ.carouselClick={init:function(el){el.click(function(event){if(!jQuery(event.target).is("a")){window.location.href=el.attr("ref");return false}})}};bizJ.netprospexsearch={init:function(el){el.submit(function(){var jobcat=el.find('select[name="job"]').val();var city=el.find('select[name="city"]').val();if(jobcat==0||city==0){alert("You must select a job title and a city.");return false}var label=jobcat.replace(/&/g,"");label=label.replace(/\s+/g,"_");label=label.toLowerCase();var url="http://www.netprospex.com/list/contacts/"+label+"?marketSID="+city+"&jobfunctionID="+jobcat+"&nav=market-jobfunction";window.location.href=url;return false})}};bizJ.businessLink={init:function(el){el.submit(function(){try{window.location.href="http://businessdirectory.bizjournals.com/"+bizJ.getMarket()+"/"+el.find('select[name="category"]').val()}catch(e){bizJ.log(e)}return false})}};bizJ.getMarket=function(){if(typeof bizJ.market!="undefined"){bizJ.market=jQuery('meta[name="market"]').attr("content")}return bizJ.market};bizJ.datePickerWidget={init:function(el){jQuery(".selector").datepicker({showOn:"both",buttonImage:"http://assets.bizjournals.com/lib/img/calendar8bits.png"});el.find("button.ui-datepicker-trigger img").wrap('<span class="calendar"></span>');jQuery("#ui-datepicker-div").wrap('<div class="datePickerWidget"></div>')}};bizJ.scrollToItem={init:function(el){}};bizJ.newsContainers={init:function(el){jQuery("div.expandableNewsBox").show();jQuery("div.hiddenNewsBox").hide();jQuery("div.newsHeaderBox").click(function(){jQuery(this).toggleClass("activeNews").next().slideToggle("slow")})}};bizJ.searchFilterMore={init:function(el){el.find("ul.moreSearch").hide();jQuery("a.search-more").toggle(function(){jQuery(this).parent().parent().siblings(".moreSearch").slideDown().end().end().end().text("Less").attr("class","hide")},function(){jQuery(this).parent().parent().siblings(".moreSearch").slideUp().end().end().end().text("More").attr("class","show")})}};bizJ.lbdFeatured={init:function(el){this.list=el;this.marginTop="-145px";this.timeOut=5e3;this.duration=800;this.verbose=1;bizJ.log(this.count);this.reset();this.autoRotate(0)},autoRotate:function(start){if(start==null)start=1;var self=this;if(start){this.list.animate({marginTop:this.marginTop},this.duration,function(){self.cycle()})}if(this.verbose)bizJ.log("autoRotate waiting "+this.timeOut);this.timeOutId=setTimeout("bizJ.lbdFeatured.autoRotate()",this.timeOut)},reset:function(){this.list.css("margin-top","0px")},cycle:function(){var $item=this.list.find("li:first").clone();this.list.append($item);this.list.find("li:first").remove();this.reset()}};bizJ.shareIcons={is_init:0,init:function(){if(this.is_init)return;this.is_init=1;jQuery(".twitterIcon a").click(function(){window.open(jQuery(this).attr("href"),"","width=550,height=450");return false});jQuery(".linkedInIcon a").click(function(){window.open(jQuery(this).attr("href"),"","width=500,height=520");return false});jQuery(".facebookIcon a").click(function(){window.open(jQuery(this).attr("href"),"","width=550,height=450");return false})}};bizJ.tabBox={init:function(el){var $tabItems=el.find("ul.tabItems");var $tabContent=el.find("div.tabContent");this.$tabContent=$tabContent;this.$tabItems=$tabItems;$tabItems.children().each(function(index,item){jQuery(item).addClass("tab"+index).click(function(){jQuery("li.current",$tabItems).removeClass("current");jQuery("li:eq("+index+")",$tabItems).addClass("current");jQuery("div.current",$tabContent).removeClass("current").hide();jQuery("div.content:eq("+index+")",$tabContent).addClass("current").show()})});var hash=window.location.hash.substring(1);if(hash.substring(0,6)=="tabid:"){var tabId=hash.substring(6);jQuery("li#tab"+tabId+"",$tabItems).addClass("current");jQuery("div.content#tab"+tabId+"Content",$tabContent).addClass("current");jQuery("div.content:not(#tab"+tabId+"Content)",$tabContent).hide()}else{var tabIndex=0;if(hash.substring(0,9)=="tabindex:"){tabIndex=hash.substring(9)}jQuery("li:eq("+tabIndex+")",$tabItems).addClass("current");jQuery("div.content:eq("+tabIndex+")",$tabContent).addClass("current");jQuery("div.content:lt("+tabIndex+")",$tabContent).hide();jQuery("div.content:gt("+tabIndex+")",$tabContent).hide()}},goTo:function(index){jQuery("li.current",this.$tabItems).removeClass("current");jQuery("li:eq("+index+")",this.$tabItems).addClass("current");jQuery("div.current",this.$tabContent).removeClass("current").hide();jQuery("div.content:eq("+index+")",this.$tabContent).addClass("current").show()}};bizJ.membersOnly={init:function(el){this.newsContainersBox(el);bizJ.tabBox.init(el)},newsContainersBox:function(el){jQuery("div.expandableNewsBox").show();jQuery("h3.newsHeaderBox").click(function(){jQuery(this).toggleClass("activeNews").next().slideToggle("slow")})}};bizJ.adCarousel={init:function(el){var $firstItem=jQuery("div.items div:eq(0)",el);var totalWidth=$firstItem.outerWidth()+parseInt($firstItem.css("margin-left").replace(/\.px/,""))+parseInt($firstItem.css("margin-right").replace(/\.px/,""));var itemCount=jQuery("div.items",el).children().length;if(itemCount==2){jQuery("div.items",el).append(jQuery("div.items div:eq(0)",el).clone().addClass("cloned"),jQuery("div.items div:eq(1)",el).clone().addClass("cloned"))}if(itemCount>1){jQuery("div.items",el).prepend(jQuery("div.items div:last",el));jQuery("div.items",el).css("left","-"+totalWidth+"px");jQuery("a.next",el).click(function(){jQuery("div.items",el).animate({left:"-="+totalWidth},{complete:function(){jQuery("div.items",el).append(jQuery("div.items div:eq(0)",el));jQuery("div.items",el).css("left","-"+totalWidth+"px")}});return false});jQuery("a.prev",el).click(function(){jQuery("div.items",el).animate({left:"+="+totalWidth},{complete:function(){jQuery("div.items",el).prepend(jQuery("div.items div:last",el));jQuery("div.items",el).css("left","-"+totalWidth+"px")}});return false})}}};bizJ.imageGallery={init:function(el){var self=this;this.current_pos=1;if(match=window.location.search.match(/img_no=([\d]+)?/)){if(match[1]!=undefined)this.current_pos=parseInt(match[1])}this.gallery=jQuery("ul.imageHolder li.imageText",el);this.image_count=this.gallery.length;this.last_pos=this.image_count;this.photo_link=jQuery("#linkToPhoto");this.updatePhotoLink();var refUrl=window.location.href;this.mboxTracking();this.show_google_survey=true;if(this.show_google_survey===false){jQuery(".photoGallery .body").removeClass("p402_premium");jQuery(".photoGallery .articleContentWrapper").removeClass("p402_hide")}else{this.google_survey_id=jQuery(el).attr("data-google-survey-id");if(this.google_survey_id!=""){this.google_survey_id=parseInt(this.google_survey_id,10)}else{this.show_google_survey=false}}if(this.current_pos>this.image_count){this.current_pos=this.image_count}if(!el.hasClass("onlyShowFirst")){self.nav={prev:el.find("a.prevPhoto"),next:el.find("a.nextPhoto")};self.nav.prev.click(function(){try{self.refreshAds();self.loadArt(self.current_pos==1?self.last_pos:self.current_pos-1)}catch(e){window.location.href=self.nav.prev.attr("href")}self.processClick(refUrl);return false});self.nav.next.click(function(){try{self.refreshAds();self.loadArt(self.current_pos==self.last_pos?1:self.current_pos+1)}catch(e){window.location.href=self.nav.next.attr("href")}self.processClick(refUrl);return false});self.updateNav()}if(this.current_pos==1||this.current_pos>this.last_pos){this.loadArt(1,false);this.loadArt(this.last_pos,true)}else{this.loadArt(this.current_pos);this.loadArt(this.current_pos+1,true);this.loadArt(this.current_pos-1,true)}},loadArt:function(pos,preload){if(preload==undefined)preload=false;var $art=jQuery(this.gallery[pos-1]);if(!$art.hasClass("loaded")){$art.find("img").attr("src",$art.attr("rel"));$art.addClass("loaded")}if(preload==false){this.current_pos=pos;this.gallery.hide();$art.show();if(this.current_pos+2<this.last_pos)this.loadArt(this.current_pos+2,true);if(this.current_pos>0)this.loadArt(this.current_pos-1,true)}},processClick:function(refUrl){if(this.show_google_survey){if(this.current_pos==5){this.loadGoogleSurvey(this.google_survey_id,window.location.href,(new Date).getTime());this.show_google_survey=false}}this.updatePhotoLink();this.updateNav();this.tracking(refUrl)},updatePhotoLink:function(){var orig_link=jQuery("#linkToPhoto").attr("value");if(orig_link){var indexOfImgNo=orig_link.indexOf("img_no=");if(indexOfImgNo!=-1){var linkToPhoto=orig_link.substring(0,indexOfImgNo+7)+this.current_pos}else{var exploded=orig_link.split("/");exploded[5]=this.current_pos;var linkToPhoto=exploded.join("/")}this.photo_link.val(linkToPhoto)}},updateNav:function(){var next=this.current_pos+1<=this.last_pos?this.current_pos+1:1;jQuery("#currentImage").attr("value",this.current_pos);if(next==1){jQuery("#nextNavigation").addClass("disabled")}else{jQuery("#nextNavigation").removeClass("disabled")}var prev=this.current_pos-1>0?this.current_pos-1:this.last_pos;if(this.current_pos==1){jQuery("#prevNavigation").addClass("disabled")}else{jQuery("#prevNavigation").removeClass("disabled")}},refreshAds:function(){if(typeof googletag.pubads()==="object"){if(typeof googletag.pubads().refresh==="function"){var $slots=$(".gpt").filter(":visible").not('[data-position="mostpopular"]');if($slots.length){window.gpt.refresh($slots)}}}},tracking:function(refUrl){var pos="00"+this.current_pos;slideNum=pos.substr(pos.length-3);if(refUrl!==undefined){aaData.refUrl=refUrl}aaData.slideNo="Slide:"+slideNum;if(typeof _satellite==="object"){_satellite.track("gallery")}else{console.log("satellite not found for gallery")}this.mboxTracking()},mboxTracking:function(){if(typeof mboxTrack!="undefined"){for(var slotId=0;slotId<4;slotId++){var galleryId=jQuery('meta[property="gallery:id"]').attr("content"),templateId=jQuery('meta[property="template:id"]').attr("content"),mboxName="slideshow_ad_"+templateId,mboxParams=jQuery.param({gallery_id:galleryId,slot_id:"00"+slotId});if(galleryId){mboxTrack(mboxName,mboxParams)}}}},loadGoogleSurvey:function(siteId,articleUrl,contentId){var SITE_ID=siteId;var ARTICLE_URL=articleUrl;var CONTENT_ID=contentId||"";var el=document.createElement("script");var url="http://survey.g.doubleclick.net/survey?site="+SITE_ID+"&url="+encodeURIComponent(ARTICLE_URL)+(CONTENT_ID?"&cid="+encodeURIComponent(CONTENT_ID):"")+"&random="+(new Date).getTime()+"&after=1";el.setAttribute("src",url);var head=document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0];head.appendChild(el)}};bizJ.bizWatch={init:function(el){var recon_data=jQuery(el).attr("id").split("-");var reconid=recon_data[1],company=recon_data.slice(2).join("-"),op="";jQuery(el).click(function(){if(jQuery(this).hasClass("follow")){op="follow"}else if(jQuery(this).hasClass("remove")){op="remove"}jQuery.post("user/bizwatch/reconid/"+reconid+"/company/"+company+"/op/"+op+"/index.json",function(data){if(typeof data.response.error!="undefined"&&data.response.error.length>0){jQuery(".bizwatchMessage").html("<span style='color:#FF0000'>"+data.response.error+"</span>").show()}else if(!data.response.company){return}else if(jQuery(el).hasClass("follow")){jQuery(".bizwatchMessage").html("").hide();jQuery("a.follow").each(function(){if(jQuery(this).attr("id")==jQuery(el).attr("id")){jQuery(this).removeClass("follow").addClass("remove");jQuery("span.follow-btn-outer > .follow-btn.remove").html("Following");jQuery("span.follow-btn-outer > .follow-btn.remove").css("backgroundColor","green");jQuery(this).parents("span.follow-icon").find("a#bizWatchFollowImg_false").attr("id","bizWatchFollowImg_true");if(jQuery(this).children().length>0){jQuery(this).find("img").attr("src",jQuery(this).find("img").attr("src").replace(/follow/,"remove"))}else{jQuery(this).text("Following")}}})}else if(jQuery(el).hasClass("remove")){jQuery(".bizwatchMessage").html("").hide();jQuery("a.remove").each(function(){if(jQuery(this).attr("id")==jQuery(el).attr("id")){jQuery(this).removeClass("remove").addClass("follow");jQuery("span.follow-btn-outer > .follow-btn.follow").css("backgroundColor","green");jQuery(this).parents("span.follow-icon").find("a#bizWatchFollowImg_true").attr("id","bizWatchFollowImg_false");if(jQuery(this).children().length>0){jQuery(this).find("img").attr("src",jQuery(this).find("img").attr("src").replace(/remove/,"follow"))}else{jQuery(this).text("Follow this company")}}})}});return false})}};bizJ.bizWatchMyNews={init:function(el){var recon_data=jQuery(el).attr("id").split("-",3);var reconid=recon_data[1],company=recon_data[2],op="";jQuery(el).click(function(){if(jQuery(this).hasClass("followlink")){op="follow"}else if(jQuery(this).hasClass("removelink")){op="remove"}jQuery.post("user/bizwatch/reconid/"+reconid+"/company/"+company+"/op/"+op+"/index.json",function(data){if(typeof data.response.error!="undefined"&&data.response.error.length>0){jQuery(".bizwatchMessage").html("<span style='color:#FF0000'>"+data.response.error+"</span>").show()}else if(!data.response.company){return}else if(jQuery(el).hasClass("followlink")){jQuery(".bizwatchMessage").html("").hide();jQuery("a.followlink").each(function(){if(jQuery(this).attr("id")==jQuery(el).attr("id")){jQuery(this).removeClass("followlink").addClass("removelink");jQuery(this).text("Following")}})}else if(jQuery(el).hasClass("removelink")){jQuery(".bizwatchMessage").html("").hide();jQuery("a.removelink").each(function(){if(jQuery(this).attr("id")==jQuery(el).attr("id")){jQuery(this).removeClass("removelink").addClass("followlink");jQuery(this).text("Follow")}})}});return false})}};bizJ.processLogin={init:function(el){el.submit(function(){jQuery("#loginprogress").show();jQuery(document).ajaxError(function(e,xhr,settings,exception){alert("Sorry, a server error was encountered during login processing.");return false});jQuery(".warning_error,.warning_error100").hide();if(!bizJ.validate.emailAddress(el.find('input[name="email"]').val())){jQuery("#loginprogress").hide();el.find('input[name="email"]').val("").focus();jQuery("#emailError").show().html("Please enter a valid Email address.");return false}jQuery.post("auth/index.json?_method=LOGIN",el.serialize(),function(data){jQuery("#loginprogress").hide();if(typeof data.redirect!="undefined"&&data.redirect.length>0){bizJ.localStorage.removeItem("bizj.user");window.location.href=data.redirect;return false}if(typeof data.erroremail!="undefined"&&data.erroremail.length>0){jQuery("#emailError").show().html(data.erroremail)}if(typeof data.errorpassword!="undefined"&&data.errorpassword.length>0){jQuery("#passwordError").show().html(data.errorpassword)}if(typeof data.loginmessage!="undefined"&&data.loginmessage.length>0){jQuery("#loginError").show().html(data.loginmessage)}var resetLink=jQuery("#passwordlink").attr("href");if(typeof data.reason!="undefined"){resetLink+=(resetLink.match("/?/")?"&":"?")+"reason="+data.reason}if(typeof data.emptyPassword!="undefined"&&data.emptyPassword.length>0){document.location=resetLink}if(typeof data.showForgotPassword!="undefined"){document.location=resetLink}},"json");return false})}};bizJ.receiveToken={init:function(el){jQuery.post("auth/index.json?_method=PROCESSTOKEN",jQuery("#loginengage").serialize(),function(data){if(typeof data.redirect!="undefined"&&data.redirect.length>0){window.location.href=data.redirect}if(typeof data.engagemessage!="undefined"&&data.engagemessage.length>0){jQuery("#loginEngageError").show().html(data.engagemessage)}},"json")}};bizJ.resetPass={init:function(el){var self=this;el.submit(function(){jQuery("#forgotprogress").show();jQuery(".warning_error").hide();if(!bizJ.validate.emailAddress(el.find('input[name="forgotpass"]').val())){jQuery("#forgotprogress").hide();el.find('input[name="forgotpass"]').val("").focus();jQuery("#forgotPassError").show().html("Please enter a valid Email Address");jQuery("#fancybox-inner").height(200);jQuery("#fancybox-wrap").height(200);return false}jQuery.post("email/index.json?_method=RESETPASS",el.serialize(),function(data){jQuery("#forgotprogress").hide();if(data.error==1){jQuery("#forgotPassError").show().html(data.message);jQuery("#fancybox-inner").height(200);jQuery("#fancybox-wrap").height(200)}else{jQuery("#forgotPassError").show().html(data.message)}},"json");return false})}};bizJ.register={init:function(el){var self=this;el.submit(function(){jQuery(".warning_error").hide();jQuery("#registerprogress").show();jQuery('#accountRegistrationform input[type="text"]').removeClass("smlMargin");jQuery.post("accountajax/register.json?_method=REGISTER",el.serialize(),function(data){jQuery('button[name="registersubmit"]').attr("disabled","disabled");jQuery("#registerprogress").hide();if(data.error==1){jQuery('button[name="registersubmit"]').removeAttr("disabled");if(typeof data.message!="undefined"){jQuery("#accountRegistrationformError").show().html(data.message)
}if(typeof data.errors!="undefined"){for(var i in data.errors){jQuery("#accountRegistrationformError"+i).show().html(data.errors[i]);jQuery("input[name="+i+"]").addClass("smlMargin")}}}else{jQuery("#accountRegistrationformError").show().html(data.message);jQuery("html").animate({scrollTop:0},"slow");if(typeof data.redirect!="undefined"){window.location.href=data.redirect;return false}}},"json");return false})}};function registerCheckEmail(el){var emailValue=jQuery(el).val();if(bizJ.validate.emailAddress(emailValue)){jQuery("#emailAddressValidated").show()}else{jQuery("#emailAddressValidated").hide()}}bizJ.registerCompleteProfile={init:function(el){var self=this;el.submit(function(){jQuery(".warning_error").hide();jQuery("#registerselectprogress").show();jQuery('#accountRegistrationselectform input[type="text"]').removeClass("smlMargin");if(typeof visitor!="undefined"){var mcID=visitor.getMarketingCloudVisitorID();var analyticsID=visitor.getAnalyticsVisitorID();if(jQuery("#visitorid").length){jQuery("#visitorid").val(analyticsID)}if(jQuery("#marketingcloudvisitorid").length){jQuery("#marketingcloudvisitorid").val(mcID)}}jQuery.post("accountajax/register.json?_method=COMPLETE",el.serialize(),function(data){jQuery("#registerselectprogress").hide();if(data.error==1){if(typeof data.message!="undefined"){jQuery("#accountRegistrationselectformError").show().html(data.message)}if(typeof data.errors!="undefined"){for(var i in data.errors){jQuery("#accountRegistrationselectformError"+i).show().html(data.errors[i]);jQuery("input[name="+i+"]").addClass("smlMargin")}}}else{jQuery("#accountRegistrationselectformError").show().html(data.message);jQuery("html").animate({scrollTop:0},"slow");if(typeof data.redirect!="undefined"){window.location.href=data.redirect;return false}}},"json");return false})}};bizJ.registerSelect={init:function(el){var self=this;el.submit(function(){jQuery(".warning_error").hide();jQuery("#registerselectprogress").show();jQuery('#accountRegistrationselectform input[type="text"]').removeClass("smlMargin");jQuery.post("accountajax/register.json?_method=SELECT",el.serialize(),function(data){jQuery("#registerselectprogress").hide();if(data.error==1){if(typeof data.message!="undefined"){jQuery("#accountRegistrationselectformError").show().html(data.message)}if(typeof data.errors!="undefined"){for(var i in data.errors){jQuery("#accountRegistrationselectformError"+i).show().html(data.errors[i]);jQuery("input[name="+i+"]").addClass("smlMargin");if(i=="email"){jQuery("#emailAddressValidated").hide()}}}}else{jQuery("html").animate({scrollTop:0},"slow");if(typeof data.register!="undefined"){window.location.href=data.register;return false}}},"json");return false})}};bizJ.registerReceiveToken={init:function(el){jQuery.post("auth/index.json?_method=PROCESSTOKEN",jQuery("#accountRegistrationselectform").serialize(),function(data){if(typeof data.redirect!="undefined"&&data.redirect.length>0){window.location.href=data.redirect}if(typeof data.engagemessage!="undefined"&&data.engagemessage.length>0){jQuery("#accountRegistrationselectformError").show().html(data.engagemessage)}if(data.error==1){if(typeof data.message!="undefined"){jQuery("#accountRegistrationselectformError").show().html(data.message)}if(typeof data.errors!="undefined"){for(var i in data.errors){jQuery("#accountRegistrationselectformError"+i).show().html(data.errors[i]);jQuery("input[name="+i+"]").addClass("smlMargin")}}}},"json")}};bizJ.directoryPopup=function(){if(jQuery("#addLocalDirectory").attr("checked")){window.open("http://businessdirectory.bizjournals.com/claim/add","Business Directory","width=1000,height=900,menubar=yes,status=yes,scrollbars=yes")}};bizJ.subscribeAddList=function(type,product,name){if(product==""){return}jQuery("#ul_"+type+" .subscribeBtn").remove();jQuery("#ul_"+type).append('<li><input id="subscribe::'+urlEscape.encode(type)+"::"+urlEscape.encode(product)+'" name="subscribe::'+urlEscape.encode(type)+"::"+urlEscape.encode(product)+'" type="checkbox" value="checked" class="checkbox" checked="true"/><label for="subscribe::'+urlEscape.encode(type)+"::"+urlEscape.encode(product)+'">'+name+'</label> <button value="submit" class="subscribeBtn redButton inline"><span>Subscribe</span></button></li>');jQuery("#sel_"+type+" option[value='"+urlEscape.encode(product)+"']").remove();if(jQuery("#sel_"+type+" option").size()==1){jQuery("#sel_"+type).hide();jQuery("#addButton_"+type).hide()}};bizJ.addList=function(type,product,name){if(product==""){return}jQuery("#ul_"+type).append('<li><input id="subscribe::'+urlEscape.encode(type)+"::"+urlEscape.encode(product)+'" name="subscribe::'+urlEscape.encode(type)+"::"+urlEscape.encode(product)+'" type="checkbox" value="checked" class="checkbox" checked="true"/><label for="subscribe::'+urlEscape.encode(type)+"::"+urlEscape.encode(product)+'">'+name+"</label></li>");jQuery("#sel_"+type+" option[value='"+urlEscape.encode(product)+"']").remove();if(jQuery("#sel_"+type+" option").size()==1){jQuery("#sel_"+type).hide();jQuery("#addButton_"+type).hide()}};bizJ.newsletterAddList=function(type,product,name){if(product==""){return}var idName="subscribe::"+urlEscape.encode(type)+"::"+urlEscape.encode(product);var ul=jQuery("#ul_"+type);ul.append('<li><input id="'+idName+'" name="'+idName+'" type="checkbox" value="checked" class="checkbox" checked="true"/><label for="subscribe::'+urlEscape.encode(type)+"::"+urlEscape.encode(product)+'">'+name+"</label></li>");jQuery("#sel_"+type+" option[value='"+urlEscape.encode(product)+"']").remove();if(jQuery("#sel_"+type+" option").size()==1){jQuery("#sel_"+type).hide();jQuery("#addButton_"+type).hide()}var newEl=ul.find(':input[name="'+idName+'"]');bizJ.newsletterChange(newEl)};bizJ.newsletterChange=function(e){if(jQuery(".userLoggedIn").length){var id=jQuery(e).attr("id");var formType=jQuery(e).attr("type");var sendData={};if(id.indexOf("::")!==-1){var idElements=id.split("::");sendData["type"]=idElements[1];sendData["id"]=idElements[2]}else{sendData["type"]=id;sendData["id"]="none"}if(jQuery(e).is(":checked")){sendData["action"]="add"}else{sendData["action"]="remove"}var queries={};jQuery.each(document.location.search.substr(1).split("&"),function(c,q){var i=q.split("=");if(typeof i[1]!="undefined"){queries[i[0].toString()]=i[1].toString()}});if(typeof(queries["ana"]!="undefined")){sendData["ana"]=queries["ana"]}if(typeof(queries["iana"]!="undefined")){sendData["iana"]=queries["iana"]}if(typeof(queries["email_st"]!="undefined")){sendData["email_st"]=queries["email_st"]}sendData["caller"]=jQuery("#caller").val();sendData["newsmarket"]=jQuery("#newsmarket").val();jQuery(".warning_error").hide();jQuery(".complete_success").hide();jQuery.post("accountajax/index.json?_method=NEWSLETTER",sendData,function(data){if(data.error==1){if(data.logged_in==1&&typeof data.message!="undefined"){jQuery("#warning_".sendData["type"]).show().html(data.message)}}else if(data.success==1){jQuery("#success_"+sendData["type"]).show().html(data.message).delay(2e3).fadeOut(300)}},"json")}};bizJ.newsletterPublic={init:function(el){var self=this;jQuery("div.newsHeaderBox").click(function(){jQuery(this).toggleClass("activeNews").next().slideToggle("slow")});jQuery("#newsletterPromoForm").on("change",':input[type="checkbox"]',function(){bizJ.newsletterChange(this)})}};bizJ.newsletterPage={init:function(el){var self=this;jQuery("div.newsHeaderBox").click(function(){jQuery(this).toggleClass("activeNews").next().slideToggle("slow")});jQuery("#newsletterForm").on("change",':input[type="checkbox"]',function(){bizJ.newsletterChange(this)})}};bizJ.hideParent={init:function(el){jQuery(el).click(function(){jQuery(this).parent().hide();return false})}};bizJ.newslettersubmitForm=function(){jQuery("#newsletterForm").submit()};bizJ.caslsubmitForm=function(){if(jQuery("#email_input").val()&&jQuery("#postal_code_input").val()){jQuery("#caslForm").submit()}else{jQuery("#contact_error").show()}};bizJ.businessInfo={init:function(el){var self=this;el.submit(function(){jQuery(".warning_error").hide();jQuery("#binfoprogress").show();jQuery('#accountbusinessinfoform input[type="text"]').removeClass("smlMargin");jQuery.post("accountajax/index.json?_method=BUSINESSINFO",el.serialize(),function(data){jQuery("#binfoprogress").hide();if(data.error==1){if(typeof data.message!="undefined"){jQuery("#businessInfoFormError").show().html(data.message)}if(typeof data.errors!="undefined"){for(var i in data.errors){jQuery("#businessInfoFormError"+i).show().html(data.errors[i]);jQuery("input[name="+i+"]").addClass("smlMargin")}}}else{jQuery("#businessInfoFormSuccess").show().find("#businessInfoFormSuccessMsg").html(data.message);jQuery("html").animate({scrollTop:0},"slow");if(typeof data.redirect!="undefined"){window.location.href=data.redirect;return false}}},"json");return false})}};bizJ.personalizeAcct={init:function(el){var self=this;el.submit(function(){jQuery(".warning_error").hide();jQuery('#accountpersonalizeform input[type="text"]').removeClass("smlMargin");jQuery("#personalizeprogress").show();jQuery.post("accountajax/index.json?_method=PERSONALIZE",el.serialize(),function(data){jQuery("#personalizeprogress").hide();if(data.error==1){if(typeof data.message!="undefined"){jQuery("#personalizeFormError").show().html(data.message)}if(typeof data.errors!="undefined"){for(var i in data.errors){jQuery("#personalizeFormError"+i).show().html(data.errors[i]);jQuery("input[name="+i+"]").addClass("smlMargin")}}}else{jQuery("#personalizeFormSuccess").show().find("#personalizeFormSuccessMsg").html(data.message);jQuery("html").animate({scrollTop:0},"slow");if(typeof data.redirect!="undefined"){window.location.href=data.redirect;return false}}},"json");return false})}};bizJ.addJanRainEmail={init:function(el){var self=this;el.submit(function(){jQuery(".warning_error").hide();jQuery.post("accountajax/index.json?_method=ADDJANRAINEMAIL",el.serialize(),function(data){if(data.error==1){if(typeof data.message!="undefined"){jQuery("#addJanRainEmailError").show().html(data.message)}}else{jQuery("#addJanRainEmailError").show().html(data.message);window.location.reload()}},"json");return false})}};bizJ.editProfile={init:function(el){var self=this;el.submit(function(){jQuery(".warning_error").hide();jQuery('#accountprofileform input[type="text"]').removeClass("smlMargin");jQuery("#editprofileprogress").show();jQuery.post("accountajax/index.json?_method=USERPROFILE",el.serialize(),function(data){jQuery("#editprofileprogress").hide();if(data.error==1&&typeof data.redirect!==null){if(typeof data.message!="undefined"){jQuery("#profileFormError").show().html(data.message)}if(typeof data.errors!="undefined"){for(var i in data.errors){jQuery("#profileFormError"+i).show().html(data.errors[i]);jQuery("input[name="+i+"]").addClass("smlMargin")}}}else{jQuery("#profileFormSuccess").show().find("#profileFormSuccessMsg").html(data.message);jQuery("#newPassword").val("");jQuery("#confirmPassword").val("");jQuery("html").animate({scrollTop:0},"slow");if(typeof data.redirect!="undefined"){window.location.href=data.redirect;return false}}},"json");jQuery(".toggle1").next().hide(400);return false})}};bizJ.updateInfo={init:function(el){var self=this;el.submit(function(){jQuery(".warning_error").hide();jQuery('#defaultupdateinfoform input[type="text"]').removeClass("smlMargin");jQuery("#updateinfoprogress").show();jQuery.post("accountajax/index.json?_method=UPDATEINFO",el.serialize(),function(data){jQuery("#updateinfoprogress").hide();if(data.error==1&&typeof data.redirect!==null){if(typeof data.message!="undefined"){jQuery("#profileFormError").show().html(data.message)}if(typeof data.errors!="undefined"){for(var i in data.errors){jQuery("#profileFormError"+i).show().html(data.errors[i]);jQuery("input[name="+i+"]").addClass("smlMargin")}}}else{jQuery("#profileFormSuccess").show().find("#profileFormSuccessMsg").html(data.message);jQuery("html").animate({scrollTop:0},"slow");if(typeof data.redirect!="undefined"){window.location.href=data.redirect;return false}}},"json");return false})}};bizJ.mergePrint={init:function(el){var self=this;el.submit(function(){jQuery("#mergeprogress").show();jQuery(".warning_error").hide();jQuery('#accountmergeprintform input[type="text"]').removeClass("smlMargin");jQuery.post("accountajax/index.json?_method=MERGEPRINT",el.serialize(),function(data){jQuery("#mergeprogress").hide();if(data.error==1){if(typeof data.message!="undefined"){jQuery("#mergeprintFormError").show().html(data.message)}if(typeof data.errors!="undefined"){for(var i in data.errors){jQuery("#mergeprintFormError"+i).show().html(data.errors[i]);jQuery("input[name="+i+"]").addClass("smlMargin")}}}else{alert(data.message);if(typeof data.redirect!="undefined"){window.location.href=data.redirect}return false}},"json");return false})}};function refreshCaptchaImage(){jQuery.post("bizjournals/poll/captchaimage",{id:0},function(data){if(data.id!=""){jQuery("#captcha_image").get(0).src="data:image/png;base64,"+data.src;jQuery("#captcha_id").get(0).value=data.id;jQuery("#captcha_input").get(0).value="";jQuery("#captcha_warning").hide()}});return false}bizJ.pollVote={init:function(el){var self=this;el.submit(function(){jQuery.post("bizjournals/poll/jsonvote",el.serialize(),function(data){if(data.status=="ok"){jQuery("#captcha_warning").html("<span>Vote accepted</span>");if(data.redirect){var url="http://"+window.location.host+"/"+data.redirect;window.location.href=url}}else{if(data.captcha_id!=""){jQuery("#captcha_image").get(0).src="data:image/png;base64,"+data.captcha_src;jQuery("#captcha_id").get(0).value=data.captcha_id;jQuery("#captcha_input").get(0).value=""}jQuery("#captcha_warning").html("<span>"+data.message+"</span>");jQuery("#captcha_warning").show()}},"json");return false})}};bizJ.admiredCeoVote={init:function(el){var self=this;el.submit(function(){jQuery.post("bizjournals/poll/admiredceovote",el.serialize(),function(data){if(data.status=="ok"){if(data.redirect){var url="http://"+window.location.host+"/"+data.redirect;window.location.href=url}}else{jQuery("#error-message").html(data.message)}},"json");return false})}};bizJ.refreshAds=function(){var $ads=jQuery("iframe.ad-impression");$ads.each(function(){var $ad=jQuery(this).clone(),$parent=jQuery(this).parent();$parent.children().remove();$parent.append($ad)})};bizJ.openEmailArticleForm=function(){jQuery("#emailArticleForm").show()};bizJ.sendEmailArticle={init:function(el){var self=this;el.submit(function(){jQuery("#emailArticleError").hide();jQuery("#emailArticleSuccess").hide();jQuery("#emailarticleprogress").show();jQuery("button[type=submit]",this).attr("disabled","disabled");if(!jQuery("#emailFrom").val()){jQuery("#emailarticleprogress").hide();jQuery("#emailArticleError").show().html("Your Email Address is required.");jQuery("button[type=submit]",this).removeAttr("disabled")}if(!jQuery("#emailTo").val()){jQuery("#emailarticleprogress").hide();jQuery("#emailArticleError").show().html("Email address of friend is required.");jQuery("button[type=submit]",this).removeAttr("disabled");return false}var widgetId=jQuery("#emailArticleForm .g-recaptcha").data("wid");if(jQuery(el).data("submit")=="socialEmail"){return false}jQuery.post("email/index.json?_method=EMAILAFRIEND",el.serialize(),function(data){jQuery("#emailarticleprogress").hide();if(typeof grecaptcha!="undefined"){grecaptcha.reset(widgetId)}if(data.error==0){jQuery("#emailArticleForm").hide();jQuery("#emailArticleSuccess").show().html(data.message)}else{jQuery("#emailArticleError").show().html(data.message)}jQuery("#emailArticleForm").find(":submit").removeAttr("disabled")},"json").fail(function(){jQuery.post("email/index.json?_method=EMAILAFRIEND",el.serialize(),function(data){jQuery("#emailarticleprogress").hide();if(typeof grecaptcha!="undefined"){grecaptcha.reset(widgetId)}if(data.error==0){jQuery("#emailArticleForm").hide();jQuery("#emailArticleSuccess").show().html(data.message)}else{jQuery("#emailArticleError").show().html(data.message)}jQuery("#emailArticleForm").find(":submit").removeAttr("disabled")},"json")});return false})}};bizJ.sendEventNetworkingMessage={init:function(el){var self=this;el.submit(function(){var tbody=jQuery(this).attr("tbody");var isvalid=true;var msg="";jQuery.each(jQuery(el).serializeArray(),function(i,field){if(field.name=="event_message"&&field.value==""){isvalid=false;msg+="Please enter a message."}});if(!isvalid){alert(msg)}else{jQuery.post("email/index.json?_method=EVENTNETWORKING",el.serialize(),function(data){if(data.error==0){jQuery("#"+tbody).html('<tr><td colspan="2"><p style="font-size:12px;color:#1E79E9;">Your message has been sent to '+data.name+"</p></td></tr>")}else if(data.error==1){jQuery("#"+tbody).html('<tr><td colspan="2"><p style="font-size:12px;color:#1E79E9;">Sorry, our records indicate you have sent 5 messages to attendees for this event via email which is the maximum allowed at this time. Feel free to attempt to contact this attendee via Facebook, LinkedIn or Twitter if their information is available.</p></td></tr>')}else{jQuery("#"+tbody).html('<tr><td colspan="2"><p style="font-size:12px;color:#1E79E9;">We\'re sorry. We were unable to send this message. Please try again or contact us</p></td></tr>')}},"json")}return false})}};bizJ.sendScoop={init:function(el){var self=this;el.submit(function(){jQuery("#scoopFormError").hide();jQuery("#scoopFormSuccess").hide();jQuery("#scoopprogress").show();jQuery.post("email/index.json?_method=SCOOP",el.serialize(),function(data){jQuery("#scoopprogress").hide();if(data.success==1){jQuery(".warning_error").hide();jQuery("#scoopFormSuccess").show();jQuery("#scoopFormSuccessMsg").html(data.message)}else{jQuery(".warning_error").hide();jQuery("#scoopFormError").show().html(data.message);if(typeof data.errors!="undefined"){for(var i in data.errors){jQuery("#scoopFormError"+i).show().html(data.errors[i]);jQuery("#scoopForm #"+i).addClass("smlMargin")}}}},"json");return false})}};bizJ.scrubFeedback={init:function(el){var self=this;el.submit(function(){jQuery("#emailarticleprogress").show();if(!jQuery("#emailNote").val()){jQuery("#emailarticleprogress").hide();alert("Please provide us with some feedback. Thanks.");return false}jQuery.post("email/index.json?_method=SCRUBFEEDBACK",el.serialize(),function(data){if(data.error){jQuery("#scrubMessage").show().html("Sorry, we encounted an error, please try again.")}el.hide();jQuery("#emailarticleprogress").hide();jQuery("#scrubMessage").show().html("Thank you for your feedback")});return false})}};bizJ.emailPlaceHolder={init:function(el){el.val("enter email address....");el.focus(function(){if(jQuery(this).val()=="enter email address...."){jQuery(this).val("")}});el.blur(function(){if(jQuery(this).val()==""){jQuery(this).val("enter email address....")}})}};var captchaWaitingList=[];var captchaSetup=function(){bizJ.captchaSetup()};bizJ.captchaSetup=function(){var setupElems=window.captchaWaitingList;$.each(setupElems,function(index,elem){var widgetId=grecaptcha.render(elem.id,elem.options);jQuery("#"+elem.id).data("wid",widgetId)})};bizJ.getCaptcha=function(divId,callback){if(divId==null){divId="recaptcha"}if(typeof callback!=="function"){callback=function(){}}if(jQuery("#"+divId).length==0)return;var recaptchaOptions={sitekey:"6LfOiAATAAAAAJDraPFRHdurf4KKqXa-QIrJauQs",theme:"light",callback:callback};var $div=jQuery("#"+divId);if($div.data("wid")!=="undefined"&&$div.children().length){}else if(typeof grecaptcha!="undefined"){var widgetId=grecaptcha.render(divId,recaptchaOptions);jQuery("#"+divId).data("wid",widgetId)}else{window.captchaWaitingList.push({id:divId,options:recaptchaOptions});jQuery.getScript("https://www.google.com/recaptcha/api.js?onload=captchaSetup&render=explicit")}};bizJ.changeAddressForm={init:function(el){var self=this;el.submit(function(){jQuery("#subscriptionprogress").show();jQuery(".warning_error").hide();jQuery('#changeAddressForm input[type="text"]').removeClass("smlMargin");jQuery.post("email/index.json?_method=CHANGEADDRESS",el.serialize(),function(data){jQuery("#subscriptionprogress").hide();if(data.error==1){if(typeof data.message!="undefined"){jQuery("#changeAddressFormError").show().html(data.message)}if(typeof data.errors!="undefined"){for(var i in data.errors){jQuery("#changeAddressFormError"+i).show().html(data.errors[i]);jQuery("#changeAddressForm #"+i).addClass("smlMargin")}}}else{jQuery("#changeAddressFormError").show().html(data.message)}jQuery("html,body").animate({scrollTop:jQuery("#changeAddressForm").offset().top},"slow")},"json");return false})}};bizJ.contactContact={init:function(el){bizJ.contactPageHandler(el,"Contact");jQuery(".contactCloseClick").click(function(){jQuery("#contactContactFormSuccess").hide("slow")})}};bizJ.contactEditor={init:function(el){bizJ.contactPageHandler(el,"Editor");jQuery(".contactCloseClick").click(function(){jQuery("#contactEditorFormSuccess").hide("slow")})}};bizJ.contactSubscription={init:function(el){bizJ.contactPageHandler(el,"Subscription");jQuery(".contactCloseClick").click(function(){jQuery("#contactSubscriptionFormSuccess").hide("slow")})}};bizJ.contactAdvertising={init:function(el){bizJ.contactPageHandler(el,"Advertising")}};bizJ.contactDirectory={init:function(el){bizJ.contactPageHandler(el,"Directory");jQuery(".contactCloseClick").click(function(){jQuery("#contactDirectoryFormSuccess").hide("slow")})}};bizJ.contactPageHandler=function(el,type){var boxes=["Contact","Editor","Subscription","Advertising","Directory"],name="#contact"+type,recaptchaDivId="recaptcha"+type.toLowerCase();var recaptchaCallback=function(){jQuery(name+'Box [type="submit"]').attr("disabled",false)};if(jQuery(name+"Box").is(":visible")){bizJ.getCaptcha(recaptchaDivId,recaptchaCallback);jQuery("html,body").animate({scrollTop:jQuery("#"+$name).offset().top},"slow")}el.click(function(){if(jQuery(".warning_error").is(":visible")){jQuery(".warning_error").hide()}if(jQuery(name+"Box").is(":visible")){jQuery(name+"Box").hide("slow");jQuery(name).removeClass("contactHeaderBoxActive").addClass("contactHeaderBoxInactive")}else{jQuery(name).removeClass("contactHeaderBoxInactive").addClass("contactHeaderBoxActive");for(i in boxes){var id="#contact"+boxes[i];if(id==name)continue;if(jQuery(id+"Box").is(":visible")){jQuery(id).removeClass("contactHeaderBoxActive").addClass("contactHeaderBoxInactive");jQuery(id+"Box").hide()}}jQuery(name+"Box").show("slow");bizJ.getCaptcha(recaptchaDivId,recaptchaCallback)}return false})};bizJ.contactContactForm={init:function(el){bizJ.contactFormHandler(el,"Contact")}};bizJ.contactEditorForm={init:function(el){bizJ.contactFormHandler(el,"Editor")}};bizJ.contactSubscriptionForm={init:function(el){bizJ.contactFormHandler(el,"Subscription")}};bizJ.contactAdvertisingForm={init:function(el){bizJ.contactFormHandler(el,"Advertising")}};bizJ.contactDirectoryForm={init:function(el){bizJ.contactFormHandler(el,"Directory")}};bizJ.contactSyndicationForm={init:function(el){bizJ.contactFormHandler(el,"Syndication");bizJ.getCaptcha("recaptchaSyndication".toLowerCase())}};bizJ.contactFormHandler=function(el,type){var self=bizJ,id="#contact"+type,form="#contact"+type+"Form",progress="#"+type.toLowerCase()+"progress",recaptchaDivId="#recaptcha"+type.toLowerCase();el.submit(function(e){e.preventDefault();jQuery(progress).show();jQuery(".warning_error").hide();jQuery(form+' input[type="text"]').removeClass("smlMargin");var widgetId=jQuery(recaptchaDivId).data("wid");jQuery.post("email/index.json?_method="+id.toUpperCase().replace("#",""),el.serialize(),function(data){jQuery(progress).hide();grecaptcha.reset(widgetId);if(data.error==1){if(typeof data.message!="undefined"){jQuery(form+"Error").show().html(data.message)}if(typeof data.errors!="undefined"){for(var i in data.errors){jQuery(form+"Error"+i).show().html(data.errors[i]);jQuery(form+" #"+i).addClass("smlMargin")}}}else{jQuery(form+"Success").show().find(form+"SuccessMsg").html(data.message);jQuery("#contactContactBox").hide("slow");jQuery("#contactContactBox").removeClass("contactHeaderBoxActive").addClass("contactHeaderBoxInactive")}jQuery("html,body").animate({scrollTop:jQuery(id).offset().top},"slow")},"json");return false})};bizJ.calListingMultiStepForm={config:{ajax:{endpoint:"/ajax/addcalendarlisting/"},redirect:"next/page/here",classes:{hide:"form--hidden",error:"form--error",prev:"ps-btn-prev",next:"ps-btn-next"}},form:null,formData:{},formStep:null,formStepValid:false,formSteps:null,cartData:{},sessionId:"0",errors:{},submitted:false,cityAndStateList:{},init:function(){this.form=jQuery("#cal_listing_submission_form");this.formSteps=this.form.find("fieldset.form__step");if(this.form.attr("cal_id")){this.formData["cal_id"]=this.form.attr("cal_id")}var hash=this.getHash();var stepNumber=1;var hashInt=parseInt(hash);if(hashInt>0){stepNumber=hashInt}targetStep=this.form.find("fieldset[data-step="+stepNumber+"]");this.gotoStep(targetStep);var logoInput=this.form.find("#event_logo");logoInput.parent().hide();this.toggleRailDisplay();this.toggleTimes();this.getGeoByZip();this.attachListeners()},attachListeners:function(){this.form.find("#summary").keyup(function(){var summary=jQuery(this),summaryLength=summary.val().length;if(summaryLength>200){summaryLength=200;summary.val(summary.val().substring(0,200))}jQuery(this).next().text("("+summaryLength+" of 200 character limit)")});this.form.find('input[name="listing_type"]').each(function(data){if(this.value==1){jQuery(this).on("click",function(event){jQuery("#eventLogoIFrame").show()});if(this.checked){jQuery("#eventLogoIFrame").show()}}else{jQuery(this).on("click",function(event){jQuery("#eventLogoIFrame").hide()});if(this.checked){jQuery("#eventLogoIFrame").hide()}}});this.form.find("."+this.config.classes.prev).each(function(){jQuery(this).on("click",function(event){event.preventDefault();bizJ.calListingMultiStepForm.gotoPrevStep()})});this.form.find("."+this.config.classes.next).each(function(){jQuery(this).on("click",function(event){event.preventDefault();if(jQuery(this).attr("id")!="final_submit"){bizJ.calListingMultiStepForm.saveFormStep()}})});jQuery(window).on("hashchange",function(event){event.preventDefault();var hash=window.location.hash.substr(1);var hashInt=parseInt(hash);if(hashInt>0){stepNumber=hashInt}var targetStep=bizJ.calListingMultiStepForm.form.find("fieldset[data-step="+stepNumber+"]");bizJ.calListingMultiStepForm.gotoStep(targetStep)});jQuery("#final_submit").on("click",function(event){event.preventDefault();bizJ.calListingMultiStepForm.submitted=true;bizJ.calListingMultiStepForm.saveFormStep()});jQuery("#start_date").on("change",this.toggleTimes);jQuery("#end_date").on("change",this.toggleTimes);jQuery("#variedDaysCheckBox").on("click",this.toggleDateRanges);jQuery("#location_zip").on("keyup blur",this.getGeoByZip);jQuery("#city_state_dropdown").on("change",this.toggleOtherCityAndStateOptions)},toggleTimes:function(){var dateInput1=jQuery("#start_date");var dateInput2=jQuery("#end_date");if(dateInput1.val()==undefined||dateInput1.val()==""||dateInput2.val()==undefined||dateInput2.val()==""||dateInput1.val()==dateInput2.val()){jQuery("#divVariedDaysCheckBox").slideUp(600);jQuery("#divStartTime").slideDown(600);jQuery("#divEndTime").slideDown(600);jQuery("#divVariedDates").slideUp(600,function(){jQuery("#divVariedDates").empty()});jQuery("#variedDaysCheckBox").prop("checked",false)}else{jQuery("#divVariedDaysCheckBox").slideDown(600);if(jQuery("#variedDaysCheckBox").prop("checked")==true){bizJ.calListingMultiStepForm.getListingTimeInputs();jQuery("#divStartTime").slideUp(600);jQuery("#divEndTime").slideUp(600)}}},toggleDateRanges:function(){var variedDaysCheckBox=jQuery("#variedDaysCheckBox");if(variedDaysCheckBox.prop("checked")==true){bizJ.calListingMultiStepForm.getListingTimeInputs();jQuery("#divStartTime").slideUp(600);jQuery("#divEndTime").slideUp(600)}else{jQuery("#divVariedDates").slideUp(600,function(){jQuery("#divVariedDates").empty()});jQuery("#divStartTime").slideDown(600);jQuery("#divEndTime").slideDown(600)}},getListingTimeInputs:function(){var submission={};var fields=bizJ.calListingMultiStepForm.form.find("fieldset[data-step=1]");fields.find("input").each(function(){if(this.name=="listing_type"){if(!this.checked){return}}submission[this.name]=this.value});jQuery("#divVariedDates").slideUp(600);jQuery.post(this.config.ajax.endpoint+"generate-times",submission,function(response){jQuery("#divVariedDates").empty();jQuery("#divVariedDates").append(jQuery(response));jQuery("#divVariedDates").slideDown(600)})},getGeoByZip:function(){if(jQuery("#location_zip").val().length==5){zipcode=jQuery("#location_zip").val();submission={};submission["zip_code"]=zipcode;jQuery.post(bizJ.calListingMultiStepForm.config.ajax.endpoint+"get-geo-by-zip",submission,function(response){jQuery("#city_state_dropdown").empty().append(jQuery(response["option_elements"]));jQuery("#divCityStateDropDown").slideDown(600,function(){bizJ.calListingMultiStepForm.toggleOtherCityAndStateOptions()})},"json")}else{jQuery("#divCityStateDropDown").slideUp(600,function(){jQuery("#city_and_state_dropdown").empty();bizJ.calListingMultiStepForm.toggleOtherCityAndStateOptions()})}},toggleOtherCityAndStateOptions:function(){if(jQuery("#city_state_dropdown").val()=="other"){jQuery("#divOtherCityAndState").slideDown(600)}else{var cityAndStateValue=jQuery("#city_state_dropdown").val();var zip=jQuery("#location_zip").val();if(zip!=undefined&&zip.length==5&&cityAndStateValue!=undefined){var cityAndStateArray=cityAndStateValue.split(":");jQuery("#location_city").val(cityAndStateArray[0]);jQuery("#location_state").val(cityAndStateArray[1])}else{jQuery("#location_city").val("");jQuery("#location_state").val("")}jQuery("#divOtherCityAndState").slideUp(600)}},getHash:function(){return window.location.hash.substr(1)},setHash:function(hash){window.location.hash="#"+hash},gotoPrevStep:function(){var currentStep=this.formStep,prevStep=currentStep.prev();if(prevStep.data("step")==undefined){return}this.hideStep(currentStep);this.showStep(prevStep);var stepNumber=prevStep.data("step");this.formStep=prevStep;this.setHash(stepNumber);this.scrollToFormTop()},gotoNextStep:function(){var formStep=this.formStep,nextStep=formStep.next();if(!this.formStepValid){this.scrollToFormTop();return}if(nextStep.data("step")==undefined){return}this.hideStep(formStep);this.showStep(nextStep);var stepNumber=nextStep.data("step");this.formStep=nextStep;this.formStepValid=false;this.setHash(stepNumber);this.scrollToFormTop()},gotoStep:function(step){var stepNumber=step.data("step");var currentStepNumber=0;if(this.formStep!=undefined){currentStepNumber=this.formStep.data("step")}if(stepNumber==currentStepNumber){return}this.hideAllSteps();this.showStep(step);this.setHash(stepNumber);this.formStep=step},hideAllSteps:function(){var length=this.formSteps.length;for(i=0;i<length;i++){this.hideStep(jQuery(this.formSteps[i]))}},hideStep:function(step){step.addClass(this.config.classes.hide)},showStep:function(step){step.removeClass(this.config.classes.hide)},getCurrentStep:function(){return this.formStep.data("step")},getTotalSteps:function(){return this.formSteps.length},saveFormStep:function(){if(jQuery("#variedDaysCheckBox").prop("checked")==true&&this.getCurrentStep()=="1"){var date=new Date(jQuery("#start_date").val());var year=date.getFullYear();var month=(date.getMonth()+1).toString();var day=date.getDate().toString();month=month.length==1?"0"+month:month;day=day.length==1?"0"+day:day;var id=""+year+month+day;jQuery("#start_time_hours").val(jQuery("#start_time_hours_"+id).val());jQuery("#start_time_minutes").val(jQuery("#start_time_minutes_"+id).val());jQuery("#start_time_ampm").val(jQuery("#start_time_ampm_"+id).val());jQuery("#end_time_hours").val(jQuery("#end_time_hours_"+id).val());jQuery("#end_time_minutes").val(jQuery("#end_time_minutes_"+id).val());jQuery("#end_time_ampm").val(jQuery("#end_time_ampm_"+id).val())}var submission={};var fields={};if(this.submitted){fields=this.form}else{fields=this.formStep
}fields.find("input").each(function(){if(this.name=="listing_type"){if(!this.checked){return}}if(this.name=="variedDaysCheckBox"){if(!this.checked){return}}submission[this.name]=this.value});fields.find("select").each(function(){submission[this.name]=this.value});fields.find("textarea").each(function(){submission[this.name]=this.value});submission["submitted"]=this.submitted;if(this.formData["cal_id"]!=null){submission["cal_id"]=this.formData["cal_id"]}jQuery.post(this.config.ajax.endpoint+"save",submission,function(response){if(response["success"]==undefined||response["success"]!=1){errors=response["errors"];for(var key in errors){if(errors[key]!=""){bizJ.calListingMultiStepForm.formStep.find(".ps-form--error__msg").parent().removeClass("form--hidden");if(key=="details"){bizJ.calListingMultiStepForm.form.find("#"+key).parent().parent().addClass("has-error")}else{bizJ.calListingMultiStepForm.form.find("#"+key).parent().addClass("has-error")}}}bizJ.calListingMultiStepForm.scrollToFormTop();return}else{bizJ.calListingMultiStepForm.formData["cal_id"]=response["cal_id"];bizJ.calListingMultiStepForm.formStepValid=true;bizJ.calListingMultiStepForm.formStep.find(".ps-form--error__msg").parent().addClass("form--hidden");var formValues=bizJ.calListingMultiStepForm.formStep.find(".has-error"),submission={};jQuery.each(formValues,function(){jQuery(this).removeClass("has-error")});bizJ.calListingMultiStepForm.gotoNextStep()}if(bizJ.calListingMultiStepForm.submitted==true){bizJ.calListingMultiStepForm.submitForm()}},"json")},submitForm:function(){if(this.submitted==true){this.form.submit()}},scrollToFormTop:function(){jQuery("html, body").animate({scrollTop:bizJ.calListingMultiStepForm.formStep.find(".legend__header").offset().top},500)},toggleRailDisplay:function(){var cartRail=jQuery(".cartMinidisplay").first(),cartHelp=jQuery("#shoppingCart_help"),calendarListingHelp=jQuery("#calendarListing_help"),calendarFAQ=jQuery("#calendar_FAQ");cartRail.addClass("controller--hide");cartHelp.addClass("controller--hide");calendarListingHelp.removeClass("controller--hide");calendarFAQ.removeClass("controller--hide")}};bizJ.potmSubmissionForm={apiEndpoint:"/ajax/potm/get-overview",email:jQuery.cookie("email"),getGeoByZip:function(){if(jQuery("#office_zip").val().length==5){zipcode=jQuery("#office_zip").val();submission={};submission["zip_code"]=zipcode;jQuery.post(bizJ.calListingMultiStepForm.config.ajax.endpoint+"get-geo-by-zip",submission,function(response){jQuery(".form-item--citystate").slideUp(600);jQuery("#city_state_dropdown").empty().append(jQuery(response["option_elements"]));jQuery("#divCityStateDropDown").slideDown(600,function(){jQuery("#office_city").val(response["default"]["city_name"]);jQuery("#office_state").val(response["default"]["state_code"]);bizJ.calListingMultiStepForm.toggleOtherCityAndStateOptions()})},"json")}else{jQuery("#divCityStateDropDown").slideUp(600,function(){jQuery("#city_and_state_dropdown").empty();bizJ.calListingMultiStepForm.toggleOtherCityAndStateOptions()})}},toggleOtherCityAndStateOptions:function(){if(jQuery("#city_state_dropdown").val()=="other"){jQuery(".form-item--citystate").slideDown(600)}else{var cityAndStateValue=jQuery("#city_state_dropdown").val();var zip=jQuery("#office_zip").val();if(zip!=undefined&&zip.length==5&&cityAndStateValue!=undefined){var cityAndStateArray=cityAndStateValue.split(":");jQuery("#office_city").val(cityAndStateArray[0]);jQuery("#office_state").val(cityAndStateArray[1])}else{jQuery("#office_city").val("");jQuery("#office_state").val("")}jQuery(".form-item--citystate").slideUp(600)}},init:function(el){var form=jQuery(el),stepOne=jQuery(form).find("#potm_step_one"),stepTwo=jQuery(form).find("#potm_step_two"),stepThree=jQuery(form).find("#potm_step_three"),stepFour=jQuery(form).find("#potm_step_four");bizJ.potmSubmissionForm.addAdditionalMarkets(form);if(typeof jQuery("#city_state_dropdown")!="undefined"){this.getGeoByZip();this.toggleOtherCityAndStateOptions()}stepOne.find(".ps-btn-next").click(function(e){e.preventDefault();var currentStep=jQuery(this).parent().parent(),nextStep=currentStep.next(),submissionType=currentStep.find('[name="submission_type"]:checked').val();if(bizJ.validate.radio(submissionType)){nextStep.find('div[data-submission-type="'+submissionType+'"]').removeClass("form--hidden");bizJ.potmSubmissionForm.gotoNextStep(currentStep,nextStep);bizJ.potmSubmissionForm.removeFormErrors(currentStep)}else{bizJ.potmSubmissionForm.showFormError(currentStep);currentStep.find('input[name="submission_type"]').each(function(){jQuery(this).parents(".form__group").addClass("has-error")})}});stepTwo.find('textarea[name*="summary"]').each(function(){jQuery(this).keypress(function(){var summary=jQuery(this),summaryLength=summary.val().length;if(summaryLength>300){return false}})});stepTwo.find('textarea[name*="summary"]').each(function(){jQuery(this).keyup(function(){var summary=jQuery(this),summaryLength=summary.val().length;if(summaryLength>300){summaryLength=300;summary.val(summary.val().substring(0,300))}summary.parents(".form__group").find("span").text("("+summaryLength+" of 300 character limit)")})});stepTwo.find(".ps-btn-prev").click(function(e){e.preventDefault();var currentStep=jQuery(this).parent().parent(),prevStep=currentStep.prev(),submissionType=jQuery("#potm_submission_form").find('input[name="submission_type"]:checked').val();currentStep.find('div[data-submission-type="'+submissionType+'"]').addClass("form--hidden");bizJ.potmSubmissionForm.gotoPrevStep(currentStep,prevStep);bizJ.potmSubmissionForm.removeFormErrors(currentStep)});stepTwo.find(".ps-btn-next").click(function(e){e.preventDefault();var currentStep=jQuery(this).parent().parent(),nextStep=currentStep.next(),submissionType=jQuery("#potm_submission_form").find('input[name="submission_type"]:checked').val(),hasErrors=false;jQuery('[name^="'+submissionType+'["]').each(function(){var field=jQuery(this),fieldName=field.attr("name");if(fieldName.indexOf("facebook")==-1&&fieldName.indexOf("linkedin")==-1&&fieldName.indexOf("twitter")==-1&&fieldName.indexOf("college")==-1){if(field.is("input")||field.is("textarea")){if(!bizJ.validate.text(field.val())){hasErrors=true;field.parents(".form__group").addClass("has-error")}else{field.parents(".form__group").removeClass("has-error")}}else if(field.is("select")){if(!bizJ.validate.select(field.val())){hasErrors=true;field.parents(".form__group").addClass("has-error")}else{field.parents(".form__group").removeClass("has-error")}}}});if(hasErrors===false){bizJ.potmSubmissionForm.gotoNextStep(currentStep,nextStep);bizJ.potmSubmissionForm.removeFormErrors(currentStep)}else{bizJ.potmSubmissionForm.showFormError(currentStep)}});if(typeof jQuery("#city_state_dropdown")!="undefined"){stepThree.find("#office_zip").on("keyup blur",this.getGeoByZip);jQuery("#city_state_dropdown").on("change",this.toggleOtherCityAndStateOptions)}stepThree.find(".ps-btn-prev").click(function(e){e.preventDefault();var currentStep=jQuery(this).parent().parent(),prevStep=currentStep.prev();bizJ.potmSubmissionForm.gotoPrevStep(currentStep,prevStep)});stepThree.find(".ps-btn-next").click(function(e){e.preventDefault();var currentStep=jQuery(this).parent().parent(),nextStep=currentStep.next(),industryId=currentStep.find('select[name="industry_id"]'),marketId=currentStep.find('select[name="market_id"]');hasErrors=false;jQuery('[name^="office_"]').each(function(){var field=jQuery(this);if(field.attr("data-optional")!="true"){if(field.is("input")||field.is("textarea")){if(!bizJ.validate.text(field.val())){hasErrors=true;field.parents(".form__group").addClass("has-error")}else{field.parents(".form__group").removeClass("has-error")}}else if(field.is("select")){if(!bizJ.validate.select(field.val())){hasErrors=true;field.parents(".form__group").addClass("has-error")}else{field.parents(".form__group").removeClass("has-error")}}}});if(!bizJ.validate.select(industryId.val())){hasErrors=true;industryId.parents(".form__group").addClass("has-error")}else{industryId.parents(".form__group").removeClass("has-error")}if(!bizJ.validate.select(marketId.val())){hasErrors=true;marketId.parents(".form__group").addClass("has-error")}else{marketId.parents(".form__group").removeClass("has-error")}if(hasErrors===false){bizJ.potmSubmissionForm.showSubmissionPreview(form);bizJ.getCaptcha("recaptchapotm",function(){stepFour.find(".ps-btn-submit").attr("disabled",false)});bizJ.potmSubmissionForm.gotoNextStep(currentStep,nextStep);bizJ.potmSubmissionForm.removeFormErrors(currentStep)}else{bizJ.potmSubmissionForm.showFormError(currentStep)}});stepFour.find(".ps-btn-prev").click(function(e){e.preventDefault();var currentStep=jQuery(this).parent().parent(),prevStep=currentStep.prev();bizJ.potmSubmissionForm.gotoPrevStep(currentStep,prevStep);bizJ.potmSubmissionForm.hideSubmissionPreview(form)});stepFour.find(".ps-btn-submit").click(function(e){var currentStep=jQuery(this).parent().parent(),submitterEmail=currentStep.find('input[name="submitter_email"]'),additionalEmail=currentStep.find('input[name="additional_email"]'),hasErrors=false;if(!bizJ.validate.emailAddress(submitterEmail.val())||submitterEmail.val().indexOf("&")>0){hasErrors=true;submitterEmail.parents(".form__group").addClass("has-error")}if(bizJ.validate.text(additionalEmail.val())){var additonalEmailHasErrors=false,additionalEmailString=jQuery.trim(additionalEmail.val());if(additionalEmailString!=""){var additionalEmails=additionalEmailString.split(",");for(var i=0;i<additionalEmails.length;i++){var additionalEmailsString=jQuery.trim(additionalEmails[i]);if(!bizJ.validate.emailAddress(additionalEmailsString)||additionalEmailsString.indexOf("&")>0){additonalEmailHasErrors=true}}if(additonalEmailHasErrors===false){additionalEmail.parents(".form__group").removeClass("has-error")}else{hasErrors=true;additionalEmail.parents(".form__group").addClass("has-error")}}}if(hasErrors===false){bizJ.potmSubmissionForm.removeFormErrors(currentStep);return true}else{bizJ.potmSubmissionForm.showFormError(currentStep);return false}})},gotoPrevStep:function(currentStep,prevStep){currentStep.addClass("form--hidden");prevStep.removeClass("form--hidden");bizJ.potmSubmissionForm.scrollToFormTop()},gotoNextStep:function(currentStep,nextStep){currentStep.addClass("form--hidden");nextStep.removeClass("form--hidden");bizJ.potmSubmissionForm.scrollToFormTop()},scrollToFormTop:function(){jQuery("html, body").animate({scrollTop:jQuery("div#pageContainer").offset().top},500)},showFormError:function(currentStep){currentStep.find(".ps-form--error__msg").parents(".form__group").removeClass("form--hidden");bizJ.potmSubmissionForm.scrollToFormTop()},removeFormErrors:function(currentStep){currentStep.find(".ps-form--error__msg").parents(".form__group").addClass("form--hidden");currentStep.find(".has-error").each(function(){jQuery(this).removeClass("has-error")})},addAdditionalMarkets:function(form){form.find("a.add_additional_market").click(function(e){e.preventDefault();var additionalMarkets=jQuery('select[name^="additional_market_id["]'),index=additionalMarkets.length,template=additionalMarkets.eq(0).parent().clone(),removeLink=jQuery('<a class="remove_additional_market" href="#">Remove</a>');template.find("label").remove();template.append(removeLink).find("a.remove_additional_market").bind("click",function(e){e.preventDefault();jQuery(this).parents(".form__group--remove").remove()});additionalMarkets.eq(index-1).parent().after(template)})},showSubmissionPreview:function(form){var formValues=form.serializeArray(),submission={};jQuery.each(formValues,function(){submission[this.name]=this.value});jQuery.get(bizJ.potmSubmissionForm.apiEndpoint,submission,function(data){jQuery("div#submission__preview").html(data)})},hideSubmissionPreview:function(form){form.find("div#submission__preview").empty()}};bizJ.closeEmailArticleBox=function(){jQuery("#emailArticleForm").show();jQuery("#emailArticleSuccess").hide().html("");jQuery("#emailArticleError").hide().html("");jQuery("#emailArticle").hide()};bizJ.emailArticleBox={init:function(el){el.click(function(){if(jQuery("#emailArticle").is(":visible")){jQuery("#emailArticle").hide()}else{jQuery("#emailArticle").show();jQuery(window).scrollTop(jQuery("#emailArticle").offset().top);bizJ.getCaptcha("recaptchaemailarticle",function(){jQuery('#emailArticleForm [type="submit"]').attr("disabled",false)})}return false})}};bizJ.shareLink={is_init:0,init:function(el){if(this.is_init)return;this.is_init=1;jQuery(el).submit(function(){if(!jQuery(this).find('input[name="email_from"]').val()){jQuery(this).find('input[name="email_from"]').before('<div class="warning">Email Address is required</div>');return false}if(!jQuery(this).find('input[name="email_to"]').val()){jQuery(this).find('input[name="email_to"]').before('<div class="warning">Email Address is required</div>');return false}jQuery(el).find(".emailArticleButton").hide();jQuery(el).find(".progress").show();jQuery.post("email/index.json?_method=SHARELINK",jQuery(this).serialize(),function(data){if(data&&data.response){jQuery(el).hide().before(jQuery('<p class="status">Your link has been sent, <a class="resend" href="#">Click here to send again</a></p>'))}},"json");return false});jQuery("#modalEmail a.resend").live("click",function(){jQuery(el).find(".emailArticleButton").show();jQuery(el).find(".progress").hide();jQuery(el).parent().find("p.status").remove();jQuery(el).show();jQuery(el).find(":input").not(":button, :submit, :reset, :hidden").val("").removeAttr("checked").removeAttr("selected");return false})}};bizJ.travelMap={init:function(el){var el_name=jQuery(el).attr("id");var latlng=new google.maps.LatLng(travel.mapConf.lat,travel.mapConf.lng);var myOptions={zoom:travel.mapConf.zoom_level,center:latlng,mapTypeId:google.maps.MapTypeId.ROADMAP};var map=new google.maps.Map(document.getElementById(el_name),myOptions);var pins=travel.mapPins;function addMarker(point,map,title,index){if(point){var letter=String.fromCharCode("A".charCodeAt(0)+index);var marker=new google.maps.Marker({position:point,map:map,title:title,icon:"http://www.google.com/mapfiles/marker"+letter+".png"})}}for(var i=0;i<pins.length;i++){var point=new google.maps.LatLng(pins[i].lat,pins[i].lng);addMarker(point,map,pins[i].name,i)}}};bizJ.tflightRegistration={init:function(el){var self=this;var newsletter_ckbox=jQuery('#techflash_form ul li input[name="newsletter"]');jQuery.each(newsletter_ckbox,function(i,item){jQuery(item).click(function(){var product_id_input=jQuery(item).siblings("input.product_id");if(jQuery(item).attr("checked")=="checked"){jQuery(product_id_input).attr("name","product_id[]")}else{jQuery(product_id_input).attr("name","")}})});bizJ.lightRegistration.init(el)}};bizJ.lightRegistration={init:function(el){var self=this;this.sign_up=jQuery(el).find('form button[name="signup"],form input[name="signup"]');this.sign_up.click(function(){var warning=jQuery(el).find(".warning_error,.warning_error100,.warning,.warning_errorFixWidth").first();jQuery(warning).hide();if(!bizJ.validate.emailAddress(jQuery(el).find('form input[name="email"]').val())){jQuery(warning).show().html("Please enter a valid Email Address.");jQuery(el).parent().find('form input[name="email"]').val("").focus();return false}jQuery.post("/email/index.json?_method=LIGHTREGISTRATION",jQuery(el).find("form").serialize(),function(data){if(typeof data.redirect!="undefined"&&data.redirect.length>0){window.location.href=data.redirect;return false}if(typeof data.message!="undefined"&&data.message.length>0&&data.error!=1){jQuery(warning).show().html(data.message).removeClass("warning warning_error warning_error100 warning_errorFixWidth").addClass("jsonSuccess");return false}else if(typeof data.message!="undefined"&&data.message.length>0){jQuery(warning).show().html(data.message);return false}},"json");return false})}};bizJ.jobsPostForm={init:function(el){var self=this;this.form=jQuery(el);this.form.submit(function(){self.valid=true;jQuery(".form_err, p.warn",self.form).remove();jQuery(".input_err",self.form).removeClass("input_err");if(jQuery("fieldset.inform").length){if(!bizJ.validate.text(jQuery("#full_name").val())){self.show_warning(jQuery("#full_name"))}if(!bizJ.validate.phone(jQuery("#phone_number").val())){self.show_warning(jQuery("#phone_number"),undefined,"Please enter a valid phone number")}if(!bizJ.validate.emailAddress(jQuery("#email_address").val())||jQuery("#email_address").val().indexOf("&")>0){self.show_warning(jQuery("#email_address"),undefined,"Please enter a valid email address")}}if(!bizJ.validate.text(jQuery("#job_title").val())){self.show_warning(jQuery("#job_title"))}if(!bizJ.validate.text(jQuery("#company_name").val())){self.show_warning(jQuery("#company_name"))}if(!bizJ.validate.zip(jQuery("#job_zip_code").val())){self.show_warning(jQuery("#job_zip_code"),undefined,"Please enter a valid 5 digit zip code")}if(jQuery("#job_market").length>0){if(!bizJ.validate.select(jQuery("#job_market").val())){self.show_warning(jQuery("#job_market"))}}if(!bizJ.validate.select(jQuery("#job_cat1").val())){self.show_warning(jQuery("#job_cat1"),jQuery("#job_cat1").prev().prev(),"Please select at least one category")}jQuery("input[name=application_url],input[name=application_email]",this.form).filter(":visible").each(function(){$field=jQuery(this);if($field.attr("name")=="application_email"){if(!bizJ.validate.emailAddress($field.val())){self.show_warning($field,$field.parent().prev(),"Please enter a valid Email Address")}}else{if(!bizJ.validate.url($field.val())){self.show_warning($field,$field.parent().prev(),"Please enter a valid URL beginning with http://")}}});if(!bizJ.validate.stringLength(jQuery("#job_description").val().replace(/(<([^>]+)>)|\s|&nbsp;/gi,""),150)){self.show_warning(jQuery("#job_description"),jQuery("#job_description").prev().prev(),"A minimum of 150 character is required.")}if(!self.valid){jQuery("html, body").animate({scrollTop:self.form.offset().top-75},200)}return self.valid});jQuery("#jobs-post-form-submit").click(function(){self.form.submit()});jQuery("#job_cat1").change(function(){var job_cat1_value=jQuery(this).val();if(!job_cat1_value)return;jQuery("#job_cat2 option").show();if(jQuery("#job_cat3").val())jQuery("#job_cat2 option[value='"+jQuery("#job_cat3").val()+"']").hide();jQuery("#job_cat2 option[value="+job_cat1_value+"]").hide();jQuery("#job_cat3 option").show();if(jQuery("#job_cat2").val())jQuery("#job_cat3 option[value='"+jQuery("#job_cat2").val()+"']").hide();jQuery("#job_cat3 option[value="+job_cat1_value+"]").hide()}).change();jQuery("#job_cat2").change(function(){var job_cat2_value=jQuery(this).val();if(!job_cat2_value)return;jQuery("#job_cat1 option").show();if(jQuery("#job_cat3").val())jQuery("#job_cat1 option[value='"+jQuery("#job_cat3").val()+"']").hide();jQuery("#job_cat1 option[value='"+job_cat2_value+"']").hide();jQuery("#job_cat3 option").show();jQuery("#job_cat3 option[value='"+jQuery("#job_cat1").val()+"']").hide();jQuery("#job_cat3 option[value='"+job_cat2_value+"']").hide()}).change();jQuery("#job_cat3").change(function(){var job_cat3_value=jQuery(this).val();if(!job_cat3_value)return;jQuery("#job_cat1 option").show();jQuery("#job_cat1 option[value='"+jQuery("#job_cat2").val()+"']").hide();jQuery("#job_cat1 option[value='"+job_cat3_value+"']").hide();jQuery("#job_cat2 option").show();jQuery("#job_cat2 option[value='"+jQuery("#job_cat1").val()+"']").hide();jQuery("#job_cat2 option[value='"+job_cat3_value+"']").hide()}).change();jQuery("select[name=application_type]").change(function(){jQuery("input[name=application_url],input[name=application_email]").hide().attr("disabled","disabled");jQuery("input[name=application_"+jQuery(this).val()+"]").show().removeAttr("disabled")}).change()},show_warning:function(el,label,msg){if(!label)label=el.prev();if(msg){label.after('<p class="warn">'+msg+"</p>")}el.addClass("input_err");if(!jQuery(".form_err",this.form).length){this.form.prepend('<div class="form_err"><strong>The field(s) highlighted below are required.</strong></div>')}this.valid=false}};bizJ.jobsEnhancementsForm={init:function(el){var self=this;this.form=jQuery(el);jQuery.post("jobs/post/ajaxgettotal",jQuery("#jobEnhancementsForm").serialize(),function(data){jQuery("#totalPrice").html("<strong>$"+data.rebatedTotal+"</strong");jQuery("#totalListing").html(data.type);jQuery("#totalListingPrice").html("$"+data.typeTotal);jQuery("#totalAdditionalCities").html(data.cityName);jQuery("#totalAdditionalCitiesPrice").html("$"+data.cityTotal);jQuery("#totalPromoRebate").html("$("+data.rebate+")");jQuery("#totalRemainingCredits").html(data.remainingCredits)},"json");jQuery(".enhancementsFormElement").change(function(){var serializedForm=jQuery("#jobEnhancementsForm").serialize();var additional_markets=jQuery("input[name='additional_market[]']:checked");if(additional_markets.length==0){jQuery("#jobs-post-enhancements-submit").attr("disabled","disabled");jQuery("#jobs-post-enhancements-submit").attr("readonly","readonly");jQuery("#need-market-msg").show()}else{jQuery("#jobs-post-enhancements-submit").removeAttr("disabled");jQuery("#jobs-post-enhancements-submit").removeAttr("readonly");jQuery("#need-market-msg").hide()}jQuery.post("jobs/post/ajaxgettotal",serializedForm,function(data){jQuery("#totalPrice").html("<strong>$"+data.rebatedTotal+"</strong");jQuery("#totalListing").html(data.type);jQuery("#totalListingPrice").html("$"+data.typeTotal);jQuery("#totalAdditionalCities").html(data.cityName);jQuery("#totalAdditionalCitiesPrice").html("$"+data.cityTotal);jQuery("#totalPromoRebate").html("$("+data.rebate+")");jQuery("#totalRemainingCredits").html(data.remainingCredits)},"json")});jQuery("#jobs-post-enhancements-submit").click(function(){self.form.submit()})}};bizJ.validate={emailAddress:function(string){var atext="a-zA-Z0-9\\x21\\x23\\x24\\x25\\x26\\x27\\x2a\\x2b\\x2d\\x2f\\x3d\\x3f\\x5e\\x5f\\x60\\x7b\\x7c\\x7d\\x7e";var filter=new RegExp("^(["+atext+"])+(\\x2e+["+atext+"]+)*@([a-zA-Z0-9_\\.\\-\\+])+[.][a-zA-Z0-9]{2,}$");return filter.test(string)},url:function(string){var filter=/(https?:\/\/[-a-zA-Z0-9@:%_\+.~#?&\/=]+\.[\w]{2,})/;var filterTwo=/(https?:\/\/){2,}/;return filter.test(string)&&!filterTwo.test(string)},text:function(string,test_value){if(string==test_value){return false}var filter=/[^\s]+/;return filter.test(string)},password:function(string,test_value){if(string==test_value){return false}var filter=/[\w\d_]{6,32}/;return filter.test(string)},confirmPassword:function(test1,test2){if(test1!=test2){return false}return true},phone:function(string){var filter=/^[\d]{10,14}$/;return filter.test(string.replace(/[\D]/g,""))},zip:function(string,test_value){if(string==test_value){return false}var filter=/[\d]{5}/;return filter.test(string.replace(/[\D]/g,""))},radio:function(val){if(val===undefined){return false}return true},select:function(val){if(val===undefined||val==""){return false}return true},stringLength:function(string,length,skip_white_space){if(skip_white_space===undefined)skip_white_space=true;if(string===undefined||string==""){return false}var count=skip_white_space?string.replace(/\s/g,"").length:string.length;return count>=length}};bizJ.subscribeNow={init:function(el){jQuery(el).click(function(){bizJ.clickTrack("APT: Subscribe Now");window.location.href="https://secure.bizjournals.com/subscribe/selectTerm?market="+bizJ.getMarket()+"&csrc=6320&iana=cspat";return false})}};bizJ.subscribeNowList={init:function(el){jQuery(el).click(function(){bizJ.clickTrack("APT: Lists Subscribe Now");window.location.href="https://secure.bizjournals.com/subscribe/selectTerm?market="+bizJ.getMarket()+"&csrc=6339&iana=cspatli";return false})}};bizJ.subscribeNowLeads={init:function(el){jQuery(el).click(function(){bizJ.clickTrack("APT: Leads Subscribe Now");window.location.href="https://secure.bizjournals.com/subscribe/selectTerm?market="+bizJ.getMarket()+"&csrc=6339&iana=cspatle";return false})}};bizJ.subscribeNowPromo={init:function(el){jQuery(el).click(function(){bizJ.clickTrack("APT: Subscribe Now");window.location.href="https://secure.bizjournals.com/subscribe/selectTerm?market="+bizJ.getMarket()+"&csrc=6326&iana=cspar"})}};bizJ.unsub={submitting:false,step:1,nextStep:function(){jQuery("#unsub-page"+bizJ.unsub.step).hide();bizJ.unsub.step++;jQuery("#unsub-page"+bizJ.unsub.step).show()},unsubscribe:function(token){jQuery("#unsubButton").prop("disabled",true);var data={};data["token"]=token;jQuery.get("/accountajax/unsub_email_confirmed?t="+token,function(response){jQuery("#unsubButton").prop("disabled",false);if(response!="false"){bizJ.unsub.response=response;bizJ.unsub.nextStep()}else{}},"json")},unsubscribeAll:function(token){jQuery.get("/accountajax/unsub_all_email_confirmed?t="+token,function(response){if(response!="false"){bizJ.unsub.response=response;jQuery("#unsubSingleMsg").hide();jQuery("#unsubAllMsg").show();bizJ.unsub.nextStep()}else{}},"json")},submitReason:function(token){var reasons={};reasons["reason_id"]=reason_id=jQuery("input[name=reason_id]:checked").attr("id");reasons["reason_other"]=jQuery("textarea#reason_other").val();reasons["response"]=bizJ.unsub.response;jQuery.post("/accountajax/unsub_reason?t="+token,reasons,function(){bizJ.unsub.nextStep()},"json")},removeNewsletter:function(product_id){var data={};data.product_id=product_id;jQuery.post("/accountajax/remove_subscription",data,function(response){console.debug(response);if(response.success){jQuery("#"+product_id).remove();jQuery("#subscriptionMessage").empty().append("<p>"+response.message+"</p>").removeClass("error").addClass("success").show()}else{jQuery("#subscriptionMessage").empty().append("<p>"+response.message+"</p>").removeClass("success").addClass("error").show()}},"json")},updateEmail:function(){var data={};data.new_email=jQuery("#new_email_address").val();data.confirm_new_email=jQuery("#confirm_email_address").val();if(data.new_email.length==0){alert("You must provide a new email address");jQuery("confirm_email_address").val("");return false}if(data.new_email!=data.confirm_new_email){alert("The confirmation email address does not match the new email address.  ");jQuery("confirm_email_address").val("");return false}if(bizJ.unsub.submitting==false){bizJ.unsub.submitting=true;jQuery.post("/accountajax/change_email",data,function(response){if(response.success){jQuery("#new_email_address").val("");jQuery("#confirm_email_address").val("");jQuery("#emailLabel").empty().append(data.new_email);jQuery("#emailMessage").empty().append("<p>"+response.message+"</p>").removeClass("error").addClass("success").show();jQuery("#message").val(response.message);jQuery("#emailForm").submit()}else{jQuery("#confirm_email_address").val("");jQuery("#emailMessage").empty().append("<p>"+response.message+"</p>").removeClass("success").addClass("error").show()}},"json");return false}else{return true}}};bizJ.log=function(){if(typeof console!="undefined"&&typeof console.log=="function"){console.log(arguments[0])}};bizJ.linkToPhoto={init:function(el){jQuery(el).click(function(){jQuery(el).select()})}};bizJ.getMoreNews={init:function(el){var offset=1;var baseUrl=jQuery("#baseUrl").attr("value");var limit=jQuery("#news-items > li").length;jQuery(el).click(function(){jQuery.ajax({url:baseUrl+"?ajax=1&offset="+offset+"&limit="+limit,success:function(html){offset=offset+1;jQuery("#news-items").append(html)}});return false})}};bizJ.closeAths={init:function(el){jQuery(el).click(function(){jQuery("#aths").attr("style","display:none");return false})}};bizJ.fixedScroll={init:function(el){var el_offset=el.offset();var parent_offset=el.parent().offset();jQuery(window).bind("scroll.fixedScroll",function(){if(jQuery(this).scrollTop()>el_offset.top){el.css({position:"fixed",top:"0",left:el_offset.left+"px"})}else if(jQuery(this).scrollTop()<el_offset.top){el.css({position:"inherit",top:"0",left:"0"})}})}};bizJ.lazyLoadFBComments={init:function(el){var elemTop=el.offset().top;jQuery(window).bind("scroll.fbcomments",function(){var docViewBottom=jQuery(window).scrollTop()+jQuery(window).height();if(docViewBottom>=elemTop){el.append('<fb:comments href="'+jQuery(".facebookcomments").attr("href")+'" num_posts="10" migrated="1" width="600"></fb:comments>');FB.XFBML.parse();jQuery(window).unbind("scroll.fbcomments")}});jQuery(window).trigger("scroll.fbcomments")}};bizJ.loadTinyMCE={init:function(el){el.tinymce({convert_fonts_to_spans:true,plugins:"paste",remove_trailing_nbsp:true,script_url:"http://assets.bizjournals.com/lib/js/tiny_mce/tiny_mce.js",theme:"advanced",theme_advanced_buttons1:"bold,italic,underline, separator, bullist, numlist, separator, outdent, indent, separator, undo, redo",theme_advanced_buttons2:"",theme_advanced_buttons3:"",theme_advanced_toolbar_align:"left",theme_advanced_toolbar_location:"top",theme_advanced_statusbar_location:"bottom",theme_advanced_path:false,setup:function(ed){ed.onKeyUp.add(function(ed,e){var strip=tinyMCE.activeEditor.getContent().replace(/(<([^>]+)>)|\s|&nbsp;/gi,"");var diff=150-strip.length;var text=diff+" more characters required.";if(diff>0){tinymce.DOM.setHTML(tinymce.DOM.get(tinyMCE.activeEditor.id+"_path_row"),text)}else{tinymce.DOM.setHTML(tinymce.DOM.get(tinyMCE.activeEditor.id+"_path_row"),"")}})}})}};bizJ.csvTable={init:function(el){el.tablesorter({widgets:["zebra"],textExtraction:function(node){var txt=node.innerHTML;if(txt.charAt(0)=="$"){txt=parseInt(txt.replace(/[$,]/g,""));if(!isNaN(txt))return txt}else if(txt.charAt(0)=="("&&txt.charAt(1)=="$"){txt=parseInt(txt.replace(/[()$,]/g,""));if(!isNaN(txt))return-txt}return txt}})}};bizJ.articleShareTools={shareButtons:null,init:function(el){this.shareButtons=el;var self=this,view=jQuery(window);view.bind("scroll resize",function(){var originalShareButtonsTop=self.shareButtons.parent().find(".headArticles").offset().top,parentOffset=self.shareButtons.parent().offset(),top=originalShareButtonsTop-parentOffset.top+40+"px",fixedLeft=parentOffset.left-65+"px";if(self.shareButtons.is(".vertical")){var viewTop=view.scrollTop();if(viewTop>originalShareButtonsTop){self.shareButtons.addClass("fixed").css({top:"40px",left:fixedLeft})}else if(viewTop<=originalShareButtonsTop){self.shareButtons.removeClass("fixed").css({top:top,left:"-65px"})}}});this.initHover();articleToolsResize=function(width){if(width>1080){self.shareButtons.addClass("vertical").removeClass("inline");view.trigger("scroll")}else{self.shareButtons.removeClass("vertical").addClass("inline")}};articleToolsResize(view.width());jQuery("#share-buttons").show();view.on("resize",function(){articleToolsResize(view.width())});this.initFavIcon();var socialToolsFunctions=document.createElement("ul");jQuery(socialToolsFunctions).addClass("socialTools");jQuery(socialToolsFunctions).html(socialToolsFunctionsInner);jQuery("#socialIcons").after(socialToolsFunctions)},initHover:function(){var self=this;this.shareButtons.hover(function(){self.shareButtons.addClass("wide");self.shareButtons.find("li.shareFB span").css({height:"20px",width:"130px"});self.shareButtons.find("li.shareFB iframe").css({height:"20px",width:"130px"});self.shareButtons.find("li.shareGoogle").one("mouseenter",function(){self.destoryHover();var offset=self.shareButtons.offset();offset.bottom=offset.top+self.shareButtons.height()+10;offset.right=offset.left+self.shareButtons.width()+10;jQuery(document).mousemove(function(e){if(e.pageY<offset.top||e.pageY>offset.bottom||e.pageX<offset.left||e.pageX>offset.right){jQuery(document).unbind("mousemove");self.initHover();self.shareButtons.trigger("mouseleave")}})})},function(){self.shareButtons.removeClass("wide")})},destoryHover:function(){this.shareButtons.unbind("hover")},initFavIcon:function(){this.shareButtons.find(".actionTools li.actionSave").on("click",function(e){var $fav=jQuery(this),story_id=$fav.attr("story_id")||jQuery("#id").val(),method=$fav.hasClass("active")?"REMOVEFAVORITE":"ADDFAVORITE";if($fav.find("a").attr("href")!="#")return;e.preventDefault();jQuery.post("accountajax/index.json?_method="+method,{story_id:story_id},function(data){if(data.success==1){$fav.toggleClass("active");
if($fav.hasClass("active")){$fav.find("a").text("Saved");if(jQuery("#no_fav_msg").length>0){jQuery("#no_fav_msg").before("<ul><li>"+data.markup+"</li></ul>");jQuery("#no_fav_msg").parent().after('<div class="body clearfix"><a href="/favorites" id="manage_fav_link">Manage your favorites </a></div>');jQuery("#no_fav_msg").remove()}else{jQuery(".pub_favorite:first").parent().before("<li>"+data.markup+"</li>")}}else{$fav.find("a").text("Save Article")}}},"json")})}};bizJ.favActionIcon={saveButtons:null,init:function(el){this.saveButtons=el;this.saveButtons.on("click",function(e){var $fav=jQuery(this),story_id=$fav.attr("story_id")||jQuery("#id").val(),method=$fav.hasClass("active")?"REMOVEFAVORITE":"ADDFAVORITE";e.preventDefault();jQuery.post("accountajax/index.json?_method="+method,{story_id:story_id},function(data){if(data.success==1){$fav.toggleClass("active");if($fav.hasClass("active")){$fav.text("Saved");if(jQuery("#no_fav_msg").length>0){jQuery("#no_fav_msg").before("<ul><li>"+data.markup+"</li></ul>");jQuery("#no_fav_msg").parent().after('<div class="body clearfix"><a href="/favorites" id="manage_fav_link">Manage your favorites </a></div>');jQuery("#no_fav_msg").remove()}else{jQuery(".pub_favorite:first").parent().before("<li>"+data.markup+"</li>")}}else{$fav.text("Save Article")}}},"json")})}};bizJ.stickyPageSkinAd={pageSkinAd:null,init:function(el){this.pageSkinAd=el;var self=this,view=jQuery(window);view.bind("scroll resize",function(){var originalpageSkinAdTop=self.pageSkinAd.parent().find("#pageContainer").offset().top,parentOffset=self.pageSkinAd.parent().offset(),viewTop=view.scrollTop();if(viewTop>originalpageSkinAdTop){self.pageSkinAd.removeClass("page-skin--not-sticky");self.pageSkinAd.addClass("page-skin--sticky")}else if(viewTop<=originalpageSkinAdTop){self.pageSkinAd.removeClass("page-skin--sticky");self.pageSkinAd.addClass("page-skin--not-sticky")}})}};bizJ.marchexAd={init:function(el){var dw=document.write;document.write=function(s){jQuery(el).after(s)};jQuery.getScript(marchexAdCall).done(function(){document.write=dw}).fail(function(){document.write=dw})}};bizJ.accountPurchaseHistory={init:function(el){jQuery(el).find(".ph_link_to_more").click(function(){var pt=jQuery(this).attr("pt");jQuery("#ph_more_"+pt).toggle("slow");return false})}};bizJ.marketingTabs={init:function(el){jQuery("#newsstand").hide();jQuery("#android").hide();jQuery("#mobile-web").hide();jQuery(".segmented-control-a").click(function(e){e.preventDefault();var $this=jQuery(this);var reference=$this.attr("href");jQuery(".segment-content").hide();jQuery(reference).show();jQuery(".segmented-control-li").removeClass("active");jQuery(".segmented-control-li").addClass("inactive");jQuery($this.closest("li")).removeClass("inactive").addClass("active")})}};bizJ.searchBox={init:function(el){var searchLabel=el.val();el.focus(function(){if(this.value==searchLabel){jQuery(this).val("")}});el.blur(function(){if(this.value==""){jQuery(this).val(searchLabel)}});jQuery("#searchForm").submit(function(){var value=jQuery("#searchBox").val();if(value==searchLabel){return false}})}};bizJ.listsort={init:function(el){var myTextExtraction=function(node){var str=node.innerHTML;if(str=="NA"){return""}str=str.replace(/,/g,"");str=str.replace(/\$/g,"");str=str.replace(/\(/g,"");str=str.replace(/\)/g,"");return str};jQuery(".data-table").tablesorter({textExtraction:myTextExtraction,emptyTo:"bottom"})}};bizJ.vm={init:function(el){if(typeof viewablemedia=="undefined"){jQuery.getScript("http://ad.visiblemeasures.com/ads.min.js").done(this.loadVideo)}else{this.loadVideo()}},loadVideo:function(){var visible_ad=new viewablemedia.AdTag;visible_ad.createAd({pl:21813,n:1,view:"",templateFunction:function(ad_info){video_info=ad_info.videos[0];var redirect=video_info.redirects.click.replace(/%2Fbizjournals%2F/,"%2F"+bizJ.getMarket()+"%2F");jQuery(".thumbs-155").append('<li><div class="thumbs-155--sponsored">Sponsored</div><a ct="HPT: VideoRR Additional Videos Thumb :VM" class="ct" href="'+redirect+'"><p class="play-icon">Play Video</p><img width="155" height="87" src="'+video_info.thumbnail_url+'"></a><p><a ct="HPT: VideoRR Additional Videos Headline :VM" class="ct"  href="'+redirect+'">'+video_info.title+"</a></p></li>")}})}};bizJ.socialEmail={init:function(){bizJ.appendModals();var $modal=$("#modal--email-article"),$form=jQuery("#emailstoryform"),$formFields=jQuery("#form--email-article__fields"),$formError=jQuery("#form--email-article__error"),$formSuccess=jQuery("#form--email-article__success"),$formProgress=jQuery("#form--email-article__progress"),$formSubmitButton=$form.find('[type="submit"]'),$formCloseButton=jQuery("#modal--email-article__close");var resetSocialEmailModal=function(){$formSubmitButton.attr("disabled","disabled");bizJ.getCaptcha("recaptchaemailarticle",function(){$formSubmitButton.attr("disabled",false)});$formFields.show();$formError.hide();$formSuccess.hide();$formSubmitButton.show();$formCloseButton.hide();$formProgress.hide();$form.find('[name="email_to"]').focus()};$modal.on("opened.bizj.modal",function(){resetSocialEmailModal();var $emailSlot=$modal.find(".gpt--deferred");window.gpt.refresh($emailSlot)});$modal.on("closed.bizj.modal",function(){var $emailSlot=$modal.find(".gpt--deferred");if($emailSlot.length){window.gpt.clear($emailSlot)}});$form.submit(function(){$formError.hide();$formSuccess.hide();$formSubmitButton.hide();$formCloseButton.hide();$formProgress.show();if(!jQuery("#emailFrom").val()){$formProgress.hide();$formCloseButton.hide();$formSubmitButton.show();$formError.show().html("Your Email Address is required.");return false}if(!jQuery("#emailTo").val()){$formProgress.hide();$formCloseButton.hide();$formSubmitButton.show();$formError.show().html("Email address of friend is required.");return false}var widgetId=$form.find(".g-recaptcha").attr("wid");jQuery.post("email/index.json?_method=EMAILAFRIEND",jQuery(this).serialize(),null,"json").done(function(data){$formProgress.hide();if(data.error==0){$formFields.hide();$formSuccess.show();$formCloseButton.show()}else{if(typeof grecaptcha!="undefined"){grecaptcha.reset(widgetId)}$formError.show().html(data.message);$formSubmitButton.show().attr("disabled",false)}}).fail(function(data){$formProgress.hide();if(typeof grecaptcha!="undefined"){grecaptcha.reset(widgetId)}var failMessage=data.message||"Sorry, there was an error, please try again.";$formError.show().html(failMessage);$formSubmitButton.show().attr("disabled",false)});return false})}};bizJ.appendModals=function(){var $modals=jQuery(".modal");$modals.each(function(){jQuery(this).appendTo(jQuery("body"))})};var Modal=function(element,options){this.options=options;this.$element=jQuery(element);this.$backdrop=null;this.isOpen=null};Modal.DEFAULTS={backdrop:true,keyboard:true,open:true};Modal.prototype.toggle=function(_relatedTarget){return this[!this.isOpen?"open":"close"](_relatedTarget)};Modal.prototype.open=function(_relatedTarget){var that=this,e=$.Event("open.bizj.modal",{relatedTarget:_relatedTarget});this.$element.trigger(e);if(this.isOpen||e.isDefaultPrevented())return;this.isOpen=true;this.escape();this.$element.on("click.dismiss.bizj.modal",'[data-dismiss="modal"]',$.proxy(this.close,this));this.backdrop(function(){if(!that.$element.parent().length){that.$element.appendTo(document.body)}that.$element.scrollTop(0);that.$element.addClass("modal--is-open");that.enforceFocus();var e=$.Event("opened.bizj.modal",{relatedTarget:_relatedTarget});that.$element.trigger("focus").trigger(e)})};Modal.prototype.close=function(e){if(e)e.preventDefault;e=$.Event("close.bizj.modal");this.$element.trigger(e);if(!this.isOpen||e.isDefaultPrevented())return;this.isOpen=false;this.escape();jQuery(document).off("focusin.bizj.modal");this.$element.removeClass("modal--is-open").off("click.dismiss.bizj.modal");this.closeModal()};Modal.prototype.enforceFocus=function(){};Modal.prototype.escape=function(){if(this.isOpen&&this.options.keyboard){this.$element.on("keyup.dismiss.bizj.modal",$.proxy(function(e){e.which==27&&this.close()},this))}else if(!this.isOpen){this.$element.off("keyup.dismiss.bizj.modal")}};Modal.prototype.closeModal=function(){var that=this;this.backdrop(function(){that.removeBackdrop();that.$element.trigger("closed.bizj.modal")})};Modal.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove();this.$backdrop=null};Modal.prototype.backdrop=function(callback){if(this.isOpen&&this.options.backdrop){this.$backdrop=jQuery('<div class="modal-backdrop"></div>').appendTo(document.body);this.$element.on("click.dismiss.bizj.modal",$.proxy(function(e){if(e.target!==e.currentTarget)return;this.options.backdrop=="static"?this.$element[0].focus.call(this.$element[0]):this.close.call(this)},this));this.$backdrop.addClass("modal-backdrop--is-open");if(!callback)return;callback()}else if(!this.isOpen&&this.$backdrop){this.$backdrop.removeClass("modal-backdrop--is-open");callback()}else if(callback){callback()}};$.fn.modal=function(option,_relatedTarget){return this.each(function(){var $this=jQuery(this);var data=$this.data("bs.modal");var options=$.extend({},Modal.DEFAULTS,$this.data(),typeof option=="object"&&option);if(!data)$this.data("bs.modal",data=new Modal(this,options));if(typeof option=="string")data[option](_relatedTarget);else if(options.open)data.open(_relatedTarget)})};$.fn.modal.Constructor=Modal;$.fn.modal.noConflict=function(){$.fn.modal=old;return this};jQuery(document).on("click.bizj.modal.data-api",'[data-toggle="modal"]',function(e){var $this=jQuery(this),href=$this.attr("href")||"",$target=jQuery($this.attr("data-target")||href&&href.replace(/.*(?=#[^\s]+$)/,"")),option=$target.data("bizj.modal")?"toggle":$.extend({remote:!/#/.test(href)&&href},$target.data(),$this.data());if($this.is("a"))e.preventDefault();$target.modal(option,this).one("close",function(){$this.is(":visible")&&$this.trigger("focus")})});jQuery(document).on("open.bizj.modal",".modal",function(){jQuery(document.body).addClass("has-open-modal")}).on("close.bizj.modal",".modal",function(){jQuery(document.body).removeClass("has-open-modal")});